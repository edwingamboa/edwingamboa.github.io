/*! GameDevTemplateJS 1.0 | (c) 2015 Edwin Gamboa */ 
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=150,e=250,f=100,g=100,h=.2,i=300,j=function(a,b,c,j){Phaser.Sprite.call(this,level.game,a,b,c);var k=j||{};this.healthLevel=k.healthLevel||f,this.maxHealthLevel=k.maxHealthLevel||g,this.speed=k.speed||d,this.maxSpeed=k.maxSpeed||e,level.game.physics.arcade.enable(this),this.body.bounce.y=k.bounce||h,this.body.gravity.y=k.gravity||i,this.body.collideWorldBounds=!0,this.anchor.setTo(.5,.5),this.currentWeaponIndex=0,this.weapons=[],this.weaponsKeys=[],this.onVehicle=!1,this.canFire=!0};j.prototype=Object.create(Phaser.Sprite.prototype),j.prototype.constructor=j,j.prototype.moveLeft=function(){this.body.velocity.x=-this.speed,this.onVehicle?this.frame=this.stopLeftFrameIndex:this.animations.play("left"),void 0!==this.currentWeapon&&this.currentWeapon.pointToLeft()},j.prototype.moveRight=function(){this.body.velocity.x=this.speed,this.onVehicle?this.frame=this.stopRightFrameIndex:this.animations.play("right"),void 0!==this.currentWeapon&&this.currentWeapon.pointToRight()},j.prototype.runLeft=function(){this.body.velocity.x=-this.maxSpeed,this.onVehicle?this.frame=this.stopLeftFrameIndex:this.animations.play("left"),void 0!==this.currentWeapon&&this.currentWeapon.pointToLeft()},j.prototype.runRight=function(){this.body.velocity.x=this.maxSpeed,this.onVehicle?this.frame=this.stopRightFrameIndex:this.animations.play("right"),void 0!==this.currentWeapon&&this.currentWeapon.pointToRight()},j.prototype.stop=function(){this.body.velocity.x=0,this.animations.stop(),level.xDirection>0?this.frame=this.stopRightFrameIndex:this.frame=this.stopLeftFrameIndex},j.prototype.fullHealthLevel=function(){return this.healthLevel===this.maxHealthLevel},j.prototype.increaseHealthLevel=function(a){this.healthLevel+=a,this.healthLevel>this.maxHealthLevel&&(this.healthLevel=this.maxHealthLevel)},j.prototype.decreaseHealthLevel=function(a){this.healthLevel-=a,this.healthLevel<=0&&this.killCharacter()},j.prototype.killCharacter=function(){this.killWeapons(),this.kill()},j.prototype.killWeapons=function(){for(var a in this.weapons)this.weapons[a].killWeapon()},j.prototype.setHealthLevel=function(a){this.healthLevel=a},j.prototype.updateCurrentWeapon=function(a){void 0!==this.currentWeapon&&this.currentWeapon.kill(),this.currentWeapon=this.weapons[a],this.currentWeapon.alive||this.currentWeapon.revive(),level.game.add.existing(this.currentWeapon)},j.prototype.nextWeapon=function(){this.currentWeaponIndex++,this.currentWeaponIndex===this.weaponsKeys.length&&(this.currentWeaponIndex=0),this.updateCurrentWeapon(this.weaponsKeys[this.currentWeaponIndex])},j.prototype.addWeapon=function(a){void 0===this.weapons[a.key]&&this.weaponsKeys.push(a.key),this.weapons[a.key]=a},j.prototype.fireToXY=function(a,b){this.canFire&&this.currentWeapon.fire(a,b)},j.prototype.relocate=function(a,b){this.x=a,this.y=b},j.prototype.useWeapon=function(a){void 0===this.weapons[a.key]?(this.addWeapon(a),this.currentWeaponIndex=this.weaponsKeys.indexOf(a.key),this.updateCurrentWeapon(a.key),level.xDirection>0?this.currentWeapon.pointToRight():this.currentWeapon.pointToLeft()):this.weapons[a.key].addBullets(a.numberOfBullets)},j.prototype.jump=function(){this.body.velocity.y=-350},b.exports=j},{}],2:[function(a,b,c){var d=a("./Character"),e=a("./../util/ResourceBar"),f=1,g=-1,h=function(a,b,c,g,h,i,j,k){var l={healthLevel:b,maxHealthLevel:b};d.call(this,c,g,a,l),this.animations.add("left",[0,1],10,!0),this.animations.add("right",[2,3],10,!0),this.stopLeftFrameIndex=0,this.stopRightFrameIndex=2,this.rangeDetection=level.game.rnd.integerInRange(h,i),this.rangeAttack=level.game.rnd.integerInRange(j,k),this.heatlthBar=new e(-this.width/2,-this.height/2-10,{width:40,height:5}),this.addChild(this.heatlthBar),this.direction=f};h.prototype=Object.create(d.prototype),h.prototype.constructor=h,h.prototype.update=function(){this.body.velocity.x>0?(this.direction=f,this.animations.play("right"),this.currentWeapon.pointToRight()):this.body.velocity.x<0&&(this.direction=g,this.animations.play("left"),this.currentWeapon.pointToLeft()),this.currentWeapon.updateCoordinates(this.x,this.y)},h.prototype.updateHealthLevel=function(){this.heatlthBar.updateResourceBarLevel(this.healthLevel/this.maxHealthLevel)},h.prototype.killCharacter=function(){this.healthLevel=0,level.player.increaseScore(.5*this.maxHealthLevel),d.prototype.killCharacter.call(this),level.enemies.removeChild(this)},h.prototype.rotateWeapon=function(a,b){this.currentWeapon.rotation=level.game.physics.arcade.angleToXY(this,a,b)},h.prototype.stop=function(){this.body.velocity.x=0,this.animations.stop(),this.direction===f?this.frame=this.stopRightFrameIndex:this.frame=this.stopLeftFrameIndex},b.exports=h},{"./../util/ResourceBar":62,"./Character":1}],3:[function(a,b,c){var d=a("./InteractionEnemy"),e=a("../items/weapons/MachineGun"),f=(a("../util/VerticalLayoutPopUp"),a("../util/InteractionManager")),g="friend",h=40,i=800,j=1e3,k=600,l=800,m=function(a,b){var c=["I did not know what I was doing.\nI just wanted to have your life","But now I have realised that I made suffer too \nmany people","I will surrender to the police"],m=["Forgive me!","I am sorry!","I give up!"],n=["forgive","forgive","surrender"],o=new f(c,m,n);d.call(this,g,h,a,b,i,j,k,l,o),this.useWeapon(new e(this,a,b,!0))};m.prototype=Object.create(d.prototype),m.prototype.constructor=m,b.exports=m},{"../items/weapons/MachineGun":34,"../util/InteractionManager":60,"../util/VerticalLayoutPopUp":66,"./InteractionEnemy":4}],4:[function(a,b,c){var d=a("./Enemy"),e=(a("../items/weapons/MachineGun"),function(a,b,c,e,f,g,h,i,j){d.call(this,a,b,c,e,f,g,h,i),this.interactionManager=j});e.prototype=Object.create(d.prototype),e.prototype.constructor=e,e.prototype.decreaseHealthLevel=function(a){this.healthLevel-=a,this.healthLevel<=10&&!level.lastGoalAimed&&(this.killWeapons(),this.canFire=!1,this.openDialogs(),level.liberateFamilyMember(),level.enemies.removeChild(this),level.game.add.existing(this))},e.prototype.openDialogs=function(){this.interactionManager.openDialogs()},b.exports=e},{"../items/weapons/MachineGun":34,"./Enemy":2}],5:[function(a,b,c){var d=a("./Character"),e=(a("../util/Dialog"),function(a,b,c,e){return d.call(this,a,b,c),this.animations.add("left",[0,1,2,3],10,!0),this.animations.add("right",[5,6,7,8],10,!0),this.stopLeftFrameIndex=0,this.stopRightFrameIndex=5,this.frame=this.stopLeftFrameIndex,this.hadContactWithPlayer=!1,this.interactionManager=e,this});e.prototype=Object.create(d.prototype),e.prototype.constructor=e,e.prototype.openDialogs=function(){this.interactionManager.openDialogs()},b.exports=e},{"../util/Dialog":52,"./Character":1}],6:[function(a,b,c){var d=a("./Character"),e=a("../items/weapons/Revolver"),f=a("../items/weapons/MachineGun"),g=250,h=300,i=300,j=20,k=function(){var a={speed:g,maxSpeed:h};d.call(this,200,level.GROUND_HEIGHT-50,"character",a),this.animations.add("left",[0,1,2,3],10,!0),this.animations.add("right",[5,6,7,8],10,!0),this.stopLeftFrameIndex=0,this.stopRightFrameIndex=5,this.frame=this.stopRightFrameIndex,this.score=j};k.prototype=Object.create(d.prototype),k.prototype.constructor=k,k.prototype.crouch=function(){this.animations.stop(),this.frame=9},k.prototype.increaseScore=function(a){this.score+=a,level.updateScoreText()},k.prototype.decreaseScore=function(a){this.score+=a,level.updateScoreText()},k.prototype.updateHealthLevel=function(){level.updateHealthLevel()},k.prototype.update=function(){void 0!==this.currentWeapon&&this.currentWeapon.updateCoordinates(this.x+25*level.xDirection,this.y+20)},k.prototype.changeSpeed=function(a,b){this.speed=a,this.maxSpeed=b},k.prototype.resetSpeed=function(){this.speed=g,this.maxSpeed=h},k.prototype.changeGravity=function(a){this.body.gravity.y=a},k.prototype.resetGravity=function(){this.body.gravity.y=i},k.prototype.buyItem=function(a){return this.score>=a.price?(this.score-=a.price,!0):!1},k.prototype.updateCurrentWeapon=function(a){d.prototype.updateCurrentWeapon.call(this,a),localStorage.setItem("currentWeapon",a)},k.prototype.loadCurrentWeapon=function(a){d.prototype.updateCurrentWeapon.call(this,a)},k.prototype.addWeapon=function(a){d.prototype.addWeapon.call(this,a),a.saveWeapon()},k.prototype.loadWeapon=function(a){d.prototype.addWeapon.call(this,a)},k.prototype.nextWeapon=function(){d.prototype.nextWeapon.call(this),level.updateAmmoText()},k.prototype.loadPlayer=function(){if(null!==localStorage.getItem("score")&&(this.score=parseInt(localStorage.getItem("score"))),null!==localStorage.getItem("healthLevel")){var a=parseInt(localStorage.getItem("healthLevel"));a>0?this.healthLevel=a:(this.healthLevel=100,this.score>5?this.score-=5:this.score=0,localStorage.setItem("score",this.score))}this.loadWeapons(),null!==localStorage.getItem("currentWeapon")?this.loadCurrentWeapon(localStorage.getItem("currentWeapon")):this.useWeapon(new e(700,100,!1))},k.prototype.loadWeapons=function(){var a;null!==localStorage.getItem("revolver")&&(a=new e(700,100,!1),a.numberOfBullets=parseInt(localStorage.getItem("revolver")),this.loadWeapon(a)),null!==localStorage.getItem("machineGun")&&(a=new f(700,100,!1),a.numberOfBullets=parseInt(localStorage.getItem("machineGun")),this.loadWeapon(a))},b.exports=k},{"../items/weapons/MachineGun":34,"../items/weapons/Revolver":35,"./Character":1}],7:[function(a,b,c){var d=a("./Enemy"),e=a("../items/weapons/Revolver"),f="simple_enemy",g=4,h=200,i=700,j=100,k=300,l=function(a,b){d.call(this,f,g,a,b,h,i,j,k),this.useWeapon(new e(this,a,b,!0))};l.prototype=Object.create(d.prototype),l.prototype.constructor=l,b.exports=l},{"../items/weapons/Revolver":35,"./Enemy":2}],8:[function(a,b,c){var d=a("./Enemy"),e=a("../items/weapons/MachineGun"),f="strong_enemy",g=8,h=400,i=1e3,j=200,k=600,l=function(a,b){d.call(this,f,g,a,b,h,i,j,k),this.useWeapon(new e(this,a,b,!0))};l.prototype=Object.create(d.prototype),l.prototype.constructor=l,b.exports=l},{"../items/weapons/MachineGun":34,"./Enemy":2}],9:[function(a,b,c){var d=a("./InteractionEnemy"),e=a("../items/weapons/MachineGun"),f=(a("../util/VerticalLayoutPopUp"),a("../util/InteractionManager")),g="strongestEnemy",h=30,i=800,j=1e3,k=500,l=600,m=function(a,b){var c=["Forgive me please! \nI can liberate your wife.","But your children are not here. \nThey are somewhere else,\nbut I do not know where","I am not the boss, \nI work for someone else"],m=["Forgive me","Look for your children","I am not the boss"],n=["forgive","mother","forgive"],o=new f(c,m,n);d.call(this,g,h,a,b,i,j,k,l,o),this.useWeapon(new e(this,a,b,!0))};m.prototype=Object.create(d.prototype),m.prototype.constructor=m,b.exports=m},{"../items/weapons/MachineGun":34,"../util/InteractionManager":60,"../util/VerticalLayoutPopUp":66,"./InteractionEnemy":4}],10:[function(a,b,c){var d=a("./Character"),e=a("./../util/ResourceBar"),f=1,g=-1,h=function(a,b){d.call(this,a,b,"wife"),this.animations.add("left",[0,1,2,3],10,!0),this.animations.add("right",[5,6,7,8],10,!0),this.stopLeftFrameIndex=0,this.stopRightFrameIndex=5,this.heatlthBar=new e(-this.width/2,-this.height/2-10,{width:40,height:5}),this.addChild(this.heatlthBar),this.direction=f};h.prototype=Object.create(d.prototype),h.prototype.constructor=h,h.prototype.update=function(){this.body.velocity.x=level.player.body.velocity.x,this.body.velocity.x>0?(this.direction=f,this.animations.play("right")):this.body.velocity.x<0?(this.direction=g,this.animations.play("left")):(this.animations.stop(),this.direction===f?this.frame=this.stopRightFrameIndex:this.frame=this.stopLeftFrameIndex)},h.prototype.updateHealthLevel=function(){this.heatlthBar.updateResourceBarLevel(this.healthLevel/this.maxHealthLevel)},h.prototype.killCharacter=function(){level.gameOver(),d.prototype.killCharacter.call(this)},b.exports=h},{"./../util/ResourceBar":62,"./Character":1}],11:[function(a,b,c){var d=a("./dragAndDrop/DragAndDropChallenge"),e=a("../util/GridLayoutPanel"),f=a("../util/VerticalLayoutPanel"),g=2,h=function(){var a={numberOfRows:4};d.call(this,"contexts","Contexts","Match the words \nwith their category",10,a)};h.prototype=Object.create(d.prototype),h.prototype.constructor=h,h.prototype.newChallenge=function(){this.clearChallenge();var a=3,b=[],c=level.myVocabulary.randomVocabularyItems(a);b.push(c);var d;do d=level.myVocabulary.randomVocabularyItems(a);while(c[0].categoryIndex==d[0].categoryIndex);b.push(d);var h=[level.myVocabulary.categoriesLabels[c[0].categoryIndex],level.myVocabulary.categoriesLabels[d[0].categoryIndex]];this.contexts=[];var i={numberOfColumns:a,numberOfRows:2,margin:5};this.source=new e("wordsBg",i),i={numberOfColumns:g,margin:0};var j,k,l,m,n,o,p=new e("englishChallengePanelBg",i);for(j=0;g>j;j++)for(n=new f("contextBg",5),o=level.game.make.text(0,0,h[j]),o.font=level.font,o.fontSize=30,o.fill="#f00000",o.stroke="#000000",o.strokeThickness=2,n.addElement(o),this.contexts.push(n),p.addElement(n),k=0;a>k;k++)this.vocabularyItems.push(b[j][k]),l=level.game.make.text(0,0,b[j][k].name),l.font=level.font,l.fontSize=20,l.fill="#473e2c",l.stroke="#fff",l.strokeThickness=2,l.inputEnabled=!0,l.input.enableDrag(!0,!0),l.events.onDragStop.add(this.dragAndDropControl.fixLocation,this.dragAndDropControl),l.code=""+j,this.elements.push(l),m=new f("wordBg",2),m.code=""+j,this.destinations.push(m),n.addElement(m);this.dragAndDropControl.addElementsToSourceRandomly(),this.mainPanel.addElement(p),this.mainPanel.addElement(this.source)},h.prototype.bringItemToTop=function(a){h.prototype.isPrototypeOf(a.parent)?this.addChild(a):this.addChild(a.parent.parent)},b.exports=h},{"../util/GridLayoutPanel":54,"../util/VerticalLayoutPanel":65,"./dragAndDrop/DragAndDropChallenge":15}],12:[function(a,b,c){var d=function(a,b,c,d){this.iconKey=a,this.name=b,this.score=d,this.description=c};d.prototype.constructor=d,d.prototype.success=function(a){level.increaseScore(this.score),level.showSuccessMessage("Well done! You got "+this.score+" points.",a)},d.prototype.failure=function(a){level.showErrorMessage("Sorry! Try Again.",a)},d.prototype.incomplete=function(a){level.showErrorMessage("The challenge is not complete.",a)},b.exports=d},{}],13:[function(a,b,c){var d=a("./dragAndDrop/DragAndDropChallenge"),e=a("../util/VerticalLayoutPanel"),f=a("../util/GridLayoutPanel"),g=function(){var a={numberOfRows:3};d.call(this,"imageWord","Image Match","Match the words \nwith their images",10,a)};g.prototype=Object.create(d.prototype),g.prototype.constructor=g,g.prototype.newChallenge=function(){this.clearChallenge();var a=level.myVocabulary.randomVocabularyItems(3),b=[];for(var c in a){this.vocabularyItems.push(a[c]);var d,g,h=new e("imageWordBg"),i=level.game.make.sprite(0,0,a[c].key);(i.height>120||i.width>180)&&(g=120/i.height,d=180/i.width,d>g?(i.scale.x=g,i.scale.y=g):(i.scale.x=d,i.scale.y=d));var j=new e("wordBg",2);j.code=c,this.destinations.push(j),h.addElement(i),h.addElement(j);var k=level.game.make.text(0,0,a[c].name);k.font=level.font,k.fontSize=20,k.fill="#473e2c",k.stroke="#fff",k.strokeThickness=2,k.inputEnabled=!0,k.input.enableDrag(!0,!0),k.events.onDragStop.add(this.dragAndDropControl.fixLocation,this.dragAndDropControl),k.code=c,b.push(h),this.elements.push(k)}var l={numberOfColumns:this.elements.length};this.source=new f("wordsBg",l);var m,n=new f("englishChallengePanelBg",l);for(m in b)n.addElement(b[m]);this.dragAndDropControl.addElementsToSourceRandomly(),this.mainPanel.addElement(n),this.mainPanel.addElement(this.source)},g.prototype.bringItemToTop=function(a){g.prototype.isPrototypeOf(a.parent)?this.addChild(a):this.addChild(a.parent.parent)},b.exports=g},{"../util/GridLayoutPanel":54,"../util/VerticalLayoutPanel":65,"./dragAndDrop/DragAndDropChallenge":15}],14:[function(a,b,c){var d=a("../util/GridLayoutPanel"),e=a("../util/VerticalLayoutPanel"),f=a("./dragAndDrop/DragAndDropChallenge"),g=function(){var a={numberOfRows:4};f.call(this,"unscramble","Unscramble","Form the word \nusing the letters",10,a)};g.prototype=Object.create(f.prototype),g.prototype.constructor=g,g.prototype.newChallenge=function(){this.clearChallenge();var a=level.myVocabulary.randomVocabularyItems(1)[0];this.vocabularyItems.push(a);var b=level.game.make.sprite(0,0,a.key);if(b.height>120){var c=120/b.height;b.scale.x=c,b.scale.y=c}var f={numberOfColumns:a.name.length,margin:5},g=new d("lettersBg",f);this.source=new d("lettersBg",f);var h,i,j,k,l;for(h=0;h<a.name.length;h++)i=a.name.charAt(h),l=i.toLowerCase().charCodeAt(0),j=level.game.make.text(0,0,i),j.code=l," "===i?(k=new e("spaceBg",2),k.addElement(j)):(k=new e("letterBg",2),j.font=level.font,j.fontSize=30,j.fill="#473e2c",j.stroke="#fff",j.strokeThickness=2,j.inputEnabled=!0,j.input.enableDrag(!0,!0),j.events.onDragStop.add(this.dragAndDropControl.fixLocation,this.dragAndDropControl),this.elements.push(j)),k.code=l,this.destinations.push(k),g.addElement(k);this.dragAndDropControl.addElementsToSourceRandomly(),this.mainPanel.addElement(b),this.mainPanel.addElement(g),this.mainPanel.addElement(this.source)},g.prototype.bringItemToTop=function(a){g.prototype.isPrototypeOf(a.parent)?this.addChild(a):this.addChild(a.parent.parent)},b.exports=g},{"../util/GridLayoutPanel":54,"../util/VerticalLayoutPanel":65,"./dragAndDrop/DragAndDropChallenge":15}],15:[function(a,b,c){var d=a("../../util/VerticalLayoutPopUp"),e=a("../../util/VerticalLayoutPanel"),f=a("../../englishChallenges/EnglishChallenge"),g=a("./DragAndDropController"),h=a("../../util/Button"),i=function(a,b,c,i){d.call(this,"popUpBg",null,b,5),this.englishChallenge=new f(a,b,c,i),this.vocabularyItems=[],this.destinations=[],this.elements=[],this.dragAndDropControl=new g(this),this.mainPanel=new e("popUpPanelBg"),this.addElement(this.mainPanel),this.confirmButton=new h("Confirm",this.confirm,this),this.addElement(this.confirmButton)};i.prototype=Object.create(d.prototype),i.prototype.constructor=i,i.prototype.confirm=function(){if(this.dragAndDropControl.emptyDestinations())return void this.englishChallenge.incomplete(this);if(!this.dragAndDropControl.elementsInCorrectDestination())return void this.englishChallenge.failure(this);this.englishChallenge.success();var a;for(a in this.vocabularyItems)level.myVocabulary.markAsLearned(this.vocabularyItems[a]);this.close()},i.prototype.clearChallenge=function(){this.mainPanel.children.length>0&&this.mainPanel.removeAllElements(),this.elements.length>0&&this.elements.splice(0,this.elements.length),this.destinations.length>0&&this.destinations.splice(0,this.destinations.length)},b.exports=i},{"../../englishChallenges/EnglishChallenge":12,"../../util/Button":51,"../../util/VerticalLayoutPanel":65,"../../util/VerticalLayoutPopUp":66,"./DragAndDropController":16}],16:[function(a,b,c){var d=a("../../util/Utilities"),e=function(a){this.container=a};e.prototype.constructor=e,e.prototype.addToADestination=function(a,b){this.container.destinations[b].restartPosition(),this.container.destinations[b].addElement(a)},e.prototype.fixLocation=function(a){var b;for(b in this.container.destinations)if(a.overlap(this.container.destinations[b])&&0===this.container.destinations[b].children.length)return void this.addToADestination(a,b);this.returnElementToSource(a)},e.prototype.elementsInCorrectDestination=function(){var a;for(a in this.container.destinations)if(this.container.destinations[a].children[0].code!==this.container.destinations[a].code)return!1;return!0},e.prototype.emptyDestinations=function(){var a;for(a in this.container.destinations)if(void 0===this.container.destinations[a].children[0])return!0;return!1},e.prototype.returnElementToSource=function(a){a.x=a.sourceX,a.y=a.sourceY,this.container.source.addChild(a)},e.prototype.addElementsToSourceRandomly=function(){var a,b=new d,c=b.randomIndexesArray(this.container.elements.length);for(a in c)this.container.source.addElement(this.container.elements[c[a]]),this.container.elements[c[a]].sourceX=this.container.elements[c[a]].x,this.container.elements[c[a]].sourceY=this.container.elements[c[a]].y},b.exports=e},{"../../util/Utilities":63}],17:[function(a,b,c){var d=a("../../util/PopUp"),e=a("../../util/GridLayoutPanel"),f=a("./MenuItem"),g=a("../WordUnscramble"),h=a("../ContextGroups"),i=a("../ImageWordMatch"),j=function(){d.call(this,"popUpBg",null,"English Challenges");var a={numberOfRows:2,numberOfColumns:4};this.panel=new e("popUpPanelBg",a),this.panel.x=20,this.panel.y=80,this.addChild(this.panel),this.createGames()};j.prototype=Object.create(d.prototype),j.prototype.constructor=j,j.prototype.createGames=function(){var a=[];a.push(new g),"levelTwo"===localStorage.getItem("level")&&a.push(new i),"levelThree"===localStorage.getItem("level")&&(a.push(new i),a.push(new h));var b;for(b in a)this.panel.addElement(new f(a[b],this)),level.game.add.existing(a[b])},b.exports=j},{"../../util/GridLayoutPanel":54,"../../util/PopUp":61,"../ContextGroups":11,"../ImageWordMatch":13,"../WordUnscramble":14,"./MenuItem":18}],18:[function(a,b,c){var d=a("../../items/ItemGroupView"),e=function(a,b){d.call(this,a.englishChallenge.iconKey,"Play",b),this.challenge=a,this.updateScoreText(),this.setTitle(a.englishChallenge.name),this.setDescription(a.englishChallenge.description)};e.prototype=Object.create(d.prototype),e.prototype.constructor=e,e.prototype.buttonAction=function(){this.parentView.close(),this.challenge.newChallenge(),this.challenge.open()},e.prototype.updateScoreText=function(){this.setAuxText("+ $"+this.challenge.englishChallenge.score)},b.exports=e},{"../../items/ItemGroupView":21}],19:[function(a,b,c){var d=a("./Item"),e=2,f=100,g=function(a,b,c){d.call(this,a,b,"healthPack"+c,c*e),this.body.gravity.y=f,this.maxIncreasing=c,this.name="Health Pack",this.description="Increasing: + "+c+"\n Health Level",this.category="healthPacks"};g.prototype=Object.create(d.prototype),g.prototype.constructor=g,g.prototype.pickUp=function(){this.kill()},g.prototype.use=function(){this.alive||this.revive(),this.x=level.player.x,this.y=10,level.addHealthPack(this)},b.exports=g},{"./Item":20}],20:[function(a,b,c){var d=.7+.2*Math.random(),e=function(a,b,c,e){Phaser.Sprite.call(this,level.game,a,b,c),this.anchor.set(0,1),level.game.physics.arcade.enable(this),this.body.bounce.y=d,this.body.collideWorldBounds=!0,this.price=e,this.name="",this.description=""};e.prototype=Object.create(Phaser.Sprite.prototype),e.prototype.constructor=e,e.prototype.setDescription=function(a){this.description=a},e.prototype.setName=function(a){this.name=a},b.exports=e},{}],21:[function(a,b,c){var d=a("../util/VerticalLayoutPanel"),e=a("../util/Button"),f=function(a,b,c){d.call(this,"itemGroupBg",2),this.icon=level.game.make.sprite(0,0,a);var f=50/this.icon.height;this.icon.scale.x=f,this.icon.scale.y=f,this.auxText=level.game.make.text(this.width-20,this.height/2,""),this.auxText.font=level.font,this.auxText.fontSize=20,this.auxText.fill="#FFF12B",this.auxText.stroke="#7d655f",this.auxText.strokeThickness=2,this.auxText.setShadow(1,1,"rgba(0,0,0,0.5)",5),this.auxText.anchor.set(1,.8),this.title=level.game.make.text(0,0,"Title"),this.title.font=level.font,this.title.fontSize=20,this.title.fill="#473e2c",this.description=level.game.make.text(0,0,"Des 1 \n Des 2"),this.description.font=level.font,this.description.fontSize=12,this.description.fill="#000000",this.description.align="center",this.button=new e(b,this.buttonAction,this),this.addElement(this.title),this.addElement(this.icon),this.addChild(this.auxText),this.addElement(this.description),this.addElement(this.button),this.parentView=c};f.prototype=Object.create(d.prototype),f.prototype.constructor=f,f.prototype.buttonAction=function(){},f.prototype.setDescription=function(a){this.description.text=a,this.description.x=this.width/2-this.description.width/2},f.prototype.setTitle=function(a){this.title.text=a,this.title.x=this.width/2-this.title.width/2},f.prototype.setAuxText=function(a){this.auxText.text=a},b.exports=f},{"../util/Button":51,"../util/VerticalLayoutPanel":65}],22:[function(a,b,c){var d=a("../util/PopUp"),e=a("../util/GridLayoutPanel"),f=a("../util/Button"),g=function(a,b,c,g,h){d.call(this,"popUpBg",null,c),this.items=[];var i,j,k=20;for(i=0;i<a.length;i++)j=new f(a[i],this.showTab,this,"tabBg"),j.category=b[i],j.x=k,j.y=60,k+=j.width+2,this.addChild(j),this.items[b[i]]=[];var l={numberOfColumns:g||4,numberOfRows:h||2};this.panel=new e("popUpPanelBg",l),this.panel.x=20,this.panel.y=100,this.firstCategory=b[0],this.addChild(this.panel)};g.prototype=Object.create(d.prototype),g.prototype.constructor=g,g.prototype.showTab=function(a){var b;for(b in this.panel.children)this.panel.children[b].kill();this.panel.removeAllElements(),this.fillPanel(a.category)},g.prototype.fillPanel=function(a){var b;for(b in this.items[a])this.items[a][b].alive||this.items[a][b].revive(),this.panel.addElement(this.items[a][b])},g.prototype.open=function(){this.panel.removeAllElements(),this.fillPanel(this.firstCategory),d.prototype.open.call(this)},b.exports=g},{"../util/Button":51,"../util/GridLayoutPanel":54,"../util/PopUp":61}],23:[function(a,b,c){var d=a("../ItemsPopUp"),e=a("./InventoryItem"),f=a("../HealthPack"),g=a("../weapons/Revolver"),h=a("../weapons/MachineGun"),i=a("../../util/Button"),j=function(){var a=["Weapons","Health Packs","Vehicles"],b=["weapons","healthPacks","transport"];d.call(this,a,b,"Inventory"),this.button=new i("Add Items",level.store.open,level.store),this.button.x=this.width-140,this.button.y=60,this.addChild(this.button),this.loadInventory()};j.prototype=Object.create(d.prototype),j.prototype.constructor=j,j.prototype.addItem=function(a){void 0===this.items[a.category][a.key]&&(this.items[a.category][a.key]=new e(a,this)),this.items[a.category][a.key].amountAvailable++,this.items[a.category][a.key].updateAmountAvailableText(),localStorage.setItem(a.key+"Item",this.items[a.category][a.key].amountAvailable)},j.prototype.loadItem=function(a){this.items[a.category][a.key]=new e(a,this),this.items[a.category][a.key].amountAvailable=localStorage.getItem(a.key+"Item"),this.items[a.category][a.key].updateAmountAvailableText()},j.prototype.loadInventory=function(){var a;null!==localStorage.getItem("revolverItem")&&(a=new g(0,0,!1),this.loadItem(a)),null!==localStorage.getItem("machineGunItem")&&(a=new h(0,0,!1),this.loadItem(a));var b,c,d=[5,20,50];for(b in d)c="healthPack"+d[b]+"Item",null!==localStorage.getItem(c)&&(a=new f(0,0,5),this.loadItem(a));var e=["car","jeep","bus","truck","taxi","ambulance"];for(b in e)null!==localStorage.getItem(e[b]+"Item")&&(a=level.createInteractiveCar(e[b]),this.loadItem(a))},b.exports=j},{"../../util/Button":51,"../HealthPack":19,"../ItemsPopUp":22,"../weapons/MachineGun":34,"../weapons/Revolver":35,"./InventoryItem":24}],24:[function(a,b,c){var d=a("../ItemGroupView"),e=function(a,b){d.call(this,a.key,"Use",b),this.item=a,this.amountAvailable=0,this.updateAmountAvailableText(),this.setTitle(this.item.name),this.setDescription(this.item.description)};e.prototype=Object.create(d.prototype),e.prototype.constructor=e,e.prototype.buttonAction=function(){this.amountAvailable>0?(this.item.use(),this.amountAvailable--,localStorage.setItem(this.item.key+"Item",this.amountAvailable),this.updateAmountAvailableText(),this.parentView.close()):level.showErrorMessage("You do not have more of this item.",this.parent)},e.prototype.updateAmountAvailableText=function(){this.setAuxText("x "+this.amountAvailable)},b.exports=e},{"../ItemGroupView":21}],25:[function(a,b,c){var d=a("../ItemsPopUp"),e=a("./StoreItem"),f=a("../HealthPack"),g=a("../weapons/Revolver"),h=a("../weapons/MachineGun"),i=function(){var a=["Weapons","Health Packs","Vehicles"],b=["weapons","healthPacks","transport"];d.call(this,a,b,"Store");var c=level.game.make.sprite(this.width-190,60,"money"),e=30/c.height;c.scale.x=e,c.scale.y=e,c.anchor.set(1,0),this.addChild(c),this.cash=level.game.make.text(this.width-180,60,"Money: $ "+level.player.score),this.cash.font=level.font,this.cash.fontSize=20,this.cash.fill="#FFFFFF",this.cash.stroke="#000",this.cash.strokeThickness=3,this.addChild(this.cash),this.createItems()};i.prototype=Object.create(d.prototype),i.prototype.constructor=i,i.prototype.addItem=function(a){void 0===this.items[a.category][a.key]&&(this.items[a.category][a.key]=new e(a,this))},i.prototype.updateMoney=function(){level.updateScoreText(),this.cash.text="Money: $ "+level.player.score},i.prototype.createItems=function(){var a=new g(0,0,!1);this.addItem(a);var b=new h(0,0,!1);this.addItem(b);var c=new f(0,0,5);this.addItem(c),c=new f(0,0,20),this.addItem(c),c=new f(0,0,50),this.addItem(c);var d,e=["car","jeep","bus","truck","taxi","ambulance"];for(d in e)this.addItem(level.createInteractiveCar(e[d]))},b.exports=i},{"../HealthPack":19,"../ItemsPopUp":22,"../weapons/MachineGun":34,"../weapons/Revolver":35,"./StoreItem":26}],26:[function(a,b,c){var d=a("../ItemGroupView"),e=function(a,b){d.call(this,a.key,"Buy",b),this.item=a,this.updatePriceText(),this.setTitle(this.item.name),this.setDescription(this.item.description)};e.prototype=Object.create(d.prototype),e.prototype.constructor=e,e.prototype.updatePriceText=function(){this.setAuxText("$ "+this.item.price)},e.prototype.buttonAction=function(){var a=level.player.buyItem(this.item);a?(level.inventory.addItem(this.item),level.showSuccessMessage("Successful Purchase!",this.parent),this.parentView.updateMoney()):level.showErrorMessage("You do not have enough money.",this.parent)},b.exports=e},{"../ItemGroupView":21}],27:[function(a,b,c){var d=a("./VocabularyItem"),e=function(a,b,c,e){d.call(this,a,b,c);var f=30/this.height;this.scale.y=f,this.scale.x=f,this.interactionManager=e};e.prototype=Object.create(d.prototype),e.prototype.constructor=e,e.prototype.pickUp=function(){this.kill(),this.interactionManager.openDialogs()},e.prototype.openActivity=function(){this.interactionManager.openDialogs()},b.exports=e},{"./VocabularyItem":29}],28:[function(a,b,c){var d=a("./VocabularyItem"),e=a("../../util/ResourceBar"),f=a("../../util/Button"),g=3e4,h=100,i=10,j=function(a,b,c,g,j,k){d.call(this,a,b,c,!1,g),level.game.physics.arcade.enable(this),this.body.collideWorldBounds=!0,this.anchor.set(.5,1),this.animations.add("left",[0],10,!0),this.animations.add("right",[1],10,!0),this.occupied=!1,this.stopLeftFrameIndex=0,this.stopRightFrameIndex=1,this.remainingGas=k,this.gasoline=k,this.speed=j,this.maxSpeed=1.5*j,this.description="Speed: "+this.speed+"\nGasoline: "+this.gasoline,this.category="transport",this.gasBar=new e(-(this.width-h)/2,-this.height-30,{width:h,height:i}),this.gasBar.visible=!1,this.addChild(this.gasBar),this.getOnButton=new f("Get on",this.getOn,this),this.getOnButton.x=-(this.width-this.getOnButton.width)/2,this.getOnButton.y=-this.height,this.addChild(this.getOnButton)};j.prototype=Object.create(d.prototype),j.prototype.constructor=j,j.prototype.getOn=function(){this.remainingGas>0&&(level.myVocabulary.addItem(this),this.gasBar.visible=!0,this.getOnButton.visible=!1,level.player.onVehicle=!0,level.player.relocate(this.x,this.y-100),level.player.changeSpeed(this.speed,this.maxSpeed),level.player.changeGravity(g),this.occupied=!0)},j.prototype.getOff=function(){this.stop(),level.player.onVehicle=!1,level.player.relocate(this.x+100,this.y-100),level.player.resetSpeed(),level.player.resetGravity(),this.occupied=!1},j.prototype.update=function(){this.occupied&&(this.body.velocity.x=level.player.body.velocity.x,this.body.velocity.x<0?(this.animations.play("left"),this.remainingGas--):this.body.velocity.x>0?(this.animations.play("right"),this.remainingGas--):level.direction>0?this.frame=this.stopRightFrameIndex:level.direction<0&&(this.frame=this.stopLeftFrameIndex),
this.remainingGas<=0&&this.getOff(),this.gasBar.updateResourceBarLevel(this.remainingGas/this.gasoline))},j.prototype.isStopped=function(){return 0===this.body.velocity.x},j.prototype.stop=function(){this.body.velocity.x=0},j.prototype.use=function(){this.alive||this.revive(),this.x=level.player.x+50,this.y=level.GROUND_HEIGHT,level.addCar(this)},b.exports=j},{"../../util/Button":51,"../../util/ResourceBar":62,"./VocabularyItem":29}],29:[function(a,b,c){var d=a("./../Item"),e=a("../../util/VerticalLayoutPopUp"),f=function(a,b,c,e,f){d.call(this,a,b,c,f||0),this.setProperties(c),this.makeDialog(),this.openImmediately=e||!1};f.prototype=Object.create(d.prototype),f.prototype.constructor=f,f.prototype.show=function(){this.popUp.open()},f.prototype.makeDialog=function(){this.popUp=new e("mediumPopUpBg",null,this.name);var a=level.game.make.sprite(0,0,this.key);if(a.height>200){var b=200/a.height;a.scale.x=b,a.scale.y=b}var c=level.game.make.text(0,0,this.definition);c.font=level.font,c.fontSize=20,c.fill="#000000",c.align="center",this.popUp.addElement(a),this.popUp.addElement(c),level.game.add.existing(this.popUp)},f.prototype.setProperties=function(a){switch(a){case"factory":this.name="Old Factory",this.definition="A building or group of buildings\nwhere products are made",this.categoryIndex=0;break;case"school":this.name="School",this.definition="A place for education; a place where\npeople go to learn",this.categoryIndex=0;break;case"hospital":this.name="Hospital",this.definition="A place where sick or injured people\nare given medical care",this.categoryIndex=0;break;case"coffeeShop":this.name="Coffee Shop",this.definition="A small restaurant that serves coffee and\nother drinks as well as simple foods",this.categoryIndex=0;break;case"bank":this.name="Bank",this.definition="An organization that keeps and lends money",this.categoryIndex=0;break;case"zoo":this.name="Zoo",this.definition="A place where many kinds of animals are \nkept so that people can see them",this.categoryIndex=0;break;case"gasStation":this.name="Gas Station",this.definition="A place where gasoline for vehicles is sold",this.categoryIndex=0;break;case"playground":this.name="Playground",this.definition="An outdoor area where children can play",this.categoryIndex=0;break;case"bookStore":this.name="Bookstore",this.definition="A store that sells books",this.categoryIndex=0;break;case"hotel":this.name="Hotel",this.definition="A place that has rooms in which people\ncan stay especially when they are traveling",this.categoryIndex=0;break;case"superMarket":this.name="Super Market",this.definition="A store where customers can buy a variety\nof foods and usually household items",this.categoryIndex=0;break;case"fireStation":this.name="Fire Station",this.definition="A building in which the members of a fire\n department and the equipment used to\nput out fires are located",this.categoryIndex=0;break;case"policeStation":this.name="Police Station",this.definition="A place where local \n police officers work",this.categoryIndex=0;break;case"blueHouse":this.name="House",this.definition="A building in which a family lives",this.categoryIndex=0;break;case"store":this.name="Store",this.definition="A building or room where things are sold",this.categoryIndex=0;break;case"child":this.name="Child",this.definition="A young person; a son or daughter",this.categoryIndex=1;break;case"daughter":this.name="Daughter",this.definition="A female child",this.categoryIndex=1;break;case"family":this.name="Family",this.definition="A group of people who are related to each other",this.categoryIndex=1;break;case"father":this.name="Father",this.definition="A male parent",this.categoryIndex=1;break;case"friend":this.name="Friend",this.definition="A person who you like and enjoy being with",this.categoryIndex=1;break;case"husband":this.name="Husband",this.definition="A married man; the man someone is married to",this.categoryIndex=1;break;case"kid":this.name="Kid",this.definition="A son or daughter; a young person",this.categoryIndex=1;break;case"mother":this.name="Mother",this.definition="A female parent",this.categoryIndex=1;break;case"parent":this.name="Parent",this.definition="A person who is a father or mother; \na person who has a child",this.categoryIndex=1;break;case"son":this.name="Son",this.definition="A male child",this.categoryIndex=1;break;case"wife":this.name="Wife",this.definition="A married woman; the woman someone is married to",this.categoryIndex=1;break;case"car":this.name="Car",this.definition="A vehicle that has four wheels and an engineand \nthat is used for carrying passengers on roads",this.categoryIndex=2;break;case"jeep":this.name="Jeep",this.definition="Used for a small truck that can be driven over\nvery rough surfaces",this.categoryIndex=2;break;case"bus":this.name="Bus",this.definition="A large vehicle that is used for carryingpassengers \nespecially along a particular route at particular times",this.categoryIndex=2;break;case"truck":this.name="Truck",this.definition="A very large, heavy vehicle that is used to move mlarge or numerous objects",this.categoryIndex=2;break;case"taxi":this.name="Taxi",this.definition="A car that carries passengers to a place for an \namount of money that is based on the distance \ntravelled",this.categoryIndex=2;break;case"ambulance":this.name="Ambulance",this.definition="A vehicle used for taking hurt or sick people to \nthe hospital especially in emergencies",this.categoryIndex=2;break;case"bracelet":this.name="Bracelet",this.definition="A piece of jewelry worn on the wrist",this.categoryIndex=3;break;case"cap":this.name="Cap",this.definition="A small, soft hat that often has a hard curved part \n(called a visor) that extends out over your eyes",this.categoryIndex=3;break;case"ring":this.name="Ring",this.definition="A piece of jewelry that is worn usually on a finger",this.categoryIndex=3;break;case"necklace":this.name="Necklace",this.definition="A piece of jewelry that is worn around your neck",this.categoryIndex=3;break;case"watch":this.name="Watch",this.definition="A pair of glass or plastic lenses set into a \nframe and worn over the eyes to help a person see",this.categoryIndex=3;break;case"glasses":this.name="Glasses",this.definition="A hard usually transparent material that is \nused for making windows and other products",this.categoryIndex=3}},b.exports=f},{"../../util/VerticalLayoutPopUp":66,"./../Item":20}],30:[function(a,b,c){var d=a("./VocabularyItem"),e=function(a,b,c){d.call(this,a,b,c)};e.prototype=Object.create(d.prototype),e.prototype.constructor=e,e.prototype.pickUp=function(){level.vocabularyItems.remove(this),level.addObject(this)},b.exports=e},{"./VocabularyItem":29}],31:[function(a,b,c){var d=a("../ItemsPopUp"),e=a("./MyVocabularyItem"),f=a("../../util/Utilities"),g=a("../vocabularyItems/VocabularyItem"),h=function(){this.categoriesLabels=["Places","Family","Transport","Personal Items"],this.categories=["places","family","transport","personalItems"],d.call(this,this.categoriesLabels,this.categories,"Vocabulary",5,3),this.loadVocabulary()};h.prototype=Object.create(d.prototype),h.prototype.constructor=h,h.prototype.addItem=function(a){var b=this.categories[a.categoryIndex];void 0===this.items[b][a.key]&&(this.items[b][a.key]=new e(a,this),this.items[b].length++,localStorage.setItem(a.key+"Voc",0))},h.prototype.loadItem=function(a,b){var c=this.categories[a.categoryIndex];this.items[c][a.key]=new e(a,this,b),this.items[c].length++},h.prototype.markAsLearned=function(a){var b=this.categories[a.categoryIndex];this.items[b][a.key].addLearnedIcon(),localStorage.setItem(a.key+"Voc",1)},h.prototype.randomVocabularyItems=function(a){var b,c,d,e=new f,g=this.randomCategory(a),h=e.randomIndexesArray(this.items[g].length),i=[];for(b=0;a>b;b++){d=0;for(c in this.items[g]){if(d===h[b]){i.push(this.items[g][c].item);break}d++}}return i},h.prototype.randomCategory=function(a){for(var b,c,d=!0;d;)b=level.game.rnd.integerInRange(0,this.categories.length-1),c=this.categories[b],this.items[c].length>=a&&(d=!1);return c},h.prototype.loadVocabulary=function(){var a,b,c,d=["factory","school","hospital","coffeeShop","bank","zoo","gasStation","playground","bookStore","hotel","superMarket","fireStation","policeStation","blueHouse","store","child","daughter","family","father","friend","husband","kid","mother","parent","son","wife","car","jeep","bus","truck","taxi","ambulance","bracelet","cap","ring","necklace","watch","glasses"];for(a in d)null!==localStorage.getItem(d[a]+"Voc")&&(c=!1,b=new g(0,0,d[a]),1===parseInt(localStorage.getItem(d[a]+"Voc"))&&(c=!0),this.loadItem(b,c))},b.exports=h},{"../../util/Utilities":63,"../ItemsPopUp":22,"../vocabularyItems/VocabularyItem":29,"./MyVocabularyItem":32}],32:[function(a,b,c){var d=a("../../util/VerticalLayoutPanel"),e=a("../../util/Button"),f=function(a,b,c){d.call(this,"myVocabularyItemBg",4),this.item=a,this.icon=level.game.make.sprite(0,0,this.item.key);var f=45/this.icon.height;this.icon.scale.x=f,this.icon.scale.y=f,this.title=level.game.make.text(0,0,this.item.name),this.title.font=level.font,this.title.fontSize=15,this.title.fill="#473e2c",this.button=new e("Show",this.buttonAction,this),this.addElement(this.title),this.addElement(this.icon),this.addElement(this.button),this.parentView=b,this.learned=c||!1,this.learned&&this.addLearnedIcon()};f.prototype=Object.create(d.prototype),f.prototype.constructor=f,f.prototype.buttonAction=function(){this.item.show()},f.prototype.addLearnedIcon=function(){var a=level.game.make.sprite(this.width-20,this.height/2,"learned");a.anchor.set(1,.8),this.addChild(a)},b.exports=f},{"../../util/Button":51,"../../util/VerticalLayoutPanel":65}],33:[function(a,b,c){var d=function(a,b){Phaser.Sprite.call(this,level.game,0,0,b),this.power=a,level.game.physics.arcade.enable(this),this.anchor.setTo(0,.5),this.checkWorldBounds=!0,this.outOfBoundsKill=!0,this.exists=!1};d.prototype=Object.create(Phaser.Sprite.prototype),d.prototype.constructor=d,b.exports=d},{}],34:[function(a,b,c){var d=a("./Weapon"),e=30,f="machineGun",g="bullet2",h=1,i=400,j=200,k=2,l=30,m=function(a,b,c){d.call(this,a,b,e,f,g,h,i,j,k,c,l),this.name="Machine Gun"};m.prototype=Object.create(d.prototype),m.prototype.constructor=m,b.exports=m},{"./Weapon":36}],35:[function(a,b,c){var d=a("./Weapon"),e=20,f="revolver",g="bullet1",h=1,i=300,j=250,k=1,l=20,m=function(a,b,c){d.call(this,a,b,e,f,g,h,i,j,k,c,l),this.name="Revolver"};m.prototype=Object.create(d.prototype),m.prototype.constructor=m,b.exports=m},{"./Weapon":36}],36:[function(a,b,c){var d=a("../Item"),e=a("./Bullet"),f=0,g=1,h=function(a,b,c,f,g,h,i,j,k,l,m){d.call(this,a,b,f,m),this.anchor.set(.5,0),this.numberOfBullets=c,this.power=k,this.bullets=level.game.add.group();for(var n=0;n<this.numberOfBullets;n++)this.bullets.add(new e(k,g));this.nextFire=h,this.bulletSpeed=i,this.fireRate=j,this.infinite=l,this.description="Damage: "+this.power+"\nAmmunition: "+this.numberOfBullets,this.category="weapons"};h.prototype=Object.create(d.prototype),h.prototype.constructor=h,h.prototype.fire=function(a,b){var c=b||this.y;level.game.time.time>this.nextFire&&(this.infinite||this.numberOfBullets>0)&&(this.currentBullet=this.bullets.getFirstExists(!1),this.currentBullet&&(this.currentBullet.reset(this.x,this.y),this.currentBullet.rotation=level.game.physics.arcade.angleToXY(this.currentBullet,a,c),this.currentBullet.body.velocity.x=Math.cos(this.currentBullet.rotation)*this.bulletSpeed,this.currentBullet.body.velocity.y=Math.sin(this.currentBullet.rotation)*this.bulletSpeed,this.nextFire=level.game.time.time+this.fireRate,this.numberOfBullets--))},h.prototype.updateCoordinates=function(a,b){this.x=a,this.y=b},h.prototype.use=function(){this.alive||this.revive(),level.player.useWeapon(this),level.updateAmmoText()},h.prototype.addBullets=function(a){this.numberOfBullets+=a},h.prototype.killWeapon=function(){this.bullets.removeAll(),this.kill()},h.prototype.pointToRight=function(){this.frame=f},h.prototype.pointToLeft=function(){this.frame=g},h.prototype.saveWeapon=function(){localStorage.setItem(this.key,this.numberOfBullets)},b.exports=h},{"../Item":20,"./Bullet":33}],37:[function(a,b,c){var d=new Phaser.Game(1e3,500,Phaser.AUTO,"WOPIC"),e=a("./states/Boot"),f=a("./states/Preloader"),g=a("./states/Menu"),h=a("./states/levels/Intro"),i=a("./states/levels/LevelOne"),j=a("./states/levels/LevelTwo"),k=a("./states/levels/LevelThree");d.state.add("boot",e),d.state.add("preloader",f),d.state.add("menu",g),d.state.add("levelOne",i),d.state.add("levelTwo",j),d.state.add("levelThree",k),d.state.add("intro",h),d.state.start("boot")},{"./states/Boot":38,"./states/Menu":39,"./states/Preloader":40,"./states/levels/Intro":42,"./states/levels/LevelOne":44,"./states/levels/LevelThree":45,"./states/levels/LevelTwo":46}],38:[function(a,b,c){var d=function(a){};d.prototype.preload=function(){this.load.image("loading","assets/images/loading.png"),this.load.image("load_progress_bar_dark","assets/images/progress_bar_bg.png"),this.load.image("load_progress_bar","assets/images/progress_bar_fg.png")},d.prototype.create=function(){this.game.input.maxPointers=1,this.game.state.start("preloader")},b.exports=d},{}],39:[function(a,b,c){var d=a("../util/Button"),e=function(a){};e.prototype.create=function(){this.game.stage.backgroundColor="#000";var a=this.game.camera.width/2,b=this.game.camera.height/2,c=new d("New Game",this.newGame,this);c.x=a-c.width/2,c.y=b-c.height,this.game.add.existing(c),null!==localStorage.getItem("level")&&(c=new d("Continue Playing",this.continuePlaying,this),c.x=a-c.width/2,c.y=b+c.height,this.game.add.existing(c))},e.prototype.newGame=function(){localStorage.clear(),this.game.state.start("intro")},e.prototype.continuePlaying=function(){this.game.state.start(localStorage.getItem("level"))},b.exports=e},{"../util/Button":51}],40:[function(a,b,c){var d=function(a){this.ready=!1};d.prototype.preload=function(){this.displayLoadScreen(),this.loadAssets()},d.prototype.displayLoadScreen=function(){var a=this.game.camera.width/2,b=this.game.camera.height/2;this.loading=this.game.add.sprite(a,b-20,"loading"),this.loading.anchor.setTo(.5,.5),this.barBg=this.game.add.sprite(a,b+40,"load_progress_bar_dark"),this.barBg.anchor.setTo(.5,.5),this.bar=this.game.add.sprite(a-192,b+40,"load_progress_bar"),this.bar.anchor.setTo(0,.5),this.load.setPreloadSprite(this.bar),this.load.onLoadComplete.addOnce(this.onLoadComplete,this)},d.prototype.loadAssets=function(){this.game.load.image("worldBg","assets/images/worldBg.png"),this.game.load.image("ground","assets/images/platform.png"),this.game.load.image("healthPack5","assets/images/healthPack5.png"),this.game.load.image("healthPack20","assets/images/healthPack20.png"),this.game.load.image("healthPack50","assets/images/healthPack50.png"),this.game.load.image("inventory_button","assets/images/inventory.png"),this.game.load.image("storeButton","assets/images/store.png"),this.game.load.image("store","assets/images/storeBig.png"),this.game.load.image("popUpBg","assets/images/popUpBg.png"),this.game.load.image("close","assets/images/close.png"),this.game.load.image("itemGroupBg","assets/images/itemGroupBg.png"),this.game.load.image("myVocabularyItemBg","assets/images/myVocabularyItemBg.png"),this.game.load.image("dialogBg","assets/images/dialogBg.png"),this.game.load.image("errorIcon","assets/images/errorIcon.png"),this.game.load.image("successIcon","assets/images/successIcon.png"),this.game.load.spritesheet("character","assets/sprites/character.png",64,96),this.game.load.spritesheet("wife","assets/sprites/wife.png",64,96),this.game.load.spritesheet("npc","assets/sprites/npc.png",64,96),this.game.load.spritesheet("friend","assets/sprites/npc.png",64,96),this.game.load.spritesheet("daughter","assets/sprites/daughter.png",40,60),this.game.load.spritesheet("son","assets/sprites/son.png",40,60),this.game.load.spritesheet("simple_enemy","assets/sprites/simple_enemy.png",64,64),this.game.load.spritesheet("strong_enemy","assets/sprites/strong_enemy.png",64,64),this.game.load.spritesheet("strongestEnemy","assets/sprites/strongestEnemy.png",80,80),this.game.load.spritesheet("jeep","assets/sprites/jeep.png",219.5,150),this.game.load.spritesheet("bus","assets/sprites/bus.png",400,180),this.game.load.spritesheet("taxi","assets/sprites/taxi.png",215,100),this.game.load.spritesheet("truck","assets/sprites/truck.png",400,239),this.game.load.spritesheet("car","assets/sprites/car.png",237,100),this.game.load.spritesheet("ambulance","assets/sprites/ambulance.png",300,144),this.game.load.spritesheet("revolver","assets/sprites/revolver.png",30,16),this.game.load.spritesheet("machineGun","assets/sprites/machineGun.png",60,42);var a;for(a=1;2>=a;a++)this.game.load.image("bullet"+a,"assets/images/bullet"+a+".png");this.game.load.image("simpleWeapon","assets/images/revolver.png"),this.game.load.image("strongWeapon","assets/images/machineGun.png"),this.game.load.image("house","assets/images/house.png"),this.game.load.image("openDoor","assets/images/openDoor.png"),this.game.load.image("working","assets/images/working.png"),this.game.load.image("addCashButton","assets/images/addCash.png"),this.game.load.image("myVocabularyButton","assets/images/myVocabulary.png"),this.game.load.image("button","assets/images/button.png"),this.game.load.image("iconButton","assets/images/iconButton.png"),this.game.load.image("toolsBar","assets/images/toolsBar.png"),this.game.load.image("lettersBg","assets/images/lettersBg.png"),this.game.load.image("wordsBg","assets/images/wordsBg.png"),this.game.load.image("wordBg","assets/images/wordBg.png"),this.game.load.image("spaceBg","assets/images/spaceBg.png"),this.game.load.image("letterBg","assets/images/letterBg.png"),this.game.load.image("transparent","assets/images/transparent.png"),this.game.load.image("healthBarBackground","assets/images/healthBarBackground.png"),this.game.load.image("healthBar","assets/images/healthBar.png"),this.game.load.image("healthPack5Icon","assets/icons/healthPack5Icon.png"),this.game.load.image("healthPack20Icon","assets/icons/healthPack20Icon.png"),this.game.load.image("revolverIcon","assets/icons/revolverIcon.png"),this.game.load.image("machineGunIcon","assets/icons/machineGunIcon.png"),this.game.load.image("unscramble","assets/icons/unscramble.png"),this.game.load.image("contexts","assets/icons/contexts.png"),this.game.load.image("imageWord","assets/icons/imageWord.png"),this.game.load.image("health","assets/icons/health.png"),this.game.load.image("ammo","assets/icons/ammo.png"),this.game.load.image("money","assets/icons/money.png"),this.game.load.image("learned","assets/icons/learned.png"),this.game.load.image("popUpPanelBg","assets/images/popUpPanelBg.png"),this.game.load.image("tabBg","assets/images/tabBg.png"),this.game.load.image("contextBg","assets/images/contextBg.png"),this.game.load.image("englishChallengePanelBg","assets/images/englishChallengePanelBg.png"),this.game.load.image("imageWordBg","assets/images/imageWordBg.png"),this.game.load.image("forgive","assets/images/vocabulary/forgive.png"),this.game.load.image("bookStore","assets/images/vocabulary/bookStore.png"),this.game.load.image("playground","assets/images/vocabulary/playground.png"),this.game.load.image("zoo","assets/images/vocabulary/zoo.png"),this.game.load.image("gasStation","assets/images/vocabulary/gasStation.png"),this.game.load.image("bank","assets/images/vocabulary/bank.png"),this.game.load.image("coffeeShop","assets/images/vocabulary/coffeeShop.png"),this.game.load.image("hospital","assets/images/vocabulary/hospital.png"),this.game.load.image("school","assets/images/vocabulary/school.png"),this.game.load.image("factory","assets/images/vocabulary/factory.png"),this.game.load.image("fireStation","assets/images/vocabulary/fireStation.png"),this.game.load.image("policeStation","assets/images/vocabulary/policeStation.png"),this.game.load.image("hotel","assets/images/vocabulary/hotel.png"),this.game.load.image("superMarket","assets/images/vocabulary/superMarket.png"),this.game.load.image("trees","assets/images/trees.png"),this.game.load.image("surrender","assets/images/surrender.png"),this.game.load.image("orangeHouse","assets/images/vocabulary/orangeHouse.png"),this.game.load.image("greenHouse","assets/images/vocabulary/greenHouse.png"),this.game.load.image("whiteHouse","assets/images/vocabulary/whiteHouse.png"),this.game.load.image("yellowHouse","assets/images/vocabulary/yellowHouse.png"),this.game.load.image("redHouse","assets/images/vocabulary/redHouse.png"),this.game.load.image("blueHouse","assets/images/vocabulary/blueHouse.png"),this.game.load.image("nameBoard","assets/images/vocabulary/nameBoard.png"),this.game.load.image("necklace","assets/images/vocabulary/necklace.png"),this.game.load.image("glasses","assets/images/vocabulary/glasses.png"),this.game.load.image("watch","assets/images/vocabulary/watch.png"),this.game.load.image("ring","assets/images/vocabulary/ring.png"),this.game.load.image("cap","assets/images/vocabulary/cap.png"),this.game.load.image("bracelet","assets/images/vocabulary/bracelet.png"),this.game.load.image("family","assets/images/vocabulary/family.png"),this.game.load.image("mother","assets/images/vocabulary/mother.png"),this.game.load.image("father","assets/images/vocabulary/father.png"),this.game.load.image("husband","assets/images/vocabulary/father.png"),this.game.load.image("child","assets/images/vocabulary/child.png"),this.game.load.image("kid","assets/images/vocabulary/child.png"),this.game.load.image("parent","assets/images/vocabulary/parent.png"),this.game.load.image("comicBg","assets/images/comics/comicBg.png");var b;for(a=1;7>=a;a++)b="intro"+a,this.game.load.image(b,"assets/images/comics/"+b+".png");this.game.load.image("mediumPopUpBg","assets/images/mediumPopUpBg.png"),this.game.load.image("emptyRoom","assets/images/emptyRoom.png")},d.prototype.update=function(){this.ready&&(this.game.state.start("menu"),level=this.game.state.states.levelOne)},d.prototype.onLoadComplete=function(){this.ready=!0},b.exports=d},{}],41:[function(a,b,c){arguments[4][38][0].apply(c,arguments)},{dup:38}],42:[function(a,b,c){var d=a("../../util/Button"),e=8,f=7,g=300,h=function(a){};h.prototype.create=function(){var a=this.game.camera.width/2,b=this.game.camera.height/2;this.background=this.game.add.sprite(a,b-20,"comicBg"),this.background.anchor.set(.5,.7),this.changeComicImage("intro1"),this.currentImage=1;var c=new d("Continue",this["continue"],this);c.x=this.game.camera.width-150,c.y=this.game.camera.height-60,this.game.add.existing(c),this.game.time.events.repeat(Phaser.Timer.SECOND*e,f,this.updateComic,this),this.scripts=["Edward gets home","He parks his car and gets into his house","Now he wants to eat something","Then he finds a piece of paper","Someone kidnapped his family and he is now worried and angry","He will rescue his family, but that can be dangerous"],this.comicText=this.game.add.text(a,430,"",{font:"25px Arial",fill:"#FFF",align:"center",stroke:"#7d655f",strokeThickness:2}),this.comicText.anchor.set(.5,0),this.game.add.existing(this.comicText),this.showScript(0)},h.prototype["continue"]=function(){this.game.state.start("levelOne")},h.prototype.updateComic=function(){this.currentImage<f?(this.currentImage++,this.changeComicImage("intro"+this.currentImage),this.showScript(this.currentImage-1)):this["continue"]()},h.prototype.changeComicImage=function(a){var b=this.game.make.sprite(0,0,a);b.anchor.set(.5,.5),this.background.children.length>0&&this.background.removeChildren(),this.background.addChild(b)},h.prototype.showScript=function(a){this.wordIndex=0,this.comicText.text="",this.line=this.scripts[a].split(" "),this.game.time.events.repeat(g,this.line.length,this.nextWord,this)},h.prototype.nextWord=function(){this.comicText.text=this.comicText.text.concat(this.line[this.wordIndex]+" "),this.wordIndex++},b.exports=h},{"../../util/Button":51}],43:[function(a,b,c){var d=a("../../items/inventory/Inventory"),e=a("../../items/store/Store"),f=a("../../items/vocabulary/MyVocabulary"),g=a("../../items/HealthPack"),h=a("../../character/Player"),i=a("../../items/weapons/Revolver"),j=a("../../items/weapons/MachineGun"),k=a("../../character/SimpleEnemy"),l=a("../../character/StrongestEnemy"),m=a("../../character/StrongEnemy"),n=a("../../character/NPC"),o=(a("../../util/PopUp"),a("../../items/vocabularyItems/InteractiveCar")),p=a("../../util/Dialog"),q=a("../../englishChallenges/menu/EnglishChallengesMenu"),r=a("../../util/ResourceBar"),s=a("../../worldElements/NameBoard"),t=a("../../items/vocabularyItems/WorldItem"),u=(a("../../util/InteractionManager"),a("../../util/IconButton")),v=a("../../util/HorizontalLayoutPanel"),w=a("../../worldElements/InteractiveHouse"),x=a("../../items/vocabularyItems/ClueItem"),y=function(a){this.game=a};y.prototype.constructor=y,y.prototype.preload=function(){this.WORLD_WIDTH=8e3,this.WORLD_HEIGHT=500,this.GROUND_HEIGHT=this.WORLD_HEIGHT-100,this.font=level.font,level=this},y.prototype.create=function(){this.game.world.setBounds(0,0,this.WORLD_WIDTH,this.WORLD_HEIGHT),this.backgroundImage=this.game.add.tileSprite(0,0,this.WORLD_WIDTH,400,"worldBg"),this.game.physics.startSystem(Phaser.Physics.ARCADE),this.gameObjects=[],this.activePopUps=0,this.xDirection=1,this.addPlatforms(),this.createBackObjectsGroup(),this.createHealthPacksGroup(),this.createOtherItemsGroup(),this.createCarsGroup(),this.createNpcsGroup(),this.createEnemiesGroup(),this.addPlayer(),this.createWeaponsGroup(),this.addTexts(),this.addHealthBar(),this.addControls(),this.addCamera(),this.createStore(),this.createInventory(),this.createMyVocabulary(),this.createEnglishChallengesMenu(),this.updateHealthLevel(),this.createToolsBar()},y.prototype.updateEnemies=function(){var a;for(a=0;a<this.enemies.children.length;a++){var b=this.enemies.children[a];for(var c in b.weapons)this.game.physics.arcade.overlap(this.playerCharacters,b.weapons[c].bullets,this.bulletHitCharacter,null,this);var d=this.game.physics.arcade.distanceBetween(this.player,b);d<=b.rangeAttack?(b.stop(),b.fireToXY(this.player.x,this.player.y)):d<=b.rangeDetection&&(this.game.physics.arcade.moveToXY(b,this.player.x+b.rangeAttack,b.y),b.rotateWeapon(this.player.x,this.player.y))}},y.prototype.updateNpcs=function(){for(var a=0;a<this.npcs.children.length;a++){var b=this.npcs.children[a],c=this.game.physics.arcade.distanceBetween(this.player,b);c<=b.width&&(b.openDialogs(),this.player.x<b.x?this.player.x+=2*b.width:this.player.x-=2*b.width)}},y.prototype.update=function(){this.playerWins()&&(this.increaseScore(50),this.nextLevel()),this.updateEnemies(),this.updateNpcs(),this.game.physics.arcade.collide(this.gameObjects,this.platforms),this.game.physics.arcade.collide(this.player,this.enemies),this.game.physics.arcade.overlap(this.player,this.healthPacks,this.collectHealthPack,null,this),this.game.physics.arcade.overlap(this.player,this.weapons,this.collectWeapon,null,this),this.game.physics.arcade.overlap(this.cars,this.enemies,this.crashEnemy,null,this),this.game.physics.arcade.overlap(this.player,this.vocabularyItems,this.collectVocabularyItem,null,this);for(var a in this.player.weapons)this.game.physics.arcade.overlap(this.enemies,this.player.weapons[a].bullets,this.bulletHitCharacter,null,this);this.cursors.left.isDown?(this.xDirection=-1,this.game.input.keyboard.isDown(Phaser.Keyboard.X)?this.player.runLeft():this.player.moveLeft()):this.cursors.right.isDown?(this.xDirection=1,this.game.input.keyboard.isDown(Phaser.Keyboard.X)?this.player.runRight():this.player.moveRight()):this.player.stop(),this.cursors.up.isDown&&this.player.body.touching.down&&this.player.jump(),this.cursors.up.isDown&&this.player.body.touching.down,this.game.input.keyboard.isDown(Phaser.Keyboard.SPACEBAR)&&(this.player.fireToXY(this.player.x+100*this.xDirection),this.player.currentWeapon.saveWeapon(),this.updateAmmoText())},y.prototype.addHealthBar=function(){this.healthBar=new r(this.healthIcon.x+this.healthIcon.width+10,this.healthLevelText.y+2),this.addObject(this.healthBar),this.healthBar.fixedToCamera=!0},y.prototype.createBackObjectsGroup=function(){this.backObjects=this.game.add.group()},y.prototype.createEnemiesGroup=function(){this.enemies=this.game.add.group(),this.gameObjects.push(this.enemies)},y.prototype.createNpcsGroup=function(){this.npcs=this.game.add.group(),this.gameObjects.push(this.npcs)},y.prototype.createCarsGroup=function(){this.cars=this.game.add.group(),this.gameObjects.push(this.cars)},y.prototype.addSimpleEnemy=function(a){this.enemies.add(new k(a,this.GROUND_HEIGHT-100))},y.prototype.addStrongestEnemy=function(a){this.enemies.add(new l(a,this.GROUND_HEIGHT-100))},y.prototype.addStrongEnemy=function(a){this.enemies.add(new m(a,this.GROUND_HEIGHT-100))},y.prototype.addNPC=function(a,b,c){var d=new n(a,this.GROUND_HEIGHT-100,b,c);return this.npcs.add(d),d},y.prototype.addCar=function(a){this.cars.add(a)},y.prototype.addLevelCar=function(a,b){var c=this.createInteractiveCar(a);c.x=b,c.y=this.GROUND_HEIGHT,this.cars.add(c)},y.prototype.addInteractiveHouse=function(a,b,c){var d=new w(a,this.GROUND_HEIGHT,b,c);this.addVocabularyItem(d),this.addNeighbors(d,"orangeHouse","yellowHouse")},y.prototype.addClueItem=function(a,b,c){this.addVocabularyItem(new x(a,this.GROUND_HEIGHT+5,b,c))},y.prototype.addPlatforms=function(){this.platforms=this.game.add.group(),this.platforms.enableBody=!0,this.ground=this.platforms.create(0,this.GROUND_HEIGHT,"ground");var a=100/this.ground.height,b=this.WORLD_WIDTH/this.ground.width;this.ground.scale.setTo(b,a),this.ground.body.immovable=!0},y.prototype.addObject=function(a){this.backObjects.add(a)},y.prototype.addPlayer=function(){this.playerCharacters=this.game.add.group(),this.player=new h(this),this.playerCharacters.add(this.player),this.gameObjects.push(this.playerCharacters),this.player.loadPlayer()},y.prototype.addPlayerCharacter=function(a){this.playerCharacters.add(a)},y.prototype.addTexts=function(){var a={fontSize:"16px",fill:"#fff",stroke:"#000",strokeThickness:4},b={fontSize:"35px",fill:"#fff",stroke:"#000",strokeThickness:4},c=10,d=80;this.scoreIcon=this.game.add.sprite(this.game.camera.width-190,c,"money"),this.scoreIcon.fixedToCamera=!0,this.scoreIcon.anchor.set(.5,0),this.scoreLabel=this.game.add.text(this.scoreIcon.x,this.scoreIcon.y+this.scoreIcon.height,"Money",a),this.scoreLabel.fixedToCamera=!0,this.scoreLabel.anchor.set(.5,0),this.scoreText=this.game.add.text(this.scoreIcon.x+d,c,"$ "+this.player.score,b),this.scoreText.fixedToCamera=!0,this.scoreText.anchor.set(.5,0),this.ammoIcon=this.game.add.sprite(this.game.camera.width-400,10,"ammo"),this.ammoIcon.fixedToCamera=!0,this.ammoIcon.anchor.set(.5,0),this.ammoLabel=this.game.add.text(this.ammoIcon.x,this.ammoIcon.y+this.ammoIcon.height,"Ammunition",a),this.ammoLabel.fixedToCamera=!0,this.ammoLabel.anchor.set(.5,0),this.ammoText=this.game.add.text(this.ammoIcon.x+d,c,"x"+this.player.currentWeapon.numberOfBullets,b),this.ammoText.fixedToCamera=!0,this.ammoText.anchor.set(.5,0),this.healthIcon=this.game.add.sprite(40,10,"health"),this.healthIcon.fixedToCamera=!0,this.healthIcon.anchor.set(.5,0),this.healthLabel=this.game.add.text(this.healthIcon.x,this.healthIcon.y+this.healthIcon.height,"Health",a),this.healthLabel.fixedToCamera=!0,this.healthLabel.anchor.set(.5,0),this.healthLevelText=this.game.add.text(this.healthIcon.x+d,c," ",b),this.healthLevelText.fixedToCamera=!0,this.healthLevelText.anchor.set(.5,0)},y.prototype.addControls=function(){this.cursors=this.game.input.keyboard.createCursorKeys(),this.changeKey=this.input.keyboard.addKey(Phaser.Keyboard.ENTER),this.changeKey.onDown.add(this.player.nextWeapon,this.player)},y.prototype.addCamera=function(){this.game.renderer.renderSession.roundPixels=!0,this.game.camera.follow(this.player)},y.prototype.createHealthPacksGroup=function(){this.healthPacks=this.game.add.group(),this.gameObjects.push(this.healthPacks)},y.prototype.createOtherItemsGroup=function(){this.vocabularyItems=this.game.add.group(),
this.gameObjects.push(this.vocabularyItems)},y.prototype.createWeaponsGroup=function(){this.weapons=this.game.add.group(),this.gameObjects.push(this.weapons)},y.prototype.createInventory=function(){this.inventory=new d(this),this.game.add.existing(this.inventory)},y.prototype.createStore=function(){this.store=new e(this),this.game.add.existing(this.store)},y.prototype.createEnglishChallengesMenu=function(){this.englishChallengeMenu=new q,this.game.add.existing(this.englishChallengeMenu)},y.prototype.createMyVocabulary=function(){this.myVocabulary=new f(this),this.game.add.existing(this.myVocabulary)},y.prototype.createToolsBar=function(){this.toolsBar=new v("toolsBar",{x:0,y:this.WORLD_HEIGHT-80,margin:5}),this.game.add.existing(this.toolsBar),this.toolsBar.fixedToCamera=!0,this.toolsBar.visible=!0,this.inventoryButton=new u("Inventory","inventory_button",this.inventory.open,this.inventory),this.toolsBar.addElement(this.inventoryButton),this.storeButton=new u("Store","storeButton",this.store.open,this.store),this.toolsBar.addElement(this.storeButton),this.addCashButton=new u("Add Money","addCashButton",this.englishChallengeMenu.open,this.englishChallengeMenu),this.toolsBar.addElement(this.addCashButton),this.myVocabularyButton=new u("Vocabulary","myVocabularyButton",this.myVocabulary.open,this.myVocabulary),this.toolsBar.addElement(this.myVocabularyButton)},y.prototype.bulletHitCharacter=function(a,b){a.decreaseHealthLevel(b.power),a.updateHealthLevel(),b.kill()},y.prototype.collectWeapon=function(a,b){this.weapons.remove(b),this.player.useWeapon(b),this.updateAmmoText()},y.prototype.crashEnemy=function(a,b){a.isStopped()||b.killCharacter()},y.prototype.collectHealthPack=function(a,b){this.player.fullHealthLevel()?this.inventory.addItem(b):this.increaseHealthLevel(b.maxIncreasing),b.pickUp()},y.prototype.collectItem=function(a,b){this.inventory.addItem(b),b.pickUp()},y.prototype.collectVocabularyItem=function(a,b){this.myVocabulary.addItem(b),b.pickUp()},y.prototype.updateAmmoText=function(){this.ammoText.text="x"+this.player.currentWeapon.numberOfBullets},y.prototype.updateScoreText=function(){this.scoreText.text="$ "+this.player.score,localStorage.setItem("score",this.player.score)},y.prototype.updateHealthLevel=function(){this.player.healthLevel<=0&&this.gameOver(),this.healthLevelText.text=""+this.player.healthLevel,this.healthBar.updateResourceBarLevel(this.player.healthLevel/this.player.maxHealthLevel),localStorage.setItem("healthLevel",this.player.healthLevel)},y.prototype.gameOver=function(){this.game.state.start("menu")},y.prototype.increaseHealthLevel=function(a){this.player.increaseHealthLevel(a),this.updateHealthLevel()},y.prototype.increaseScore=function(a){this.player.increaseScore(a),this.updateScoreText()},y.prototype.addHealthPack=function(a){this.healthPacks.add(a)},y.prototype.addVocabularyItem=function(a){this.vocabularyItems.add(a)},y.prototype.addRevolver=function(a,b,c){this.weapons.add(new i(a,b,c))},y.prototype.addMachineGun=function(a,b,c){this.weapons.add(new j(a,b,c))},y.prototype.pause=function(){this.game.physics.arcade.isPaused=!0},y.prototype.resume=function(){this.game.physics.arcade.isPaused=!1},y.prototype.showErrorMessage=function(a,b){var c=new p("errorIcon",a,b);this.game.add.existing(c),c.open()},y.prototype.showSuccessMessage=function(a,b){var c=new p("successIcon",a,b);this.game.add.existing(c),c.open()},y.prototype.addStaticBuilding=function(a,b){var c=level.game.make.sprite(a,this.GROUND_HEIGHT,b);return c.anchor.set(0,1),this.addObject(c),c},y.prototype.addNeighbors=function(a,b,c){var d=this.addStaticBuilding(0,b);d.x=a.x-d.width,this.addStaticBuilding(a.x+a.width,c)},y.prototype.addNameBoard=function(a,b){var c;c=new s(a,this.GROUND_HEIGHT,b),this.addObject(c)},y.prototype.addEnemies=function(){var a,b,c=.75*this.firstCheckPointX;for(a=0;a<this.numberOfFightingPoints;a++){for(b=0;b<this.numberOfEnemies;b++)c+=50,this.addSimpleEnemy(c);for(b=0;b<this.numberOfStrongEnemies;b++)c+=50,this.addStrongEnemy(c);c+=this.checkPointsDistance-200}},y.prototype.addPlaces=function(){var a,b,c=this.WORLD_WIDTH/(this.placesKeys.length+1),d=0;for(a=0;a<this.placesKeys.length;a++)d>=this.housesKeys.length&&(d=0),b=new t(c*(a+1),this.GROUND_HEIGHT,this.placesKeys[a]),this.addVocabularyItem(b),this.addNeighbors(b,this.housesKeys[d],this.housesKeys[d+1]),d+=2,this.addNameBoard(b.x-70,b.name+" Street")},y.prototype.addHealthPacks=function(){var a,b=this.WORLD_WIDTH/this.numberOfFightingPoints;for(a=1;a<=this.numberOfFightingPoints;a++)this.addHealthPack(new g(b*a-200,10,5,this))},y.prototype.nextLevel=function(){this.game.state.start(this.nextState)},y.prototype.createInteractiveCar=function(a){switch(a){case"car":return new o(0,0,a,60,300,200);case"jeep":return new o(0,0,a,100,350,400);case"bus":return new o(0,0,a,300,400,450);case"truck":return new o(0,0,a,200,70,90);case"taxi":return new o(0,0,a,450,200,400);case"ambulance":return new o(0,0,a,400,150,500)}},y.prototype.playerWins=function(){return this.player.x>=this.WORLD_WIDTH-this.player.width-5&&this.enemies.children.length<=0},b.exports=y},{"../../character/NPC":5,"../../character/Player":6,"../../character/SimpleEnemy":7,"../../character/StrongEnemy":8,"../../character/StrongestEnemy":9,"../../englishChallenges/menu/EnglishChallengesMenu":17,"../../items/HealthPack":19,"../../items/inventory/Inventory":23,"../../items/store/Store":25,"../../items/vocabulary/MyVocabulary":31,"../../items/vocabularyItems/ClueItem":27,"../../items/vocabularyItems/InteractiveCar":28,"../../items/vocabularyItems/WorldItem":30,"../../items/weapons/MachineGun":34,"../../items/weapons/Revolver":35,"../../util/Dialog":52,"../../util/HorizontalLayoutPanel":57,"../../util/IconButton":59,"../../util/InteractionManager":60,"../../util/PopUp":61,"../../util/ResourceBar":62,"../../worldElements/InteractiveHouse":67,"../../worldElements/NameBoard":68}],44:[function(a,b,c){var d=a("./Level"),e=(a("../../worldElements/InteractiveHouse"),a("../../items/HealthPack"),a("../../util/Dialog"),a("../../util/VerticalLayoutPopUp"),a("../../util/InteractionManager")),f=(a("../../items/vocabularyItems/ClueItem"),a("../../items/vocabularyItems/VocabularyItem")),g=5,h=function(a){d.call(this,a)};h.prototype=Object.create(d.prototype),h.prototype.constructor=h,h.prototype.create=function(){d.prototype.create.call(this),localStorage.setItem("level","levelOne"),this.nextState="levelTwo",this.game.stage.backgroundColor="#C7D2FC",this.firstCheckPointX=1.5*this.game.camera.width,this.checkPointsDistance=this.WORLD_WIDTH/(g+1),this.lastGoalAimed=!1,this.numberOfFightingPoints=g,this.numberOfEnemies=3,this.numberOfStrongEnemies=0,this.createPlaces(),this.addInteractiveBuildings(),this.addStaticBuildings(),this.addNPCs(),this.addEnemies(),this.createWeapons(),this.addClueItems(),this.addLevelCar("jeep",3.7*this.checkPointsDistance),this.addHealthPacks()},h.prototype.createWeapons=function(){this.addRevolver(3e3,this.GROUND_HEIGHT-40,!1),this.addRevolver(6e3,this.GROUND_HEIGHT-40,!1)},h.prototype.addClueItems=function(){var a=["Oh Great, those are my wife's glasses!"],b=["My wife's glasses"],c=["glasses"],d=[],g=new f(0,0,"wife",!1);d.push(g);var h=new e(a,b,c,d);this.addClueItem(300,"glasses",h),a=["Oh Great, that is my wife's watch!"],b=["My wife's watch"],c=["watch"],h=new e(a,b,c),this.addClueItem(this.WORLD_WIDTH/2,"watch",h)},h.prototype.addInteractiveBuildings=function(){var a=["You can buy a weapon using the store"],b=["Buying weapons"],c=["store"],d=new e(a,b,c);this.addInteractiveHouse(1.55*this.firstCheckPointX,"store",d),a=["Your family is now somewhere else.","Continue trying, because this game is just starting!"],b=["Continue trying","Continue trying"],c=["emptyRoom","emptyRoom"];var g=[],h=new f(0,0,"family",!1);g.push(h),d=new e(a,b,c,g),this.addInteractiveHouse(5.5*this.checkPointsDistance,"blueHouse",d)},h.prototype.addStaticBuildings=function(){this.addStaticBuilding(5,"orangeHouse");var a=this.addStaticBuilding(500,"whiteHouse");this.addNeighbors(a,"greenHouse","yellowHouse")},h.prototype.addNPCs=function(){var a=["Are you looking for Carlos? \n Be careful, he is so dangerous","Your wife and children are in \nthe Big Blue House after the Zoo"],b=["I can help you","Go to Big Blue House"],c=["npc","blueHouse"],d=new e(a,b,c);this.addNPC(this.game.camera.width/2,"npc",d)},h.prototype.createPlaces=function(){this.housesKeys=["whiteHouse","greenHouse","yellowHouse","orangeHouse"],this.placesKeys=["bookStore","playground","gasStation","zoo"],this.addPlaces()},b.exports=h},{"../../items/HealthPack":19,"../../items/vocabularyItems/ClueItem":27,"../../items/vocabularyItems/VocabularyItem":29,"../../util/Dialog":52,"../../util/InteractionManager":60,"../../util/VerticalLayoutPopUp":66,"../../worldElements/InteractiveHouse":67,"./Level":43}],45:[function(a,b,c){var d=a("./Level"),e=(a("../../worldElements/InteractiveHouse"),a("../../items/HealthPack"),a("../../util/Dialog"),a("../../util/VerticalLayoutPopUp"),a("../../items/vocabularyItems/ClueItem"),a("../../character/Wife")),f=a("../../character/Friend"),g=a("../../items/vocabularyItems/VocabularyItem"),h=a("../../util/InteractionManager"),i=8,j=function(a){d.call(this,a)};j.prototype=Object.create(d.prototype),j.prototype.constructor=j,j.prototype.create=function(){d.prototype.create.call(this),localStorage.setItem("level","levelThree"),this.nextState="menu",this.game.stage.backgroundColor="#09061F",this.firstCheckPointX=1.5*this.game.camera.width,this.checkPointsDistance=this.WORLD_WIDTH/(i+1),this.lastGoalAimed=!1,this.numberOfFightingPoints=i,this.numberOfEnemies=2,this.numberOfStrongEnemies=3,this.createPlaces(),this.addStaticBuildings(),this.addEnemies(),this.addWife(),this.addFriend(this.WORLD_WIDTH-100),this.addClueItems(),this.createWeapons(),this.addHealthPacks()},j.prototype.createWeapons=function(){this.addMachineGun(600,this.GROUND_HEIGHT-40,!1),this.addRevolver(2e3,this.GROUND_HEIGHT-40,!1),this.addMachineGun(4e3,this.GROUND_HEIGHT-40,!1),this.addRevolver(6e3,this.GROUND_HEIGHT-40,!1),this.addMachineGun(7e3,this.GROUND_HEIGHT-40,!1)},j.prototype.createPlaces=function(){this.housesKeys=["yellowHouse","greenHouse","orangeHouse","whiteHouse"],this.placesKeys=["policeStation","fireStation","superMarket","hotel"],this.addPlaces()},j.prototype.addClueItems=function(){var a=["Our daughter's drawing!"],b=["We are closer to our kids!"],c=["family"],d=[],e=new g(0,0,"kid",!1);d.push(e);var f=new h(a,b,c,d);this.addClueItem(300,"family",f),a=["Oh Great, that is our son's cap!"],b=["Our son's cap"],c=["cap"],d=[],e=new g(0,0,"son",!1),d.push(e),f=new h(a,b,c,d),this.addClueItem(this.WORLD_WIDTH/2-400,"cap",f),a=["Oh Great, that is our daughter's bracelet!"],b=["My wife's bracelet"],c=["bracelet"],d=[],e=new g(0,0,"daughter",!1),d.push(e),f=new h(a,b,c,d),this.addClueItem(this.WORLD_WIDTH/2+400,"bracelet",f)},j.prototype.addWife=function(){this.wife=new e(this.player.x-this.player.width,this.GROUND_HEIGHT-50),this.addPlayerCharacter(this.wife)},j.prototype.addFriend=function(a){this.enemies.add(new f(a,this.GROUND_HEIGHT-100))},j.prototype.addStaticBuildings=function(){var a=this.addStaticBuilding(400,"redHouse");this.addNeighbors(a,"whiteHouse","blueHouse"),this.addStaticBuilding(this.WORLD_WIDTH-300,"whiteHouse")},j.prototype.liberateFamilyMember=function(){var a=[],b=new g(0,0,"parent",!1);a.push(b);var c=["Thank you dear parents."],d=["Thank you!"],e=["parent"],f=new h(c,d,e,a);this.son=this.addNPC(this.WORLD_WIDTH-250,"son",f),a=[],b=new g(0,0,"mother",!1),a.push(b),b=new g(0,0,"father",!1),a.push(b),c=["Mother and Father we are so happy to see you again."],d=["Thank you!"],e=["parent"],f=new h(c,d,e,a),this.son=this.addNPC(this.WORLD_WIDTH-200,"daughter",f)},b.exports=j},{"../../character/Friend":3,"../../character/Wife":10,"../../items/HealthPack":19,"../../items/vocabularyItems/ClueItem":27,"../../items/vocabularyItems/VocabularyItem":29,"../../util/Dialog":52,"../../util/InteractionManager":60,"../../util/VerticalLayoutPopUp":66,"../../worldElements/InteractiveHouse":67,"./Level":43}],46:[function(a,b,c){var d=a("./Level"),e=(a("../../items/HealthPack"),a("../../util/Dialog"),a("../../util/VerticalLayoutPopUp"),a("../../items/vocabularyItems/ClueItem"),a("../../util/InteractionManager")),f=a("../../items/vocabularyItems/VocabularyItem"),g=6,h=function(a){d.call(this,a)};h.prototype=Object.create(d.prototype),h.prototype.constructor=h,h.prototype.create=function(){d.prototype.create.call(this),localStorage.setItem("level","levelTwo"),this.nextState="levelThree",this.game.stage.backgroundColor="#C2501B",this.firstCheckPointX=1.5*this.game.camera.width,this.checkPointsDistance=this.WORLD_WIDTH/(g+1),this.lastGoalAimed=!1,this.numberOfFightingPoints=g,this.numberOfEnemies=2,this.numberOfStrongEnemies=2,this.metWife=!1,this.createPlaces(),this.addStaticBuildings(),this.addEnemies(),this.addStrongestEnemy(this.WORLD_WIDTH-100),this.addClueItems(),this.addLevelCar("bus",3.4*this.checkPointsDistance),this.addHealthPacks(),this.createWeapons()},h.prototype.createWeapons=function(){this.addMachineGun(600,this.GROUND_HEIGHT-40,!1),this.addRevolver(2e3,this.GROUND_HEIGHT-40,!1),this.addRevolver(4e3,this.GROUND_HEIGHT-40,!1),this.addRevolver(6e3,this.GROUND_HEIGHT-40,!1),this.addMachineGun(7e3,this.GROUND_HEIGHT-40,!1)},h.prototype.addClueItems=function(){var a=["Oh Great, that is my wife's necklace!"],b=["My wife's necklace"],c=["necklace"],d=new e(a,b,c);this.addClueItem(300,"necklace",d),a=["Oh Great, that is my wife's ring!"],b=["My wife's ring"],c=["ring"],d=new e(a,b,c),this.addClueItem(this.WORLD_WIDTH/2,"ring",d)},h.prototype.liberateFamilyMember=function(){var a=[],b=new f(0,0,"husband",!1);a.push(b),b=new f(0,0,"child",!1),a.push(b),b=new f(0,0,"friend",!1),a.push(b);var c=["Hello my husband. I am so happy to see you again.","Yor friend has kidnapped \n our daughter and our son."],d=["Hello!","Our children are not here"],g=["wife","friend"],h=new e(c,d,g,a);this.wife=this.addNPC(this.WORLD_WIDTH-200,"wife",h)},h.prototype.createPlaces=function(){this.housesKeys=["whiteHouse","greenHouse","yellowHouse","orangeHouse"],this.placesKeys=["bank","coffeeShop","hospital","school","factory"],this.addPlaces()},h.prototype.addStaticBuildings=function(){var a=this.addStaticBuilding(400,"trees");this.addNeighbors(a,"greenHouse","yellowHouse"),this.addStaticBuilding(this.WORLD_WIDTH-300,"yellowHouse")},b.exports=h},{"../../items/HealthPack":19,"../../items/vocabularyItems/ClueItem":27,"../../items/vocabularyItems/VocabularyItem":29,"../../util/Dialog":52,"../../util/InteractionManager":60,"../../util/VerticalLayoutPopUp":66,"./Level":43}],47:[function(a,b,c){arguments[4][43][0].apply(c,arguments)},{"../../character/NPC":5,"../../character/Player":6,"../../character/SimpleEnemy":7,"../../character/StrongEnemy":8,"../../character/StrongestEnemy":9,"../../englishChallenges/menu/EnglishChallengesMenu":17,"../../items/HealthPack":19,"../../items/inventory/Inventory":23,"../../items/store/Store":25,"../../items/vocabulary/MyVocabulary":31,"../../items/vocabularyItems/ClueItem":27,"../../items/vocabularyItems/InteractiveCar":28,"../../items/vocabularyItems/WorldItem":30,"../../items/weapons/MachineGun":34,"../../items/weapons/Revolver":35,"../../util/Dialog":52,"../../util/HorizontalLayoutPanel":57,"../../util/IconButton":59,"../../util/InteractionManager":60,"../../util/PopUp":61,"../../util/ResourceBar":62,"../../worldElements/InteractiveHouse":67,"../../worldElements/NameBoard":68,dup:43}],48:[function(a,b,c){arguments[4][44][0].apply(c,arguments)},{"../../items/HealthPack":19,"../../items/vocabularyItems/ClueItem":27,"../../items/vocabularyItems/VocabularyItem":29,"../../util/Dialog":52,"../../util/InteractionManager":60,"../../util/VerticalLayoutPopUp":66,"../../worldElements/InteractiveHouse":67,"./Level":43,dup:44}],49:[function(a,b,c){arguments[4][39][0].apply(c,arguments)},{"../util/Button":51,dup:39}],50:[function(a,b,c){arguments[4][40][0].apply(c,arguments)},{dup:40}],51:[function(a,b,c){var d=function(a,b,c,d){var e=d||"button";Phaser.Sprite.call(this,level.game,0,0,e),this.text=level.game.make.text(this.width/2,this.height/2,a),this.text.anchor.set(.5,.5),this.text.font=level.font,this.text.fontSize=20,this.text.fill="#FFFFFF",this.text.stroke="#000000",this.text.strokeThickness=3,this.inputEnabled=!0,this.events.onInputDown.add(b,c),scale=(this.text.width+20)/this.width,this.scale.x=scale,this.addChild(this.text),this.text.scale.x=1/scale};d.prototype=Object.create(Phaser.Sprite.prototype),d.prototype.constructor=d,b.exports=d},{}],52:[function(a,b,c){var d=a("./HorizontalLayoutPopUp"),e=function(a,b,c){d.call(this,"dialogBg",c,null,20),this.icon=level.game.make.sprite(0,0,a);var e;e=this.icon.width>100?this.icon.width/100:100/this.icon.width,this.icon.scale.setTo(e,e),this.message=level.game.make.text(0,0,""),this.message.font=level.font,this.message.fontSize=20,this.message.fill="#000000",this.message.text=b,this.addElement(this.icon),this.addElement(this.message)};e.prototype=Object.create(d.prototype),e.prototype.constructor=e,e.prototype.setText=function(a){this.message.text=a},b.exports=e},{"./HorizontalLayoutPopUp":58}],53:[function(a,b,c){var d=10,e=function(a,b,c,e,f,g){this.currentRow=0,this.currentColumn=0,this.numberOfColumns=a,this.numberOfRows=b,this.margin=g||d,1===a&&1===b?(this.xOrigin=0,this.yOrigin=0):(this.xOrigin=this.margin+c,this.yOrigin=this.margin+e),this.rowWidth=(f.width-c-2*this.margin)/this.numberOfColumns,this.rowHeight=(f.height-e-2*this.margin)/this.numberOfRows,this.container=f};e.prototype.constructor=e,e.prototype.addElement=function(a){if(!(this.currentColumn>=this.numberOfColumns&&(this.currentColumn=0,this.currentRow++,this.currentRow===this.numberOfRows))){var b=this.rowWidth/2-a.width/2;a.x=this.xOrigin+this.rowWidth*this.currentColumn+b;var c=this.yOrigin+this.rowHeight/2-a.height/2;a.y=this.rowHeight*this.currentRow+c,this.container.addChild(a),this.currentColumn++}},e.prototype.restartIndexes=function(){this.currentColumn=0,this.currentRow=0},b.exports=e},{}],54:[function(a,b,c){var d=a("./GridLayout"),e=1,f=1,g=function(a,b){var c=b||[],g=c.x||0,h=c.y||0;Phaser.Sprite.call(this,level.game,g,h,a),this.numberOfColumns=c.numberOfColumns||e,this.numberOfRows=c.numberOfRows||f,this.grid=new d(this.numberOfColumns,this.numberOfRows,0,0,this,c.margin)};g.prototype=Object.create(Phaser.Sprite.prototype),g.prototype.constructor=g,g.prototype.addElement=function(a){this.grid.addElement(a)},g.prototype.removeAllElements=function(){this.removeChildren(),this.grid.restartIndexes()},b.exports=g},{"./GridLayout":53}],55:[function(a,b,c){var d=a("./PopUp"),e=a("./GridLayout"),f=1,g=1,h=function(a,b,c,h){d.call(this,a,h,b),this.currentRow=0,this.currentColumn=0;var i=c||{};this.numberOfColumns=i.numberOfColumns||f,this.numberOfRows=i.numberOfRows||g,this.grid=new e(this.numberOfColumns,this.numberOfRows,0,this.title.height+this.title.y,this,i.margin)};h.prototype=Object.create(d.prototype),h.prototype.constructor=h,h.prototype.addElement=function(a){this.grid.addElement(a)},h.prototype.restartPositions=function(){this.grid.restartsIndexes()},b.exports=h},{"./GridLayout":53,"./PopUp":61}],56:[function(a,b,c){var d=10,e=function(a,b){this.margin=b||d,this.currentX=this.margin,this.parent=a};e.prototype.constructor=e,e.prototype.addElement=function(a){a.x=this.currentX,this.currentX+=a.width+this.margin,a.y=this.parent.height/2-a.height/2,this.parent.addChild(a)},e.prototype.restartPosition=function(){this.currentX=this.margin},b.exports=e},{}],57:[function(a,b,c){var d=a("./HorizontalLayout"),e=function(a,b){var c=b||[],e=c.x||0,f=c.y||0,g=c.margin||0;Phaser.Sprite.call(this,level.game,e,f,a),this.layout=new d(this,g)};e.prototype=Object.create(Phaser.Sprite.prototype),e.prototype.constructor=e,e.prototype.addElement=function(a){this.layout.addElement(a)},b.exports=e},{"./HorizontalLayout":56}],58:[function(a,b,c){var d=a("./PopUp"),e=a("./HorizontalLayout"),f=function(a,b,c,f){d.call(this,a,b,c),this.layout=new e(this,f)};f.prototype=Object.create(d.prototype),f.prototype.constructor=f,f.prototype.addElement=function(a){this.layout.addElement(a)},f.prototype.restartPositions=function(){this.layout.restartPosition()},b.exports=f},{"./HorizontalLayout":56,"./PopUp":61}],59:[function(a,b,c){var d=a("../util/VerticalLayoutPanel"),e=function(a,b,c,e,f){var g=f||"iconButton";d.call(this,g,5),this.icon=level.game.make.sprite(0,0,b),this.text=level.game.make.text(0,0,a),this.text.font=level.font,this.text.fontSize=14,this.text.fill="#FFFFFF",this.text.stroke="#000000",this.text.strokeThickness=3,this.inputEnabled=!0,this.events.onInputDown.add(c,e),this.addElement(this.icon),this.addElement(this.text)};e.prototype=Object.create(d.prototype),e.prototype.constructor=e,b.exports=e},{"../util/VerticalLayoutPanel":65}],60:[function(a,b,c){var d=a("../util/VerticalLayoutPopUp"),e=function(a,b,c,e){this.dialogs=[];var f,g;for(f in a){g=new d("mediumPopUpBg",null,b[f]);var h=level.game.make.sprite(0,0,c[f]),i=level.game.make.text(0,0,a[f]);i.font=level.font,i.fontSize=20,i.fill="#000000",i.align="center",g.addElement(h),g.addElement(i),this.dialogs.push(g),level.game.add.existing(g)}this.vocabuaryItems=e||[]};e.prototype.openDialogs=function(){var a;for(a=this.dialogs.length-1;a>=0;a--)this.dialogs[a].open();for(a=0;a<this.vocabuaryItems.length;a++)level.myVocabulary.addItem(this.vocabuaryItems[a])},b.exports=e},{"../util/VerticalLayoutPopUp":66}],61:[function(a,b,c){var d=function(a,b,c){Phaser.Sprite.call(this,level.game,0,0,a),this.xCenter=this.width/2,this.yCenter=this.height/2,this.x=level.game.camera.width/2-this.xCenter,this.y=level.game.camera.height/2-this.yCenter,this.closeButton=level.game.make.sprite(this.width-5,5,"close"),this.closeButton.anchor.set(1,0),this.closeButton.inputEnabled=!0,this.closeButton.input.priorityID=2,this.closeButton.events.onInputDown.add(this.close,this),void 0!==c&&(this.title=level.game.make.text(this.xCenter,5,c),this.title.font=level.font,this.title.fontSize=40,this.title.fill="#feec69",this.title.stroke="#000000",this.title.strokeThickness=3,this.title.anchor.set(.5,0),this.addChild(this.title)),this.addChild(this.closeButton),this.fixedToCamera=!0,this.visible=!1,void 0===b?this.withoutParent=!0:(this.withoutParent=!1,this.parent=b)};d.prototype=Object.create(Phaser.Sprite.prototype),d.prototype.constructor=d,d.prototype.close=function(){this.visible=!1,level.activePopUps--,0===level.activePopUps&&level.resume(),this.kill()},d.prototype.open=function(){this.alive||this.revive(),0===level.activePopUps&&level.pause(),level.activePopUps++,this.bringToTop(),this.visible=!0},d.prototype.removeAllElements=function(){var a=1;void 0!==this.title&&(a=2),this.removeChildren(a),this.restartPositions()},b.exports=d},{}],62:[function(a,b,c){var d=function(a,b,c){Phaser.Sprite.call(this,level.game,a,b,"healthBarBackground"),this.bar=level.game.make.sprite(0,0,"healthBar");var d=c||[];void 0!==d.width&&void 0!==d.height&&(this.width=d.width,this.height=d.height),this.addChild(this.bar)};d.prototype=Object.create(Phaser.Sprite.prototype),d.prototype.constructor=d,d.prototype.updateResourceBarLevel=function(a){this.bar.scale.x=a},b.exports=d},{}],63:[function(a,b,c){var d=function(){};d.prototype.randomIndexesArray=function(a){var b,c,d=[],e=[];for(c=0;a>c;c++)e.push(c);for(c=0;a>c;c++)b=level.game.rnd.integerInRange(0,e.length-1),d.push(e[b]),e.splice(b,1);return d},b.exports=d},{}],64:[function(a,b,c){var d=10,e=function(a,b,c){var e=c||0;this.margin=b||d,this.currentY=this.margin+e,this.parent=a};e.prototype.constructor=e,e.prototype.addElement=function(a){a.y=this.currentY,this.currentY+=a.height+this.margin,a.x=this.parent.width/2-a.width/2,this.parent.addChild(a)},e.prototype.restartPosition=function(){this.currentY=this.margin},b.exports=e},{}],65:[function(a,b,c){var d=a("./VerticalLayout"),e=function(a,b,c){Phaser.Sprite.call(this,level.game,0,0,a),this.layout=new d(this,b,c)};e.prototype=Object.create(Phaser.Sprite.prototype),e.prototype.constructor=e,e.prototype.addElement=function(a){this.layout.addElement(a)},e.prototype.removeAllElements=function(){this.removeChildren(),this.layout.restartPosition()},e.prototype.restartPosition=function(){this.layout.restartPosition()},b.exports=e},{"./VerticalLayout":64}],66:[function(a,b,c){var d=a("./PopUp"),e=a("./VerticalLayout"),f=function(a,b,c,f){d.call(this,a,b,c);var g=this.title.y+this.title.height||0;this.layout=new e(this,f,g)};f.prototype=Object.create(d.prototype),f.prototype.constructor=f,f.prototype.addElement=function(a){this.layout.addElement(a)},f.prototype.restartPositions=function(){this.layout.restartPosition()},b.exports=f},{"./PopUp":61,"./VerticalLayout":64}],67:[function(a,b,c){var d=a("../items/vocabularyItems/VocabularyItem"),e=(a("../util/Button"),function(a,b,c,e){d.call(this,a,b,c,!0),this.interactionManager=e});e.prototype=Object.create(d.prototype),e.prototype.constructor=e,e.prototype.openActivity=function(){this.interactionManager.openDialogs()},e.prototype.pickUp=function(){this.openActivity(),level.vocabularyItems.remove(this),level.addObject(this)},b.exports=e},{"../items/vocabularyItems/VocabularyItem":29,"../util/Button":51}],68:[function(a,b,c){var d=function(a,b,c){Phaser.Sprite.call(this,level.game,a,b,"nameBoard"),this.anchor.set(.5,1),this.message=level.game.make.text(0,-this.height+10,c),this.message.font=level.font,this.message.fontSize=16,this.message.fill="#FFFFFF",this.message.anchor.set(.5,0),this.addChild(this.message)};d.prototype=Object.create(Phaser.Sprite.prototype),d.prototype.constructor=d,b.exports=d},{}]},{},[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,31,32,27,28,29,30,33,34,35,36,37,41,42,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68]);