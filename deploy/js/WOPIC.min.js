/*! GameDevTemplateJS 0.0.1 | (c) 2015 Edwin Gamboa */ 
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){WebFontConfig={google:{families:["Shojumaru"]}};var d=new Phaser.Game(1e3,500,Phaser.AUTO,"WOPIC"),e=a("./states/Boot"),f=a("./states/Preloader"),g=a("./states/Menu"),h=a("./states/levels/Intro"),i=a("./states/levels/LevelOne"),j=a("./states/levels/LevelTwo"),k=a("./states/levels/LevelThree");d.state.add("boot",e),d.state.add("preloader",f),d.state.add("menu",g),d.state.add("levelOne",i),d.state.add("levelTwo",j),d.state.add("levelThree",k),d.state.add("intro",h),d.state.start("boot")},{"./states/Boot":37,"./states/Menu":38,"./states/Preloader":39,"./states/levels/Intro":41,"./states/levels/LevelOne":43,"./states/levels/LevelThree":44,"./states/levels/LevelTwo":45}],2:[function(a,b,c){var d=150,e=250,f=100,g=100,h=.2,i=300,j=function(a,b,c,j){Phaser.Sprite.call(this,level.game,a,b,c);var k=j||{};this.healthLevel=k.healthLevel||f,this.maxHealthLevel=k.maxHealthLevel||g,this.speed=k.speed||d,this.maxSpeed=k.maxSpeed||e,level.game.physics.arcade.enable(this),this.body.bounce.y=k.bounce||h,this.body.gravity.y=k.gravity||i,this.body.collideWorldBounds=!0,this.anchor.setTo(.5,.5),this.currentWeaponIndex=0,this.weapons=[],this.weaponsKeys=[],this.onVehicle=!1,this.canFire=!0};j.prototype=Object.create(Phaser.Sprite.prototype),j.prototype.constructor=j,j.prototype.moveLeft=function(){this.body.velocity.x=-this.speed,this.onVehicle?this.frame=this.stopLeftFrameIndex:this.animations.play("left"),void 0!==this.currentWeapon&&this.currentWeapon.pointToLeft()},j.prototype.moveRight=function(){this.body.velocity.x=this.speed,this.onVehicle?this.frame=this.stopRightFrameIndex:this.animations.play("right"),void 0!==this.currentWeapon&&this.currentWeapon.pointToRight()},j.prototype.runLeft=function(){this.body.velocity.x=-this.maxSpeed,this.onVehicle?this.frame=this.stopLeftFrameIndex:this.animations.play("left"),void 0!==this.currentWeapon&&this.currentWeapon.pointToLeft()},j.prototype.runRight=function(){this.body.velocity.x=this.maxSpeed,this.onVehicle?this.frame=this.stopRightFrameIndex:this.animations.play("right"),void 0!==this.currentWeapon&&this.currentWeapon.pointToRight()},j.prototype.stop=function(){this.body.velocity.x=0,this.animations.stop(),level.xDirection>0?this.frame=this.stopRightFrameIndex:this.frame=this.stopLeftFrameIndex},j.prototype.fullHealthLevel=function(){return this.healthLevel===this.maxHealthLevel},j.prototype.increaseHealthLevel=function(a){this.healthLevel+=a,this.healthLevel>this.maxHealthLevel&&(this.healthLevel=this.maxHealthLevel)},j.prototype.decreaseHealthLevel=function(a){this.healthLevel-=a,this.healthLevel<=0&&this.killCharacter()},j.prototype.killCharacter=function(){this.killWeapons(),this.kill()},j.prototype.killWeapons=function(){for(var a in this.weapons)this.weapons[a].killWeapon()},j.prototype.setHealthLevel=function(a){this.healthLevel=a},j.prototype.updateCurrentWeapon=function(a){void 0!==this.currentWeapon&&this.currentWeapon.kill(),this.currentWeapon=this.weapons[a],this.currentWeapon.alive||this.currentWeapon.revive(),level.game.add.existing(this.currentWeapon)},j.prototype.nextWeapon=function(){this.currentWeaponIndex++,this.currentWeaponIndex===this.weaponsKeys.length&&(this.currentWeaponIndex=0),this.updateCurrentWeapon(this.weaponsKeys[this.currentWeaponIndex])},j.prototype.addWeapon=function(a){void 0===this.weapons[a.key]&&this.weaponsKeys.push(a.key),this.weapons[a.key]=a},j.prototype.fireToXY=function(a,b){this.canFire&&this.currentWeapon.fire(a,b)},j.prototype.relocate=function(a,b){this.x=a,this.y=b},j.prototype.useWeapon=function(a){void 0===this.weapons[a.key]?(this.addWeapon(a),this.updateCurrentWeapon(a.key),level.xDirection>0?this.currentWeapon.pointToRight():this.currentWeapon.pointToLeft()):this.weapons[a.key].addBullets(a.numberOfBullets)},j.prototype.jump=function(){this.body.velocity.y=-350},b.exports=j},{}],3:[function(a,b,c){var d=a("./Character"),e=a("./../util/ResourceBar"),f=1,g=-1,h=function(a,b,c,g,h,i,j,k){var l={healthLevel:b,maxHealthLevel:b};d.call(this,c,g,a,l),this.animations.add("left",[0,1],10,!0),this.animations.add("right",[2,3],10,!0),this.stopLeftFrameIndex=0,this.stopRightFrameIndex=2,this.rangeDetection=level.game.rnd.integerInRange(h,i),this.rangeAttack=level.game.rnd.integerInRange(j,k),this.heatlthBar=new e(-this.width/2,-this.height/2-10,{width:40,height:5}),this.addChild(this.heatlthBar),this.direction=f};h.prototype=Object.create(d.prototype),h.prototype.constructor=h,h.prototype.update=function(){this.body.velocity.x>0?(this.direction=f,this.animations.play("right"),this.currentWeapon.pointToRight()):this.body.velocity.x<0&&(this.direction=g,this.animations.play("left"),this.currentWeapon.pointToLeft()),this.currentWeapon.updateCoordinates(this.x,this.y)},h.prototype.updateHealthLevel=function(){this.heatlthBar.updateResourceBarLevel(this.healthLevel/this.maxHealthLevel)},h.prototype.killCharacter=function(){this.healthLevel=0,level.player.increaseScore(.5*this.maxHealthLevel),d.prototype.killCharacter.call(this)},h.prototype.rotateWeapon=function(a,b){this.currentWeapon.rotation=level.game.physics.arcade.angleToXY(this,a,b)},h.prototype.stop=function(){this.body.velocity.x=0,this.animations.stop(),this.direction===f?this.frame=this.stopRightFrameIndex:this.frame=this.stopLeftFrameIndex},b.exports=h},{"./../util/ResourceBar":58,"./Character":2}],4:[function(a,b,c){var d=a("./InteractionEnemy"),e=a("../items/weapons/MachineGun"),f=(a("../util/VerticalLayoutPopUp"),a("../util/InteractionManager")),g="friend",h=40,i=800,j=1e3,k=600,l=800,m=function(a,b){var c=["Message 1","Message 2"],m=["Title 1","Title 2"],n=["Key 1","Key 2"],o=new f(c,m,n);d.call(this,g,h,a,b,i,j,k,l,o),this.useWeapon(new e(this,a,b,!0))};m.prototype=Object.create(d.prototype),m.prototype.constructor=m,b.exports=m},{"../items/weapons/MachineGun":34,"../util/InteractionManager":56,"../util/VerticalLayoutPopUp":62,"./InteractionEnemy":5}],5:[function(a,b,c){var d=a("./Enemy"),e=(a("../items/weapons/MachineGun"),function(a,b,c,e,f,g,h,i,j){d.call(this,a,b,c,e,f,g,h,i),this.interactionManager=j});e.prototype=Object.create(d.prototype),e.prototype.constructor=e,e.prototype.decreaseHealthLevel=function(a){this.healthLevel-=a,this.healthLevel<=10&&!level.lastGoalAimed&&(this.killWeapons(),this.canFire=!1,this.openDialogs(),level.lastGoalAimed=!0)},e.prototype.openDialogs=function(){this.interactionManager.openDialogs()},b.exports=e},{"../items/weapons/MachineGun":34,"./Enemy":3}],6:[function(a,b,c){var d=a("./Character"),e=(a("../util/Dialog"),function(a,b,c,e){return d.call(this,a,b,c),this.animations.add("left",[0,1,2,3],10,!0),this.animations.add("right",[5,6,7,8],10,!0),this.stopLeftFrameIndex=0,this.stopRightFrameIndex=5,this.frame=this.stopRightFrameIndex,this.hadContactWithPlayer=!1,this.interactionManager=e,this});e.prototype=Object.create(d.prototype),e.prototype.constructor=e,e.prototype.openDialogs=function(){this.interactionManager.openDialogs()},b.exports=e},{"../util/Dialog":49,"./Character":2}],7:[function(a,b,c){var d=a("./Character"),e=250,f=300,g=300,h=20,i=function(){var a={speed:e,maxSpeed:f};d.call(this,200,level.GROUND_HEIGHT-50,"character",a),this.animations.add("left",[0,1,2,3],10,!0),this.animations.add("right",[5,6,7,8],10,!0),this.stopLeftFrameIndex=0,this.stopRightFrameIndex=5,this.score=h,this.frame=this.stopRightFrameIndex};i.prototype=Object.create(d.prototype),i.prototype.constructor=i,i.prototype.crouch=function(){this.animations.stop(),this.frame=9},i.prototype.increaseScore=function(a){this.score+=a,level.updateScoreText()},i.prototype.decreaseScore=function(a){this.score+=a,level.updateScoreText()},i.prototype.updateHealthLevel=function(){level.updateHealthLevel()},i.prototype.update=function(){void 0!==this.currentWeapon&&this.currentWeapon.updateCoordinates(this.x+25*level.xDirection,this.y+20)},i.prototype.changeSpeed=function(a,b){this.speed=a,this.maxSpeed=b},i.prototype.resetSpeed=function(){this.speed=e,this.maxSpeed=f},i.prototype.changeGravity=function(a){this.body.gravity.y=a},i.prototype.resetGravity=function(){this.body.gravity.y=g},i.prototype.buyItem=function(a){return this.score>=a.price?(this.score-=a.price,!0):!1},b.exports=i},{"./Character":2}],8:[function(a,b,c){var d=a("./Enemy"),e=a("../items/weapons/Revolver"),f="simple_enemy",g=4,h=200,i=700,j=100,k=300,l=function(a,b){d.call(this,f,g,a,b,h,i,j,k),this.useWeapon(new e(this,a,b,!0))};l.prototype=Object.create(d.prototype),l.prototype.constructor=l,b.exports=l},{"../items/weapons/Revolver":35,"./Enemy":3}],9:[function(a,b,c){var d=a("./Enemy"),e=a("../items/weapons/MachineGun"),f="strong_enemy",g=8,h=400,i=1e3,j=200,k=600,l=function(a,b){d.call(this,f,g,a,b,h,i,j,k),this.useWeapon(new e(this,a,b,!0))};l.prototype=Object.create(d.prototype),l.prototype.constructor=l,b.exports=l},{"../items/weapons/MachineGun":34,"./Enemy":3}],10:[function(a,b,c){var d=a("./InteractionEnemy"),e=a("../items/weapons/MachineGun"),f=(a("../util/VerticalLayoutPopUp"),a("../util/InteractionManager")),g="strongestEnemy",h=30,i=800,j=1e3,k=500,l=600,m=function(a,b){var c=["Forgive me please!\nI can liberate your wife.","I can liberate your wife."],m=["Forgive me","Your Wife"],n=["forgive","mother"],o=new f(c,m,n);d.call(this,g,h,a,b,i,j,k,l,o),this.useWeapon(new e(this,a,b,!0))};m.prototype=Object.create(d.prototype),m.prototype.constructor=m,b.exports=m},{"../items/weapons/MachineGun":34,"../util/InteractionManager":56,"../util/VerticalLayoutPopUp":62,"./InteractionEnemy":5}],11:[function(a,b,c){var d=a("./Character"),e=a("./../util/ResourceBar"),f=1,g=-1,h=function(a,b){d.call(this,a,b,"wife"),this.animations.add("left",[0,1,2,3],10,!0),this.animations.add("right",[5,6,7,8],10,!0),this.stopLeftFrameIndex=0,this.stopRightFrameIndex=5,this.heatlthBar=new e(-this.width/2,-this.height/2-10,{width:40,height:5}),this.addChild(this.heatlthBar),this.direction=f};h.prototype=Object.create(d.prototype),h.prototype.constructor=h,h.prototype.update=function(){this.body.velocity.x=level.player.body.velocity.x,this.body.velocity.x>0?(this.direction=f,this.animations.play("right")):this.body.velocity.x<0?(this.direction=g,this.animations.play("left")):(this.animations.stop(),this.direction===f?this.frame=this.stopRightFrameIndex:this.frame=this.stopLeftFrameIndex)},h.prototype.updateHealthLevel=function(){this.heatlthBar.updateResourceBarLevel(this.healthLevel/this.maxHealthLevel)},h.prototype.killCharacter=function(){level.gameOver(),d.prototype.killCharacter.call(this)},b.exports=h},{"./../util/ResourceBar":58,"./Character":2}],12:[function(a,b,c){var d=a("./dragAndDrop/DragAndDropChallenge"),e=a("../util/GridLayoutPanel"),f=a("../util/VerticalLayoutPanel"),g=2,h=function(){var a={numberOfRows:4};d.call(this,"contexts","Contexts",10,a)};h.prototype=Object.create(d.prototype),h.prototype.constructor=h,h.prototype.newChallenge=function(){this.clearChallenge();var a=3,b=[],c=level.myVocabulary.randomVocabularyItems(a);b.push(c);var d;do d=level.myVocabulary.randomVocabularyItems(a);while(c[0].categoryIndex==d[0].categoryIndex);b.push(d);var h=[level.myVocabulary.categories[c[0].categoryIndex],level.myVocabulary.categories[d[0].categoryIndex]];this.contexts=[];var i={numberOfColumns:a,numberOfRows:2,margin:5};this.source=new e("wordsBg",i),i={numberOfColumns:g,margin:0};var j,k,l,m,n,o,p=new e("englishChallengePanelBg",i);for(j=0;g>j;j++)for(n=new f("contextBg",5),o=level.game.make.text(0,0,h[j]),o.font="Shojumaru",o.fontSize=20,o.fill="#0040FF",n.addElement(o),this.contexts.push(n),p.addElement(n),k=0;a>k;k++)l=level.game.make.text(0,0,b[j][k].name),l.font="Shojumaru",l.fontSize=20,l.fill="#0040FF",l.inputEnabled=!0,l.input.enableDrag(!0,!0),l.events.onDragStop.add(this.dragAndDropControl.fixLocation,this.dragAndDropControl),l.code=""+j,this.elements.push(l),m=new f("wordBg",2),m.code=""+j,this.destinations.push(m),n.addElement(m);this.dragAndDropControl.addElementsToSourceRandomly(),this.mainPanel.addElement(p),this.mainPanel.addElement(this.source)},h.prototype.bringItemToTop=function(a){h.prototype.isPrototypeOf(a.parent)?this.addChild(a):this.addChild(a.parent.parent)},b.exports=h},{"../util/GridLayoutPanel":51,"../util/VerticalLayoutPanel":61,"./dragAndDrop/DragAndDropChallenge":16}],13:[function(a,b,c){var d=function(a,b,c){this.iconKey=a,this.name=b,this.score=c};d.prototype.constructor=d,d.prototype.success=function(a){level.increaseScore(this.score),level.showSuccessMessage("Well done! You got "+this.score+" points.",a)},d.prototype.failure=function(a){level.showErrorMessage("Sorry! Try Again.",a)},d.prototype.incomplete=function(a){level.showErrorMessage("The challenge is not complete.",a)},b.exports=d},{}],14:[function(a,b,c){var d=a("./dragAndDrop/DragAndDropChallenge"),e=a("../util/VerticalLayoutPanel"),f=a("../util/GridLayoutPanel"),g=function(){var a={numberOfRows:3};d.call(this,"imageWord","Image Match",10,a)};g.prototype=Object.create(d.prototype),g.prototype.constructor=g,g.prototype.newChallenge=function(){this.clearChallenge();var a=level.myVocabulary.randomVocabularyItems(3),b=[];for(var c in a){var d=new e("imageWordBg"),g=level.game.make.sprite(0,0,a[c].key);if(g.height>120){var h=120/g.height;g.scale.x=h,g.scale.y=h}var i=new e("wordBg",2);i.code=c,this.destinations.push(i),d.addElement(g),d.addElement(i);var j=level.game.make.text(0,0,a[c].name);j.font="Shojumaru",j.fontSize=20,j.fill="#0040FF",j.inputEnabled=!0,j.input.enableDrag(!0,!0),j.events.onDragStop.add(this.dragAndDropControl.fixLocation,this.dragAndDropControl),j.code=c,b.push(d),this.elements.push(j)}var k={numberOfColumns:this.elements.length};this.source=new f("wordsBg",k);var l,m=new f("englishChallengePanelBg",k);for(l in b)m.addElement(b[l]);this.dragAndDropControl.addElementsToSourceRandomly(),this.mainPanel.addElement(m),this.mainPanel.addElement(this.source)},g.prototype.bringItemToTop=function(a){g.prototype.isPrototypeOf(a.parent)?this.addChild(a):this.addChild(a.parent.parent)},b.exports=g},{"../util/GridLayoutPanel":51,"../util/VerticalLayoutPanel":61,"./dragAndDrop/DragAndDropChallenge":16}],15:[function(a,b,c){var d=a("../util/GridLayoutPanel"),e=a("../util/VerticalLayoutPanel"),f=a("./dragAndDrop/DragAndDropChallenge"),g=function(){var a={numberOfRows:4};f.call(this,"unscramble","Unscrambler",10,a)};g.prototype=Object.create(f.prototype),g.prototype.constructor=g,g.prototype.newChallenge=function(){this.clearChallenge();var a=level.myVocabulary.randomVocabularyItems(1)[0],b=level.game.make.sprite(0,0,a.key);if(b.height>120){var c=120/b.height;b.scale.x=c,b.scale.y=c}var f={numberOfColumns:a.name.length,margin:5},g=new d("lettersBg",f);this.source=new d("lettersBg",f);var h,i,j,k,l;for(h=0;h<a.name.length;h++)i=a.name.charAt(h),l=i.toLowerCase().charCodeAt(0),j=level.game.make.text(0,0,i),j.code=l," "===i?(k=new e("spaceBg",2),k.addElement(j)):(k=new e("letterBg",2),j.font="Shojumaru",j.fontSize=20,j.fill="#0040FF",j.inputEnabled=!0,j.input.enableDrag(!0,!0),j.events.onDragStop.add(this.dragAndDropControl.fixLocation,this.dragAndDropControl),this.elements.push(j)),k.code=l,this.destinations.push(k),g.addElement(k);this.dragAndDropControl.addElementsToSourceRandomly(),this.mainPanel.addElement(b),this.mainPanel.addElement(g),this.mainPanel.addElement(this.source)},g.prototype.bringItemToTop=function(a){g.prototype.isPrototypeOf(a.parent)?this.addChild(a):this.addChild(a.parent.parent)},b.exports=g},{"../util/GridLayoutPanel":51,"../util/VerticalLayoutPanel":61,"./dragAndDrop/DragAndDropChallenge":16}],16:[function(a,b,c){var d=a("../../util/VerticalLayoutPopUp"),e=a("../../util/VerticalLayoutPanel"),f=a("../../englishChallenges/EnglishChallenge"),g=a("./DragAndDropController"),h=a("../../util/Button"),i=function(a,b,c){d.call(this,"popUpBg",null,b),this.englishChallenge=new f(a,b,c),this.destinations=[],this.elements=[],this.dragAndDropControl=new g(this),this.mainPanel=new e("popUpPanelBg"),this.addElement(this.mainPanel),this.confirmButton=new h("Confirm",this.confirm,this),this.addElement(this.confirmButton)};i.prototype=Object.create(d.prototype),i.prototype.constructor=i,i.prototype.confirm=function(){return this.dragAndDropControl.emptyDestinations()?void this.englishChallenge.incomplete(this):this.dragAndDropControl.elementsInCorrectDestination()?(this.englishChallenge.success(),void this.close()):void this.englishChallenge.failure(this)},i.prototype.clearChallenge=function(){this.mainPanel.children.length>0&&this.mainPanel.removeAllElements(),this.elements.length>0&&this.elements.splice(0,this.elements.length),this.destinations.length>0&&this.destinations.splice(0,this.destinations.length)},b.exports=i},{"../../englishChallenges/EnglishChallenge":13,"../../util/Button":48,"../../util/VerticalLayoutPanel":61,"../../util/VerticalLayoutPopUp":62,"./DragAndDropController":17}],17:[function(a,b,c){var d=a("../../util/Utilities"),e=function(a){this.container=a};e.prototype.constructor=e,e.prototype.addToADestination=function(a,b){this.container.destinations[b].restartPosition(),this.container.destinations[b].addElement(a)},e.prototype.fixLocation=function(a){var b;for(b in this.container.destinations)if(a.overlap(this.container.destinations[b])&&0===this.container.destinations[b].children.length)return void this.addToADestination(a,b);this.returnElementToSource(a)},e.prototype.elementsInCorrectDestination=function(){var a;for(a in this.container.destinations)if(this.container.destinations[a].children[0].code!==this.container.destinations[a].code)return!1;return!0},e.prototype.emptyDestinations=function(){var a;for(a in this.container.destinations)if(void 0===this.container.destinations[a].children[0])return!0;return!1},e.prototype.returnElementToSource=function(a){a.x=a.sourceX,a.y=a.sourceY,this.container.source.addChild(a)},e.prototype.addElementsToSourceRandomly=function(){var a,b=new d,c=b.randomIndexesArray(this.container.elements.length);for(a in c)this.container.source.addElement(this.container.elements[c[a]]),this.container.elements[c[a]].sourceX=this.container.elements[c[a]].x,this.container.elements[c[a]].sourceY=this.container.elements[c[a]].y},b.exports=e},{"../../util/Utilities":59}],18:[function(a,b,c){var d=a("../../util/PopUp"),e=a("../../util/GridLayoutPanel"),f=a("./MenuItem"),g=a("../WordUnscramble"),h=a("../ContextGroups"),i=a("../ImageWordMatch"),j=function(){d.call(this,"popUpBg",null,"English Challenges");var a={numberOfRows:2,numberOfColumns:4};this.panel=new e("popUpPanelBg",a),this.panel.x=20,this.panel.y=80,this.addChild(this.panel),this.createGames()};j.prototype=Object.create(d.prototype),j.prototype.constructor=j,j.prototype.createGames=function(){var a=[];a.push(new g),a.push(new h),a.push(new i);var b;for(b in a)this.panel.addElement(new f(a[b],this)),level.game.add.existing(a[b])},b.exports=j},{"../../util/GridLayoutPanel":51,"../../util/PopUp":57,"../ContextGroups":12,"../ImageWordMatch":14,"../WordUnscramble":15,"./MenuItem":19}],19:[function(a,b,c){var d=a("../../items/ItemGroupView"),e=function(a,b){d.call(this,a.englishChallenge.iconKey,"Play",b),this.challenge=a,this.updateScoreText(),this.setTitle(a.englishChallenge.name)};e.prototype=Object.create(d.prototype),e.prototype.constructor=e,e.prototype.buttonAction=function(){this.parentView.close(),this.challenge.newChallenge(),this.challenge.open()},e.prototype.updateScoreText=function(){this.setAuxText("+ $"+this.challenge.englishChallenge.score)},b.exports=e},{"../../items/ItemGroupView":23}],20:[function(a,b,c){var d=a("./VocabularyItem"),e=function(a,b,c,e,f,g,h,i){d.call(this,a,b,c,e,h,g);var j=50/this.height;this.scale.y=j,this.scale.x=j,this.descriptionTemp=f,this.interactionManager=i};e.prototype=Object.create(d.prototype),e.prototype.constructor=e,e.prototype.pickUp=function(){this.kill(),this.interactionManager.openDialogs()},e.prototype.openActivity=function(){this.interactionManager.openDialogs()},b.exports=e},{"./VocabularyItem":25}],21:[function(a,b,c){var d=a("./Item"),e=2,f=100,g=function(a,b,c){d.call(this,a,b,"healthPack"+c,c*e),this.body.gravity.y=f,this.maxIncreasing=c,this.name="Health Pack",this.description="+ "+c+" Health Level",this.category="healthPacks"};g.prototype=Object.create(d.prototype),g.prototype.constructor=g,g.prototype.pickUp=function(){this.kill()},g.prototype.use=function(){this.alive||this.revive(),this.x=level.player.x,this.y=50,level.addHealthPack(this)},b.exports=g},{"./Item":22}],22:[function(a,b,c){var d=.7+.2*Math.random(),e=function(a,b,c,e){Phaser.Sprite.call(this,level.game,a,b,c),this.anchor.set(0,1),level.game.physics.arcade.enable(this),this.body.bounce.y=d,this.body.collideWorldBounds=!0,this.price=e,this.name="",this.description=""};e.prototype=Object.create(Phaser.Sprite.prototype),e.prototype.constructor=e,e.prototype.setDescription=function(a){this.description=a},e.prototype.setName=function(a){this.name=a},b.exports=e},{}],23:[function(a,b,c){var d=a("../util/VerticalLayoutPanel"),e=a("../util/Button"),f=function(a,b,c){d.call(this,"itemGroupBg",2),this.icon=level.game.make.sprite(0,0,a);var f=50/this.icon.height;this.icon.scale.y=f,this.auxText=level.game.make.text(this.icon.width-5,this.icon.height,""),this.auxText.font="Arial",this.auxText.fontSize=20,this.auxText.fill="#FFFF99",this.auxText.stroke="#000000",this.auxText.strokeThickness=2,this.auxText.setShadow(1,1,"rgba(0,0,0,0.5)",5),this.auxText.anchor.set(1,.8),this.icon.addChild(this.auxText),this.title=level.game.make.text(0,0,"Title"),this.title.font="Arial",this.title.fontSize=20,this.title.fill="#0040FF",this.description=level.game.make.text(0,0,"Des 1 \n Des 2"),this.description.font="Arial",this.description.fontSize=12,this.description.fill="#000000",this.button=new e(b,this.buttonAction,this),this.addElement(this.title),this.addElement(this.icon),this.addElement(this.description),this.addElement(this.button),this.parentView=c};f.prototype=Object.create(d.prototype),f.prototype.constructor=f,f.prototype.buttonAction=function(){},f.prototype.setDescription=function(a){this.description.text=a,this.description.x=this.width/2-this.description.width/2},f.prototype.setTitle=function(a){this.title.text=a,this.title.x=this.width/2-this.title.width/2},f.prototype.setAuxText=function(a){this.auxText.text=a},b.exports=f},{"../util/Button":48,"../util/VerticalLayoutPanel":61}],24:[function(a,b,c){var d=a("../util/PopUp"),e=a("../util/GridLayoutPanel"),f=a("../util/Button"),g=a("./HealthPack"),h=a("./weapons/Revolver"),i=a("./weapons/MachineGun"),j=function(a,b,c){d.call(this,"popUpBg",null,c),this.items=[];var g,h,i=20;for(g=0;g<a.length;g++)h=new f(a[g],this.showTab,this,"tabBg"),h.category=b[g],h.x=i,h.y=58,i+=h.width+2,this.addChild(h),this.items[b[g]]=[];var j={numberOfColumns:4,numberOfRows:2};this.panel=new e("popUpPanelBg",j),this.panel.x=20,this.panel.y=100,this.createItemGroups(),this.firstCategory=b[0],this.addChild(this.panel)};j.prototype=Object.create(d.prototype),j.prototype.constructor=j,j.prototype.showTab=function(a){var b;for(b in this.panel.children)this.panel.children[b].kill();this.panel.removeAllElements(),this.fillPanel(a.category)},j.prototype.fillPanel=function(a){var b;for(b in this.items[a])this.items[a][b].alive||this.items[a][b].revive(),this.panel.addElement(this.items[a][b])},j.prototype.createItemGroups=function(){var a=new h(0,0,!1);this.addItem(a);var b=new i(0,0,!1);this.addItem(b);var c=new g(0,0,5);this.addItem(c),c=new g(0,0,20),this.addItem(c)},j.prototype.open=function(){this.panel.removeAllElements(),this.fillPanel(this.firstCategory),d.prototype.open.call(this)},b.exports=j},{"../util/Button":48,"../util/GridLayoutPanel":51,"../util/PopUp":57,"./HealthPack":21,"./weapons/MachineGun":34,"./weapons/Revolver":35}],25:[function(a,b,c){var d=a("./Item"),e=a("../util/VerticalLayoutPopUp"),f=function(a,b,c,e,f,g,h){d.call(this,a,b,c,0),this.categoryIndex=g,this.name=e,this.description=f,this.makeDialog(),this.openImmediately=h||!1};f.prototype=Object.create(d.prototype),f.prototype.constructor=f,f.prototype.use=function(){this.popUp.open()},f.prototype.makeDialog=function(){this.popUp=new e("mediumPopUpBg",null,this.name);var a=level.game.make.sprite(0,0,this.key);if(a.height>200){var b=200/a.height;a.scale.x=b,a.scale.y=b}var c=level.game.make.text(0,0,this.description);c.font="Arial",c.fontSize=20,c.fill="#000000",c.align="center",this.popUp.addElement(a),this.popUp.addElement(c),level.game.add.existing(this.popUp)},b.exports=f},{"../util/VerticalLayoutPopUp":62,"./Item":22}],26:[function(a,b,c){var d=a("./VocabularyItem"),e=function(a,b,c,e,f,g){d.call(this,a,b,c,e,f,g)};e.prototype=Object.create(d.prototype),e.prototype.constructor=e,e.prototype.pickUp=function(){level.vocabularyItems.remove(this),level.addObject(this)},b.exports=e},{"./VocabularyItem":25}],27:[function(a,b,c){var d=a("../ItemsPopUp"),e=a("./InventoryItem"),f=function(){var a=["Weapons","Health Packs"],b=["weapons","healthPacks"];d.call(this,a,b,"Inventory")};f.prototype=Object.create(d.prototype),f.prototype.constructor=f,f.prototype.addItem=function(a){void 0===this.items[a.category][a.key]&&(this.items[a.category][a.key]=new e(a,this)),this.items[a.category][a.key].amountAvailable++,this.items[a.category][a.key].updateAmountAvailableText()},b.exports=f},{"../ItemsPopUp":24,"./InventoryItem":28}],28:[function(a,b,c){var d=a("../ItemGroupView"),e=function(a,b){d.call(this,a.key+"Icon","Use",b),this.item=a,this.amountAvailable=0,this.updateAmountAvailableText(),this.setTitle(this.item.name),this.setDescription(this.item.description)};e.prototype=Object.create(d.prototype),e.prototype.constructor=e,e.prototype.buttonAction=function(){this.amountAvailable>0?(this.item.use(),this.amountAvailable--,this.updateAmountAvailableText(),this.parentView.close()):level.showErrorMessage("You do not have more of this item.",this.parent)},e.prototype.updateAmountAvailableText=function(){this.setAuxText("x "+this.amountAvailable)},b.exports=e},{"../ItemGroupView":23}],29:[function(a,b,c){var d=a("../ItemsPopUp"),e=a("./StoreItem"),f=function(){var a=["Weapons","Health Packs","Objects"],b=["weapons","healthPacks","objects"];d.call(this,a,b,"Store"),this.cash=level.game.make.text(this.width-20,58,"Cash: $ "+level.player.score),this.cash.font="Shojumaru",this.cash.fontSize=20,this.cash.fill="#FFFFFF",this.cash.anchor.set(1,0),this.addChild(this.cash)};f.prototype=Object.create(d.prototype),f.prototype.constructor=f,f.prototype.addItem=function(a){void 0===this.items[a.category][a.key]&&(this.items[a.category][a.key]=new e(a,this))},b.exports=f},{"../ItemsPopUp":24,"./StoreItem":30}],30:[function(a,b,c){var d=a("../ItemGroupView"),e=function(a,b){d.call(this,a.key+"Icon","Buy",b),this.item=a,this.updatePriceText(),this.setTitle(this.item.name),this.setDescription(this.item.description)};e.prototype=Object.create(d.prototype),e.prototype.constructor=e,e.prototype.updatePriceText=function(){this.setAuxText("$ "+this.item.price)},e.prototype.buttonAction=function(){var a=level.player.buyItem(this.item);a?(this.item.use(),level.updateScoreText(),level.showSuccessMessage("Successful Purchase!",this.parent)):level.showErrorMessage("Not enough money.",this.parent)},b.exports=e},{"../ItemGroupView":23}],31:[function(a,b,c){var d=a("../ItemsPopUp"),e=a("./MyVocabularyItem"),f=a("../../util/Utilities"),g=function(){this.categoriesLabels=["Places","Family","Transport","Others"],this.categories=["places","family","transport","others"],d.call(this,this.categoriesLabels,this.categories,"My Vocabulary")};g.prototype=Object.create(d.prototype),g.prototype.constructor=g,g.prototype.addItem=function(a){this.items[this.categories[a.categoryIndex]].push(new e(a,this))},g.prototype.createItemGroups=function(){},g.prototype.randomVocabularyItems=function(a){var b,c=new f,d=this.randomCategory(a),e=c.randomIndexesArray(this.items[d].length),g=[];for(b=0;a>b;b++)g.push(this.items[d][e[b]].item);return g},g.prototype.randomCategory=function(a){for(var b,c,d=!0;d;)b=level.game.rnd.integerInRange(0,this.categories.length-1),c=this.categories[b],this.items[c].length>=a&&(d=!1);return c},b.exports=g},{"../../util/Utilities":59,"../ItemsPopUp":24,"./MyVocabularyItem":32}],32:[function(a,b,c){var d=a("../../util/VerticalLayoutPanel"),e=a("../../util/Button"),f=function(a,b){d.call(this,"itemGroupBg",2),this.item=a,this.icon=level.game.make.sprite(0,0,this.item.key);var c=50/this.icon.height;this.icon.scale.x=c,this.icon.scale.y=c,this.title=level.game.make.text(0,0,this.item.name),this.title.font="Arial",this.title.fontSize=20,this.title.fill="#0040FF",this.button=new e("Show",this.buttonAction,this),this.addElement(this.title),this.addElement(this.icon),this.addElement(this.button),this.parentView=b};f.prototype=Object.create(d.prototype),f.prototype.constructor=f,f.prototype.buttonAction=function(){this.item.use()},b.exports=f},{"../../util/Button":48,"../../util/VerticalLayoutPanel":61}],33:[function(a,b,c){var d=function(a,b){Phaser.Sprite.call(this,level.game,0,0,b),this.power=a,level.game.physics.arcade.enable(this),this.anchor.setTo(0,.5),this.checkWorldBounds=!0,this.outOfBoundsKill=!0,this.exists=!1};d.prototype=Object.create(Phaser.Sprite.prototype),d.prototype.constructor=d,b.exports=d},{}],34:[function(a,b,c){var d=a("./Weapon"),e=30,f="machineGun",g="bullet2",h=1,i=400,j=200,k=2,l=30,m=function(a,b,c){d.call(this,a,b,e,f,g,h,i,j,k,c,l),this.name="Machine Gun"};m.prototype=Object.create(d.prototype),m.prototype.constructor=m,b.exports=m},{"./Weapon":36}],35:[function(a,b,c){var d=a("./Weapon"),e=20,f="revolver",g="bullet1",h=1,i=300,j=250,k=1,l=20,m=function(a,b,c){d.call(this,a,b,e,f,g,h,i,j,k,c,l),this.name="Revolver"};m.prototype=Object.create(d.prototype),m.prototype.constructor=m,b.exports=m},{"./Weapon":36}],36:[function(a,b,c){var d=a("../Item"),e=a("./Bullet"),f=0,g=1,h=function(a,b,c,f,g,h,i,j,k,l,m){d.call(this,a,b,f,m),this.anchor.set(.5,0),this.numberOfBullets=c,this.power=k,this.bullets=level.game.add.group();for(var n=0;n<this.numberOfBullets;n++)this.bullets.add(new e(k,g));this.nextFire=h,this.bulletSpeed=i,this.fireRate=j,this.infinite=l,this.description="Damage: "+this.power+"\nAmmo: "+this.numberOfBullets,this.category="weapons"};h.prototype=Object.create(d.prototype),h.prototype.constructor=h,h.prototype.fire=function(a,b){var c=b||this.y;level.game.time.time>this.nextFire&&(this.infinite||this.numberOfBullets>0)&&(this.currentBullet=this.bullets.getFirstExists(!1),this.currentBullet&&(this.currentBullet.reset(this.x,this.y),this.currentBullet.rotation=level.game.physics.arcade.angleToXY(this.currentBullet,a,c),this.currentBullet.body.velocity.x=Math.cos(this.currentBullet.rotation)*this.bulletSpeed,this.currentBullet.body.velocity.y=Math.sin(this.currentBullet.rotation)*this.bulletSpeed,this.nextFire=level.game.time.time+this.fireRate,this.numberOfBullets--))},h.prototype.updateCoordinates=function(a,b){this.x=a,this.y=b},h.prototype.use=function(){this.alive||this.revive(),level.player.useWeapon(this),level.updateAmmoText()},h.prototype.addBullets=function(a){this.numberOfBullets+=a},h.prototype.killWeapon=function(){this.bullets.removeAll(),this.kill()},h.prototype.pointToRight=function(){this.frame=f},h.prototype.pointToLeft=function(){this.frame=g},b.exports=h},{"../Item":22,"./Bullet":33}],37:[function(a,b,c){var d=function(a){};d.prototype.preload=function(){this.load.image("loading","assets/images/loading.png"),this.load.image("load_progress_bar_dark","assets/images/progress_bar_bg.png"),this.load.image("load_progress_bar","assets/images/progress_bar_fg.png");
},d.prototype.create=function(){this.game.input.maxPointers=1,this.game.state.start("preloader")},b.exports=d},{}],38:[function(a,b,c){var d=function(a){};d.prototype.create=function(){var a=this.game.add.text(this.game.camera.width/2,this.game.camera.height/2,"New Game");a.font="Arial",a.fontSize=50,a.fontWeight="bold",a.fill="#0040FF",a.anchor.set(.5),a.inputEnabled=!0,a.events.onInputDown.add(this.newGame,this)},d.prototype.newGame=function(){this.game.state.start("levelOneIntro")},b.exports=d},{}],39:[function(a,b,c){var d=function(a){this.ready=!1};d.prototype.preload=function(){this.displayLoadScreen(),this.loadAssets()},d.prototype.displayLoadScreen=function(){var a=this.game.camera.width/2,b=this.game.camera.height/2;this.loading=this.game.add.sprite(a,b-20,"loading"),this.loading.anchor.setTo(.5,.5),this.barBg=this.game.add.sprite(a,b+40,"load_progress_bar_dark"),this.barBg.anchor.setTo(.5,.5),this.bar=this.game.add.sprite(a-192,b+40,"load_progress_bar"),this.bar.anchor.setTo(0,.5),this.load.setPreloadSprite(this.bar),this.load.onLoadComplete.addOnce(this.onLoadComplete,this)},d.prototype.loadAssets=function(){this.game.load.image("worldBg","assets/images/worldBg.png"),this.game.load.image("ground","assets/images/platform.png"),this.game.load.image("healthPack5","assets/images/healthPack5.png"),this.game.load.image("healthPack20","assets/images/healthPack20.png"),this.game.load.image("healthPack50","assets/images/healthPack50.png"),this.game.load.image("inventory_button","assets/images/inventory.png"),this.game.load.image("storeButton","assets/images/store.png"),this.game.load.image("store","assets/images/storeBig.png"),this.game.load.image("popUpBg","assets/images/popUpBg.png"),this.game.load.image("close","assets/images/close.png"),this.game.load.image("itemGroupBg","assets/images/itemGroupBg.png"),this.game.load.image("dialogBg","assets/images/dialogBg.png"),this.game.load.image("errorIcon","assets/images/errorIcon.png"),this.game.load.image("successIcon","assets/images/successIcon.png"),this.game.load.spritesheet("character","assets/sprites/character.png",64,96),this.game.load.spritesheet("wife","assets/sprites/wife.png",64,96),this.game.load.spritesheet("npc","assets/sprites/npc.png",64,96),this.game.load.spritesheet("friend","assets/sprites/npc.png",64,96),this.game.load.spritesheet("simple_enemy","assets/sprites/simple_enemy.png",64,64),this.game.load.spritesheet("strong_enemy","assets/sprites/strong_enemy.png",64,64),this.game.load.spritesheet("strongestEnemy","assets/sprites/strongestEnemy.png",80,80),this.game.load.spritesheet("jeep","assets/sprites/jeep.png",219.5,150),this.game.load.spritesheet("bus","assets/sprites/bus.png",400,180),this.game.load.spritesheet("taxi","assets/sprites/taxi.png",215,100),this.game.load.spritesheet("revolver","assets/sprites/revolver.png",30,16),this.game.load.spritesheet("machineGun","assets/sprites/machineGun.png",60,42);var a;for(a=1;2>=a;a++)this.game.load.image("bullet"+a,"assets/images/bullet"+a+".png");this.game.load.image("simpleWeapon","assets/images/revolver.png"),this.game.load.image("strongWeapon","assets/images/machineGun.png"),this.game.load.image("house","assets/images/house.png"),this.game.load.image("openDoor","assets/images/openDoor.png"),this.game.load.image("working","assets/images/working.png"),this.game.load.image("addCashButton","assets/images/addCash.png"),this.game.load.image("myVocabularyButton","assets/images/myVocabulary.png"),this.game.load.image("button","assets/images/button.png"),this.game.load.image("mother","assets/images/mother.png"),this.game.load.image("father","assets/images/father.png"),this.game.load.image("daughter","assets/images/daughter.png"),this.game.load.image("son","assets/images/son.png"),this.game.load.image("son","assets/images/friend.png"),this.game.load.image("lettersBg","assets/images/lettersBg.png"),this.game.load.image("wordsBg","assets/images/wordsBg.png"),this.game.load.image("wordBg","assets/images/wordBg.png"),this.game.load.image("spaceBg","assets/images/spaceBg.png"),this.game.load.image("letterBg","assets/images/letterBg.png"),this.game.load.image("transparent","assets/images/transparent.png"),this.game.load.image("healthBarBackground","assets/images/healthBarBackground.png"),this.game.load.image("healthBar","assets/images/healthBar.png"),this.game.load.image("healthPack5Icon","assets/icons/healthPack5Icon.png"),this.game.load.image("healthPack20Icon","assets/icons/healthPack20Icon.png"),this.game.load.image("revolverIcon","assets/icons/revolverIcon.png"),this.game.load.image("machineGunIcon","assets/icons/machineGunIcon.png"),this.game.load.image("unscramble","assets/icons/unscramble.png"),this.game.load.image("contexts","assets/icons/contexts.png"),this.game.load.image("imageWord","assets/icons/imageWord.png"),this.game.load.image("health","assets/icons/health.png"),this.game.load.image("ammo","assets/icons/ammo.png"),this.game.load.image("money","assets/icons/money.png"),this.game.load.image("popUpPanelBg","assets/images/popUpPanelBg.png"),this.game.load.image("tabBg","assets/images/tabBg.png"),this.game.load.image("contextBg","assets/images/contextBg.png"),this.game.load.image("englishChallengePanelBg","assets/images/englishChallengePanelBg.png"),this.game.load.image("imageWordBg","assets/images/imageWordBg.png"),this.game.load.image("forgive","assets/images/vocabulary/forgive.png"),this.game.load.image("bookStore","assets/images/vocabulary/bookStore.png"),this.game.load.image("playground","assets/images/vocabulary/playground.png"),this.game.load.image("zoo","assets/images/vocabulary/zoo.png"),this.game.load.image("gasStation","assets/images/vocabulary/gasStation.png"),this.game.load.image("bank","assets/images/vocabulary/bank.png"),this.game.load.image("coffeeShop","assets/images/vocabulary/coffeeShop.png"),this.game.load.image("hospital","assets/images/vocabulary/hospital.png"),this.game.load.image("school","assets/images/vocabulary/school.png"),this.game.load.image("factory","assets/images/vocabulary/factory.png"),this.game.load.image("fireStation","assets/images/vocabulary/fireStation.png"),this.game.load.image("policeStation","assets/images/vocabulary/policeStation.png"),this.game.load.image("hotel","assets/images/vocabulary/hotel.png"),this.game.load.image("superMarket","assets/images/vocabulary/superMarket.png"),this.game.load.image("orangeHouse","assets/images/vocabulary/orangeHouse.png"),this.game.load.image("greenHouse","assets/images/vocabulary/greenHouse.png"),this.game.load.image("whiteHouse","assets/images/vocabulary/whiteHouse.png"),this.game.load.image("yellowHouse","assets/images/vocabulary/yellowHouse.png"),this.game.load.image("redHouse","assets/images/vocabulary/redHouse.png"),this.game.load.image("blueHouse","assets/images/vocabulary/blueHouse.png"),this.game.load.image("nameBoard","assets/images/vocabulary/nameBoard.png"),this.game.load.image("necklace","assets/images/vocabulary/necklace.png"),this.game.load.image("necklaceBig","assets/images/vocabulary/necklaceBig.png"),this.game.load.image("necklaceIcon","assets/icons/necklaceIcon.png"),this.game.load.image("sisterMom","assets/images/vocabulary/sisterMom.png"),this.game.load.image("sisterMomBig","assets/images/vocabulary/sisterMomBig.png"),this.game.load.image("sisterMomIcon","assets/icons/sisterMomIcon.png"),this.game.load.image("brother","assets/images/vocabulary/brother.png"),this.game.load.image("brotherBig","assets/images/vocabulary/brotherBig.png"),this.game.load.image("brotherIcon","assets/icons/brotherIcon.png"),this.game.load.image("dad","assets/images/vocabulary/dad.png"),this.game.load.image("dadBig","assets/images/vocabulary/dadBig.png"),this.game.load.image("dadIcon","assets/icons/dadIcon.png"),this.game.load.image("comicBg","assets/images/comics/comicBg.png");var b;for(a=1;7>=a;a++)b="intro"+a,this.game.load.image(b,"assets/images/comics/"+b+".png");this.game.load.image("mediumPopUpBg","assets/images/mediumPopUpBg.png"),this.game.load.image("emptyRoom","assets/images/emptyRoom.png"),this.game.load.script("webfont","//ajax.googleapis.com/ajax/libs/webfont/1.4.7/webfont.js")},d.prototype.update=function(){this.ready&&(this.game.state.start("intro"),level=this.game.state.states.levelOne)},d.prototype.onLoadComplete=function(){this.ready=!0},b.exports=d},{}],40:[function(a,b,c){arguments[4][37][0].apply(c,arguments)},{dup:37}],41:[function(a,b,c){var d=a("../../util/Button"),e=8,f=7,g=300,h=function(a){};h.prototype.create=function(){var a=this.game.camera.width/2,b=this.game.camera.height/2;this.background=this.game.add.sprite(a,b,"comicBg"),this.background.anchor.set(.5,.7),this.changeComicImage("intro1"),this.currentImage=1;var c=new d("Continue",this["continue"],this);c.x=this.game.camera.width-250,c.y=this.game.camera.height-60,this.game.add.existing(c),this.game.time.events.repeat(Phaser.Timer.SECOND*e,f,this.updateComic,this),this.scripts=["Edwar gets home","He parks his car and gets into his house","Now he wants to eat something","Edwar finds a piece of paper","Someone kidnapped his family und he is now angry","He needs a weapon to defend himself","He will rescue his family, but that can be dangerous"],this.comicText=this.game.add.text(100,450,"",{font:"20px Arial",fill:"#FFFFFF"}),this.game.add.existing(this.comicText),this.showScript(0)},h.prototype["continue"]=function(){this.game.state.start("levelOne")},h.prototype.updateComic=function(){this.currentImage<f?(this.currentImage++,this.changeComicImage("intro"+this.currentImage),this.showScript(this.currentImage-1)):this["continue"]()},h.prototype.changeComicImage=function(a){var b=this.game.make.sprite(0,0,a);b.anchor.set(.5,.5),this.background.children.length>0&&this.background.removeChildren(),this.background.addChild(b)},h.prototype.showScript=function(a){this.wordIndex=0,this.comicText.text="",this.line=this.scripts[a].split(" "),this.game.time.events.repeat(g,this.line.length,this.nextWord,this)},h.prototype.nextWord=function(){this.comicText.text=this.comicText.text.concat(this.line[this.wordIndex]+" "),this.wordIndex++},b.exports=h},{"../../util/Button":48}],42:[function(a,b,c){var d=a("../../items/inventory/Inventory"),e=a("../../items/store/Store"),f=a("../../items/vocabulary/MyVocabulary"),g=a("../../items/HealthPack"),h=a("../../character/Player"),i=a("../../items/weapons/Revolver"),j=a("../../items/weapons/MachineGun"),k=a("../../character/SimpleEnemy"),l=a("../../character/StrongestEnemy"),m=a("../../character/StrongEnemy"),n=a("../../character/NPC"),o=(a("../../util/PopUp"),a("../../worldElements/InteractiveCar")),p=a("../../util/Dialog"),q=a("../../englishChallenges/menu/EnglishChallengesMenu"),r=a("../../util/ResourceBar"),s=a("../../worldElements/NameBoard"),t=a("../../items/WorldItem"),u=a("../../util/InteractionManager"),v=function(a){this.game=a};v.prototype.constructor=v,v.prototype.preload=function(){this.WORLD_WIDTH=8e3,this.WORLD_HEIGHT=500,this.GROUND_HEIGHT=this.WORLD_HEIGHT-100,level=this},v.prototype.create=function(){this.game.world.setBounds(0,0,this.WORLD_WIDTH,this.WORLD_HEIGHT),this.backgroundImage=this.game.add.tileSprite(0,0,this.WORLD_WIDTH,400,"worldBg"),this.game.physics.startSystem(Phaser.Physics.ARCADE),this.gameObjects=[],this.activePopUps=0,this.xDirection=1,this.createBackObjectsGroup(),this.createHealthPacksGroup(),this.createOtherItemsGroup(),this.createCarsGroup(),this.createNpcsGroup(),this.createEnemiesGroup(),this.addPlayer(),this.createWeaponsGroup(),this.addPlatforms(),this.addTexts(),this.addHealthBar(),this.addControls(),this.addCamera(),this.createInventory(),this.createMyVocabulary(),this.createEnglishChallengesMenu(),this.createStore(),this.updateHealthLevel()},v.prototype.updateEnemies=function(){var a;for(a=0;a<this.enemies.children.length;a++){var b=this.enemies.children[a];for(var c in b.weapons)this.game.physics.arcade.overlap(this.playerCharacters,b.weapons[c].bullets,this.bulletHitCharacter,null,this);var d=this.game.physics.arcade.distanceBetween(this.player,b);d<=b.rangeAttack?(b.stop(),b.fireToXY(this.player.x,this.player.y)):d<=b.rangeDetection&&(this.game.physics.arcade.moveToXY(b,this.player.x+b.rangeAttack,b.y),b.rotateWeapon(this.player.x,this.player.y))}},v.prototype.updateNpcs=function(){for(var a=0;a<this.npcs.children.length;a++){var b=this.npcs.children[a],c=this.game.physics.arcade.distanceBetween(this.player,b);c<=b.width&&(b.openDialogs(),this.player.x<b.x?this.player.x+=2*b.width:this.player.x-=2*b.width)}},v.prototype.update=function(){this.playerWins()&&this.nextLevel(),this.updateEnemies(),this.updateNpcs(),this.game.physics.arcade.collide(this.gameObjects,this.platforms),this.game.physics.arcade.collide(this.player,this.enemies),this.game.physics.arcade.overlap(this.player,this.healthPacks,this.collectHealthPack,null,this),this.game.physics.arcade.overlap(this.player,this.weapons,this.collectWeapon,null,this),this.game.physics.arcade.overlap(this.cars,this.enemies,this.crashEnemy,null,this),this.game.physics.arcade.overlap(this.player,this.vocabularyItems,this.collectVocabularyItem,null,this);for(var a in this.player.weapons)this.game.physics.arcade.overlap(this.enemies,this.player.weapons[a].bullets,this.bulletHitCharacter,null,this);this.cursors.left.isDown?(this.xDirection=-1,this.game.input.keyboard.isDown(Phaser.Keyboard.X)?this.player.runLeft():this.player.moveLeft()):this.cursors.right.isDown?(this.xDirection=1,this.game.input.keyboard.isDown(Phaser.Keyboard.X)?this.player.runRight():this.player.moveRight()):this.player.stop(),this.cursors.up.isDown&&this.player.body.touching.down&&this.player.jump(),this.cursors.up.isDown&&this.player.body.touching.down,this.game.input.keyboard.isDown(Phaser.Keyboard.SPACEBAR)&&(this.player.fireToXY(this.player.x+100*this.xDirection),this.updateAmmoText())},v.prototype.addHealthBar=function(){this.healthBar=new r(this.healthIcon.x+this.healthIcon.width/2+10,this.healthLevelText.y+2),this.addObject(this.healthBar),this.healthBar.fixedToCamera=!0},v.prototype.createBackObjectsGroup=function(){this.backObjects=this.game.add.group()},v.prototype.createEnemiesGroup=function(){this.enemies=this.game.add.group(),this.gameObjects.push(this.enemies)},v.prototype.createNpcsGroup=function(){this.npcs=this.game.add.group(),this.gameObjects.push(this.npcs)},v.prototype.createCarsGroup=function(){this.cars=this.game.add.group(),this.gameObjects.push(this.cars)},v.prototype.addSimpleEnemy=function(a){this.enemies.add(new k(a,this.GROUND_HEIGHT-100))},v.prototype.addStrongestEnemy=function(a){this.enemies.add(new l(a,this.GROUND_HEIGHT-100))},v.prototype.addStrongEnemy=function(a){this.enemies.add(new m(a,this.GROUND_HEIGHT-100))},v.prototype.addNPC=function(a,b,c,d,e){var f=new u(c,d,e),g=new n(a,this.GROUND_HEIGHT-100,b,f);return this.npcs.add(g),g},v.prototype.addCar=function(a,b){this.cars.add(new o(a,this.GROUND_HEIGHT,b))},v.prototype.addPlatforms=function(){this.platforms=this.game.add.group(),this.platforms.enableBody=!0,this.ground=this.platforms.create(0,this.GROUND_HEIGHT,"ground");var a=100/this.ground.height,b=this.WORLD_WIDTH/this.ground.width;this.ground.scale.setTo(b,a),this.ground.body.immovable=!0},v.prototype.addObject=function(a){this.backObjects.add(a)},v.prototype.addPlayer=function(){this.playerCharacters=this.game.add.group(),this.player=new h(this),this.playerCharacters.add(this.player),this.gameObjects.push(this.playerCharacters),this.player.useWeapon(new i(700,100,!1))},v.prototype.addPlayerCharacter=function(a){this.playerCharacters.add(a)},v.prototype.addTexts=function(){this.scoreIcon=this.game.add.sprite(this.game.camera.width-150,10,"money"),this.scoreIcon.fixedToCamera=!0,this.scoreIcon.anchor.set(.5,0),this.scoreLabel=this.game.add.text(this.scoreIcon.x,this.scoreIcon.y+this.scoreIcon.height,"Money",{fontSize:"16px",fill:"#000"}),this.scoreLabel.fixedToCamera=!0,this.scoreLabel.anchor.set(.5,0),this.scoreText=this.game.add.text(this.scoreIcon.x+60,10,""+this.player.score,{fontSize:"32px",fill:"#000"}),this.scoreText.fixedToCamera=!0,this.scoreText.anchor.set(.5,0),this.ammoIcon=this.game.add.sprite(this.game.camera.width-150,this.game.camera.height-70,"ammo"),this.ammoIcon.fixedToCamera=!0,this.ammoIcon.anchor.set(.5,0),this.ammoLabel=this.game.add.text(this.ammoIcon.x,this.ammoIcon.y+this.ammoIcon.height,"Ammo",{fontSize:"16px",fill:"#000"}),this.ammoLabel.fixedToCamera=!0,this.ammoLabel.anchor.set(.5,0),this.ammoText=this.game.add.text(this.ammoIcon.x+60,this.game.camera.height-60,""+this.player.currentWeapon.numberOfBullets,{fontSize:"32px",fill:"#000"}),this.ammoText.fixedToCamera=!0,this.ammoText.anchor.set(.5,0),this.healthIcon=this.game.add.sprite(40,10,"health"),this.healthIcon.fixedToCamera=!0,this.healthIcon.anchor.set(.5,0),this.healthLabel=this.game.add.text(this.healthIcon.x,this.healthIcon.y+this.healthIcon.height,"Health",{fontSize:"16px",fill:"#000"}),this.healthLabel.fixedToCamera=!0,this.healthLabel.anchor.set(.5,0),this.healthLevelText=this.game.add.text(this.healthIcon.x+60,16," ",{fontSize:"32px",fill:"#000"}),this.healthLevelText.fixedToCamera=!0,this.healthLevelText.anchor.set(.5,0)},v.prototype.addControls=function(){this.cursors=this.game.input.keyboard.createCursorKeys(),this.changeKey=this.input.keyboard.addKey(Phaser.Keyboard.ENTER),this.changeKey.onDown.add(this.player.nextWeapon,this.player)},v.prototype.addCamera=function(){this.game.renderer.renderSession.roundPixels=!0,this.game.camera.follow(this.player)},v.prototype.createHealthPacksGroup=function(){this.healthPacks=this.game.add.group(),this.gameObjects.push(this.healthPacks)},v.prototype.createOtherItemsGroup=function(){this.vocabularyItems=this.game.add.group(),this.gameObjects.push(this.vocabularyItems)},v.prototype.createWeaponsGroup=function(){this.weapons=this.game.add.group(),this.gameObjects.push(this.weapons)},v.prototype.createInventory=function(){this.inventory=new d(this),this.game.add.existing(this.inventory),this.inventoryButton=this.game.add.button(50,this.game.camera.height-70,"inventory_button",this.inventory.open,this.inventory),this.inventoryButton.anchor.setTo(.5,0),this.inventoryButton.fixedToCamera=!0,this.inventoryButton.input.priorityID=1,this.inventoryButtonLabel=this.game.add.text(this.inventoryButton.x,this.inventoryButton.y+this.inventoryButton.height,"Inventory",{fontSize:"16px",fill:"#000"}),this.inventoryButtonLabel.fixedToCamera=!0,this.inventoryButtonLabel.anchor.set(.5,0)},v.prototype.createStore=function(){this.store=new e(this),this.game.add.existing(this.store),this.storeButton=this.game.add.button(130,this.game.camera.height-70,"storeButton",this.store.open,this.store),this.storeButton.anchor.setTo(.5,0),this.storeButton.fixedToCamera=!0,this.storeButton.input.priorityID=1,this.storeButtonLabel=this.game.add.text(this.storeButton.x,this.storeButton.y+this.storeButton.height,"Store",{fontSize:"16px",fill:"#000"}),this.storeButtonLabel.fixedToCamera=!0,this.storeButtonLabel.anchor.set(.5,0)},v.prototype.createEnglishChallengesMenu=function(){this.englishChallengeMenu=new q,this.game.add.existing(this.englishChallengeMenu),this.addCashButton=this.game.add.button(210,this.game.camera.height-70,"addCashButton",this.englishChallengeMenu.open,this.englishChallengeMenu),this.addCashButton.anchor.setTo(.5,0),this.addCashButton.fixedToCamera=!0,this.addCashButton.input.priorityID=1,this.addCashButtonLabel=this.game.add.text(this.addCashButton.x,this.addCashButton.y+this.addCashButton.height,"Add Money",{fontSize:"16px",fill:"#000"}),this.addCashButtonLabel.fixedToCamera=!0,this.addCashButtonLabel.anchor.set(.5,0)},v.prototype.createMyVocabulary=function(){this.myVocabulary=new f(this),this.game.add.existing(this.myVocabulary),this.myVocabularyButton=this.game.add.button(320,this.game.camera.height-70,"myVocabularyButton",this.myVocabulary.open,this.myVocabulary),this.myVocabularyButton.anchor.setTo(.5,0),this.myVocabularyButton.fixedToCamera=!0,this.myVocabularyButton.input.priorityID=1,this.myVocabularyButtonLabel=this.game.add.text(this.myVocabularyButton.x,this.myVocabularyButton.y+this.myVocabularyButton.height,"My Vocabulary",{fontSize:"16px",fill:"#000"}),this.myVocabularyButtonLabel.fixedToCamera=!0,this.myVocabularyButtonLabel.anchor.set(.5,0)},v.prototype.bulletHitCharacter=function(a,b){a.decreaseHealthLevel(b.power),a.updateHealthLevel(),b.kill()},v.prototype.collectWeapon=function(a,b){this.weapons.remove(b),this.player.useWeapon(b),this.updateAmmoText()},v.prototype.crashEnemy=function(a,b){a.isStopped()||b.killCharacter()},v.prototype.collectHealthPack=function(a,b){this.player.fullHealthLevel()?this.inventory.addItem(b):this.increaseHealthLevel(b.maxIncreasing),b.pickUp()},v.prototype.collectItem=function(a,b){this.inventory.addItem(b),b.pickUp()},v.prototype.collectVocabularyItem=function(a,b){this.myVocabulary.addItem(b),b.pickUp()},v.prototype.updateAmmoText=function(){this.ammoText.text=""+this.player.currentWeapon.numberOfBullets},v.prototype.updateScoreText=function(){this.scoreText.text=""+this.player.score},v.prototype.updateHealthLevel=function(){this.player.healthLevel<=0&&this.gameOver(),this.healthLevelText.text=""+this.player.healthLevel,this.healthBar.updateResourceBarLevel(this.player.healthLevel/this.player.maxHealthLevel)},v.prototype.gameOver=function(){this.game.state.start("menu")},v.prototype.increaseHealthLevel=function(a){this.player.increaseHealthLevel(a),this.updateHealthLevel()},v.prototype.increaseScore=function(a){this.player.increaseScore(a),this.updateScoreText()},v.prototype.addHealthPack=function(a){this.healthPacks.add(a)},v.prototype.addVocabularyItem=function(a){this.vocabularyItems.add(a)},v.prototype.addRevolver=function(a,b,c){this.weapons.add(new i(a,b,c))},v.prototype.addMachineGun=function(a,b,c){this.weapons.add(new j(a,b,c))},v.prototype.pause=function(){this.game.physics.arcade.isPaused=!0},v.prototype.resume=function(){this.game.physics.arcade.isPaused=!1},v.prototype.showErrorMessage=function(a,b){var c=new p("errorIcon",a,b);this.game.add.existing(c),c.open()},v.prototype.showSuccessMessage=function(a,b){var c=new p("successIcon",a,b);this.game.add.existing(c),c.open()},v.prototype.addStaticBuilding=function(a,b){var c=level.game.make.sprite(a,this.GROUND_HEIGHT,b);return c.anchor.set(0,1),this.addObject(c),c},v.prototype.addNeighbors=function(a,b,c){var d=this.addStaticBuilding(0,b);d.x=a.x-d.width,this.addStaticBuilding(a.x+a.width,c)},v.prototype.addNameBoard=function(a,b){var c;c=new s(a,this.GROUND_HEIGHT,b),this.addObject(c)},v.prototype.playerWins=function(){},v.prototype.addEnemies=function(){var a,b,c=.75*this.firstCheckPointX;for(a=0;a<this.numberOfFightingPoints;a++){for(b=0;b<this.numberOfEnemies;b++)c+=50,this.addSimpleEnemy(c);for(b=0;b<this.numberOfStrongEnemies;b++)c+=50,this.addStrongEnemy(c);numberOfEnemies++,c+=this.checkPointsDistance}},v.prototype.addPlaces=function(){var a,b,c=this.WORLD_WIDTH/(this.placesKeys.length+2),d=0;for(a=0;a<this.placesKeys.length;a++)d>=this.housesKeys.length&&(d=0),b=new t(c*(a+1),this.GROUND_HEIGHT,this.placesKeys[a],this.placesNames[a],this.placesDescriptions[a],0),this.addVocabularyItem(b),this.addNeighbors(b,this.housesKeys[d],this.housesKeys[d+1]),d+=2,this.addNameBoard(b.x-70,this.placesNames[a]+" Street")},v.prototype.addHealthPacks=function(){var a,b=this.WORLD_WIDTH/this.numberOfFightingPoints;for(a=1;a<=this.numberOfFightingPoints;a++)this.addHealthPack(new g(b*a,10,5,this))},v.prototype.nextLevel=function(){this.game.state.start(this.nextSate)},v.prototype.playerWins=function(){return this.lastGoalAimed},b.exports=v},{"../../character/NPC":6,"../../character/Player":7,"../../character/SimpleEnemy":8,"../../character/StrongEnemy":9,"../../character/StrongestEnemy":10,"../../englishChallenges/menu/EnglishChallengesMenu":18,"../../items/HealthPack":21,"../../items/WorldItem":26,"../../items/inventory/Inventory":27,"../../items/store/Store":29,"../../items/vocabulary/MyVocabulary":31,"../../items/weapons/MachineGun":34,"../../items/weapons/Revolver":35,"../../util/Dialog":49,"../../util/InteractionManager":56,"../../util/PopUp":57,"../../util/ResourceBar":58,"../../worldElements/InteractiveCar":63,"../../worldElements/NameBoard":65}],43:[function(a,b,c){var d=a("./Level"),e=a("../../worldElements/InteractiveHouse"),f=(a("../../items/HealthPack"),a("../../util/Dialog"),a("../../util/VerticalLayoutPopUp"),a("../../util/InteractionManager")),g=(a("../../items/ClueItem"),5),h=function(a){d.call(this,a)};h.prototype=Object.create(d.prototype),h.prototype.constructor=h,h.prototype.create=function(){d.prototype.create.call(this),this.nextState="levelTwo",this.game.stage.backgroundColor="#C7D2FC",this.firstCheckPointX=1.5*this.game.camera.width,this.checkPointsDistance=this.WORLD_WIDTH/(g+1),this.lastGoalAimed=!1,this.numberOfFightingPoints=g,this.numberOfEnemies=3,this.numberOfStrongEnemies=0,this.addNPCs(),this.addObjects(),this.createPlaces(),this.addHealthPacks()},h.prototype.createWeapons=function(){this.addRevolver(3e3,this.GROUND_HEIGHT-40,!1),this.addRevolver(6e3,this.GROUND_HEIGHT-40,!1)},h.prototype.addObjects=function(){var a=(this.addStaticBuilding(5,"orangeHouse"),this.addStaticBuilding(500,"whiteHouse"));this.addNeighbors(a,"greenHouse","yellowHouse");var b=["Use the store to buy a weapon."],c=["Buy weapons"],d=["store"],g=new f(b,c,d),h=new e(1.4*this.firstCheckPointX,this.GROUND_HEIGHT,"store","Store","A building or room where things are sold",0,g);this.addVocabularyItem(h),this.addNeighbors(h,"orangeHouse","yellowHouse"),b=["Your family is now somewhere else.","Continue trying, because this game is just starting!"],c=["Your family is not here","Your family is not here"],d=["emptyRoom","emptyRoom"],g=new f(b,c,d);var i=new e(5*this.checkPointsDistance,this.GROUND_HEIGHT,"blueHouse","vocabulary name","vocabulary description",3,g);this.addVocabularyItem(i),this.addNeighbors(i,"orangeHouse","yellowHouse"),this.addCar(3.7*this.checkPointsDistance,"jeep")},h.prototype.addNPCs=function(){var a=["I know that you are looking for \nyour family.","Yor wife and children are in \nthe Big Blue House after the Zoo."],b=["I can help you","Go to Big Blue House"],c=["npc","blueHouse"];this.addNPC(this.game.camera.width/2,"npc",a,b,c)},h.prototype.createPlaces=function(){this.housesKeys=["whiteHouse","greenHouse","yellowHouse","orangeHouse"],this.placesKeys=["bookStore","playground","gasStation","zoo"],this.placesNames=["Bookstore","Playground","Gas Station","Zoo"],this.placesDescriptions=["A store that sells books","An outdoor area where children can play.","A place where gasoline for vehicles is sold","A place where many kinds of animals are \nkept so that people can see them"],this.addPlaces()},h.prototype.playerWins=function(){return this.player.x>=this.WORLD_WIDTH-this.player.width},b.exports=h},{"../../items/ClueItem":20,"../../items/HealthPack":21,"../../util/Dialog":49,"../../util/InteractionManager":56,"../../util/VerticalLayoutPopUp":62,"../../worldElements/InteractiveHouse":64,"./Level":42}],44:[function(a,b,c){var d=a("./Level"),e=(a("../../worldElements/InteractiveHouse"),a("../../items/HealthPack"),a("../../util/Dialog"),a("../../util/VerticalLayoutPopUp"),a("../../items/ClueItem")),f=a("../../character/Wife"),g=a("../../character/Friend"),h=8,i=function(a){d.call(this,a)};i.prototype=Object.create(d.prototype),i.prototype.constructor=i,i.prototype.create=function(){d.prototype.create.call(this),this.nextState="intro",this.game.stage.backgroundColor="#09061F",this.firstCheckPointX=1.5*this.game.camera.width,this.checkPointsDistance=this.WORLD_WIDTH/(h+1),this.lastGoalAimed=!1,this.numberOfFightingPoints=h,this.numberOfEnemies=2,this.numberOfStrongEnemies=3,this.addWife(),this.addFriend(this.WORLD_WIDTH-100),this.addObjects(),this.createPlaces(),this.createWeapons(),this.addHealthPacks()},i.prototype.createWeapons=function(){this.addMachineGun(600,this.GROUND_HEIGHT-40,!1),this.addRevolver(2e3,this.GROUND_HEIGHT-40,!1),this.addMachineGun(4e3,this.GROUND_HEIGHT-40,!1),this.addRevolver(6e3,this.GROUND_HEIGHT-40,!1),this.addMachineGun(7e3,this.GROUND_HEIGHT-40,!1)},i.prototype.createPlaces=function(){this.housesKeys=["yellowHouse","greenHouse","orangeHouse","whiteHouse"],this.placesKeys=["policeStation","fireStation","superMarket","hotel"],this.placesNames=["Police Station","Fire Station","Super Market","Hotel"],this.placesDescriptions=["A place where local \n police officers work","a building in which the members of a fire\n department and the equipment used to\nput out fires are located","a store where customers can buy a variety\nof foods and usually household items","a place that has rooms in which people\ncan stay especially when they are traveling"],this.addPlaces()},i.prototype.addObjects=function(){var a=new e(300,this.GROUND_HEIGHT,"sisterMom","We are closer to our children!","My Family","Daughter's drawing.",0);this.addVocabularyItem(a),this.addCar(3.7*this.checkPointsDistance,"taxi")},i.prototype.addWife=function(){this.wife=new f(this.player.x-this.player.width,this.GROUND_HEIGHT-50),this.addPlayerCharacter(this.wife)},i.prototype.playerWins=function(){return this.lastGoalAimed},i.prototype.addFriend=function(a){this.enemies.add(new g(a,this.GROUND_HEIGHT-100))},b.exports=i},{"../../character/Friend":4,"../../character/Wife":11,"../../items/ClueItem":20,"../../items/HealthPack":21,"../../util/Dialog":49,"../../util/VerticalLayoutPopUp":62,"../../worldElements/InteractiveHouse":64,"./Level":42}],45:[function(a,b,c){var d=a("./Level"),e=(a("../../items/HealthPack"),a("../../util/Dialog"),a("../../util/VerticalLayoutPopUp"),a("../../items/ClueItem")),f=6,g=function(a){d.call(this,a)};g.prototype=Object.create(d.prototype),g.prototype.constructor=g,g.prototype.create=function(){d.prototype.create.call(this),this.nextState="levelThree",this.game.stage.backgroundColor="#C2501B",this.firstCheckPointX=1.5*this.game.camera.width,this.checkPointsDistance=this.WORLD_WIDTH/(f+1),this.lastGoalAimed=!1,this.numberOfFightingPoints=f,this.numberOfEnemies=2,this.numberOfStrongEnemies=2,this.metWife=!1,this.addStrongestEnemy(this.WORLD_WIDTH-100),this.addObjects(),this.createPlaces(),this.addHealthPacks()},g.prototype.createWeapons=function(){this.addMachineGun(600,this.GROUND_HEIGHT-40,!1),this.addRevolver(2e3,this.GROUND_HEIGHT-40,!1),this.addRevolver(4e3,this.GROUND_HEIGHT-40,!1),this.addRevolver(6e3,this.GROUND_HEIGHT-40,!1),this.addMachineGun(7e3,this.GROUND_HEIGHT-40,!1)},g.prototype.addObjects=function(){var a=["That is my wife's necklace!"],b=["My wife's necklace"],c=["necklace"],d=(new InteractionManager(a,b,c),new e(300,this.GROUND_HEIGHT,"necklace","Necklace","A piece of jewelry that is worn around your neck",3));this.addVocabularyItem(d),this.addCar(3.7*this.checkPointsDistance,"bus")},g.prototype.addWife=function(){var a="Hello. I am so happy to see you again.\nBut our children are not here.\nYor friend has our daughter and \nour son.";this.wife=this.addNPC(this.checkPointsDistance*f,"wife",a)},g.prototype.createPlaces=function(){this.housesKeys=["whiteHouse","greenHouse","yellowHouse","orangeHouse"],this.placesKeys=["bank","coffeeShop","hospital","school","factory"],this.placesNames=["Bank","Coffee Shop","Hospital","School","Old Factory"],this.placesDescriptions=["An organization that keeps and lends money","A small restaurant that serves coffee and\nother drinks as well as simple foods","A place where sick or injured people\nare given medical care","A place for education; a place where\npeople go to learn","A building or group of buildings\nwhere products are made"],this.addPlaces()},b.exports=g},{"../../items/ClueItem":20,"../../items/HealthPack":21,"../../util/Dialog":49,"../../util/VerticalLayoutPopUp":62,"./Level":42}],46:[function(a,b,c){arguments[4][38][0].apply(c,arguments)},{dup:38}],47:[function(a,b,c){arguments[4][39][0].apply(c,arguments)},{dup:39}],48:[function(a,b,c){var d=function(a,b,c,d){var e=d||"button";Phaser.Sprite.call(this,level.game,0,0,e),
this.text=level.game.make.text(this.width/2,this.height/2,a),this.text.anchor.set(.5,.5),this.text.font="Shojumaru",this.text.fontSize=18,this.text.fill="#FFFFFF",this.inputEnabled=!0,this.events.onInputDown.add(b,c);var f=(this.text.width+20)/this.width;this.scale.x=f,this.addChild(this.text),this.text.scale.x=1/f};d.prototype=Object.create(Phaser.Sprite.prototype),d.prototype.constructor=d,b.exports=d},{}],49:[function(a,b,c){var d=a("./HorizontalLayoutPopUp"),e=function(a,b,c){d.call(this,"dialogBg",c,null,20),this.icon=level.game.make.sprite(0,0,a);var e;e=this.icon.width>100?this.icon.width/100:100/this.icon.width,this.icon.scale.setTo(e,e),this.message=level.game.make.text(0,0,""),this.message.font="Arial",this.message.fontSize=20,this.message.fill="#000000",this.message.text=b,this.addElement(this.icon),this.addElement(this.message)};e.prototype=Object.create(d.prototype),e.prototype.constructor=e,e.prototype.setText=function(a){this.message.text=a},b.exports=e},{"./HorizontalLayoutPopUp":55}],50:[function(a,b,c){var d=10,e=function(a,b,c,e,f,g){this.currentRow=0,this.currentColumn=0,this.numberOfColumns=a,this.numberOfRows=b,this.margin=g||d,1===a&&1===b?(this.xOrigin=0,this.yOrigin=0):(this.xOrigin=this.margin+c,this.yOrigin=this.margin+e),this.rowWidth=(f.width-c-2*this.margin)/this.numberOfColumns,this.rowHeight=(f.height-e-2*this.margin)/this.numberOfRows,this.container=f};e.prototype.constructor=e,e.prototype.addElement=function(a){if(!(this.currentColumn>=this.numberOfColumns&&(this.currentColumn=0,this.currentRow++,this.currentRow===this.numberOfRows))){var b=this.rowWidth/2-a.width/2;a.x=this.xOrigin+this.rowWidth*this.currentColumn+b;var c=this.yOrigin+this.rowHeight/2-a.height/2;a.y=this.rowHeight*this.currentRow+c,this.container.addChild(a),this.currentColumn++}},e.prototype.restartIndexes=function(){this.currentColumn=0,this.currentRow=0},b.exports=e},{}],51:[function(a,b,c){var d=a("./GridLayout"),e=1,f=1,g=function(a,b){var c=b||[],g=c.x||0,h=c.y||0;Phaser.Sprite.call(this,level.game,g,h,a),this.numberOfColumns=c.numberOfColumns||e,this.numberOfRows=c.numberOfRows||f,this.grid=new d(this.numberOfColumns,this.numberOfRows,0,0,this,c.margin)};g.prototype=Object.create(Phaser.Sprite.prototype),g.prototype.constructor=g,g.prototype.addElement=function(a){this.grid.addElement(a)},g.prototype.removeAllElements=function(){this.removeChildren(),this.grid.restartIndexes()},b.exports=g},{"./GridLayout":50}],52:[function(a,b,c){var d=a("./PopUp"),e=a("./GridLayout"),f=1,g=1,h=function(a,b,c,h){d.call(this,a,h,b),this.currentRow=0,this.currentColumn=0;var i=c||{};this.numberOfColumns=i.numberOfColumns||f,this.numberOfRows=i.numberOfRows||g,this.grid=new e(this.numberOfColumns,this.numberOfRows,0,this.title.height+this.title.y,this,i.margin)};h.prototype=Object.create(d.prototype),h.prototype.constructor=h,h.prototype.addElement=function(a){this.grid.addElement(a)},h.prototype.restartPositions=function(){this.grid.restartsIndexes()},b.exports=h},{"./GridLayout":50,"./PopUp":57}],53:[function(a,b,c){var d=10,e=function(a,b){this.margin=b||d,this.currentX=this.margin,this.parent=a};e.prototype.constructor=e,e.prototype.addElement=function(a){a.x=this.currentX,this.currentX+=a.width+this.margin,a.y=this.parent.height/2-a.height/2,this.parent.addChild(a)},e.prototype.restartPosition=function(){this.currentX=this.margin},b.exports=e},{}],54:[function(a,b,c){var d=a("./HorizontalLayout"),e=function(a,b){var c=b||[],e=c.x||0,f=c.y||0;Phaser.Sprite.call(this,level.game,e,f,a),this.layout=new d(this)};e.prototype=Object.create(Phaser.Sprite.prototype),e.prototype.constructor=e,e.prototype.addElement=function(a){this.layout.addElement(a)},b.exports=e},{"./HorizontalLayout":53}],55:[function(a,b,c){var d=a("./PopUp"),e=a("./HorizontalLayout"),f=function(a,b,c,f){d.call(this,a,b,c),this.layout=new e(this,f)};f.prototype=Object.create(d.prototype),f.prototype.constructor=f,f.prototype.addElement=function(a){this.layout.addElement(a)},f.prototype.restartPositions=function(){this.layout.restartPosition()},b.exports=f},{"./HorizontalLayout":53,"./PopUp":57}],56:[function(a,b,c){var d=a("../util/VerticalLayoutPopUp"),e=function(a,b,c){this.dialogs=[];var e,f;for(e in a){f=new d("mediumPopUpBg",null,b[e]);var g=level.game.make.sprite(0,0,c[e]),h=level.game.make.text(0,0,a[e]);h.font="Arial",h.fontSize=20,h.fill="#000000",h.align="center",f.addElement(g),f.addElement(h),this.dialogs.push(f),level.game.add.existing(f)}};e.prototype.openDialogs=function(){var a;for(a=this.dialogs.length-1;a>=0;a--)this.dialogs[a].open()},b.exports=e},{"../util/VerticalLayoutPopUp":62}],57:[function(a,b,c){var d=function(a,b,c){Phaser.Sprite.call(this,level.game,0,0,a),this.xCenter=this.width/2,this.yCenter=this.height/2,this.x=level.game.camera.width/2-this.xCenter,this.y=level.game.camera.height/2-this.yCenter,this.closeButton=level.game.make.sprite(this.width-5,5,"close"),this.closeButton.anchor.set(1,0),this.closeButton.inputEnabled=!0,this.closeButton.input.priorityID=2,this.closeButton.events.onInputDown.add(this.close,this),void 0!==c&&(this.title=level.game.make.text(this.xCenter,10,c),this.title.font="Shojumaru",this.title.fontSize=30,this.title.fill="#FFFFFF",this.title.anchor.set(.5,0),this.addChild(this.title)),this.addChild(this.closeButton),this.fixedToCamera=!0,this.visible=!1,void 0===b?this.withoutParent=!0:(this.withoutParent=!1,this.parent=b)};d.prototype=Object.create(Phaser.Sprite.prototype),d.prototype.constructor=d,d.prototype.close=function(){this.visible=!1,level.activePopUps--,0===level.activePopUps&&level.resume(),this.kill()},d.prototype.open=function(){this.alive||this.revive(),0===level.activePopUps&&level.pause(),level.activePopUps++,this.bringToTop(),this.visible=!0},d.prototype.removeAllElements=function(){var a=1;void 0!==this.title&&(a=2),this.removeChildren(a),this.restartPositions()},b.exports=d},{}],58:[function(a,b,c){var d=function(a,b,c){Phaser.Sprite.call(this,level.game,a,b,"healthBarBackground"),this.bar=level.game.make.sprite(0,0,"healthBar");var d=c||[];void 0!==d.width&&void 0!==d.height&&(this.width=d.width,this.height=d.height),this.addChild(this.bar)};d.prototype=Object.create(Phaser.Sprite.prototype),d.prototype.constructor=d,d.prototype.updateResourceBarLevel=function(a){this.bar.scale.x=a},b.exports=d},{}],59:[function(a,b,c){var d=function(){};d.prototype.randomIndexesArray=function(a){var b,c,d=[],e=[];for(c=0;a>c;c++)e.push(c);for(c=0;a>c;c++)b=level.game.rnd.integerInRange(0,e.length-1),d.push(e[b]),e.splice(b,1);return d},b.exports=d},{}],60:[function(a,b,c){var d=10,e=function(a,b,c){var e=c||0;this.margin=b||d,this.currentY=this.margin+e,this.parent=a};e.prototype.constructor=e,e.prototype.addElement=function(a){a.y=this.currentY,this.currentY+=a.height+this.margin,a.x=this.parent.width/2-a.width/2,this.parent.addChild(a)},e.prototype.restartPosition=function(){this.currentY=this.margin},b.exports=e},{}],61:[function(a,b,c){var d=a("./VerticalLayout"),e=function(a,b,c){Phaser.Sprite.call(this,level.game,0,0,a),this.layout=new d(this,b,c)};e.prototype=Object.create(Phaser.Sprite.prototype),e.prototype.constructor=e,e.prototype.addElement=function(a){this.layout.addElement(a)},e.prototype.removeAllElements=function(){this.removeChildren(),this.layout.restartPosition()},e.prototype.restartPosition=function(){this.layout.restartPosition()},b.exports=e},{"./VerticalLayout":60}],62:[function(a,b,c){var d=a("./PopUp"),e=a("./VerticalLayout"),f=function(a,b,c){d.call(this,a,b,c);var f=this.title.y+this.title.height||0;this.layout=new e(this,null,f)};f.prototype=Object.create(d.prototype),f.prototype.constructor=f,f.prototype.addElement=function(a){this.layout.addElement(a)},f.prototype.restartPositions=function(){this.layout.restartPosition()},b.exports=f},{"./PopUp":57,"./VerticalLayout":60}],63:[function(a,b,c){var d=(a("../util/PopUp"),a("../util/ResourceBar")),e=a("../util/Button"),f=400,g=500,h=3e4,i=400,j=100,k=10,l=function(a,b,c){Phaser.Sprite.call(this,level.game,a,b,c),level.game.physics.arcade.enable(this),this.body.collideWorldBounds=!0,this.anchor.set(.5,1),this.animations.add("left",[0],10,!0),this.animations.add("right",[1],10,!0),this.occupied=!1,this.stopLeftFrameIndex=0,this.stopRightFrameIndex=1,this.remainingGas=i,this.maxDistance=i,this.gasBar=new d(-(this.width-j)/2,-this.height-30,{width:j,height:k}),this.gasBar.visible=!1,this.addChild(this.gasBar),this.getOnButton=new e("Get on",this.getOn,this),this.getOnButton.x=-(this.width-this.getOnButton.width)/2,this.getOnButton.y=-this.height,this.addChild(this.getOnButton)};l.prototype=Object.create(Phaser.Sprite.prototype),l.prototype.constructor=l,l.prototype.getOn=function(){this.gasBar.visible=!0,this.getOnButton.visible=!1,level.player.onVehicle=!0,level.player.relocate(this.x,this.y-100),level.player.changeSpeed(f,g),level.player.changeGravity(h),this.occupied=!0},l.prototype.getOff=function(){this.stop(),level.player.onVehicle=!1,level.player.relocate(this.x+100,this.y-100),level.player.resetSpeed(),level.player.resetGravity(),this.occupied=!1},l.prototype.update=function(){this.occupied&&(this.body.velocity.x=level.player.body.velocity.x,this.body.velocity.x<0?(this.animations.play("left"),this.remainingGas--):this.body.velocity.x>0?(this.animations.play("right"),this.remainingGas--):level.direction>0?this.frame=this.stopRightFrameIndex:level.direction<0&&(this.frame=this.stopLeftFrameIndex),this.remainingGas<=0&&this.getOff(),this.gasBar.updateResourceBarLevel(this.remainingGas/this.maxDistance))},l.prototype.isStopped=function(){return 0===this.body.velocity.x},l.prototype.stop=function(){this.body.velocity.x=0},b.exports=l},{"../util/Button":48,"../util/PopUp":57,"../util/ResourceBar":58}],64:[function(a,b,c){var d=a("../items/VocabularyItem"),e=(a("../util/Button"),function(a,b,c,e,f,g,h){d.call(this,a,b,c,e,f,g,!0),this.interactionManager=h});e.prototype=Object.create(d.prototype),e.prototype.constructor=e,e.prototype.openActivity=function(){this.interactionManager.openDialogs()},e.prototype.pickUp=function(){this.openActivity(),level.vocabularyItems.remove(this),level.addObject(this)},b.exports=e},{"../items/VocabularyItem":25,"../util/Button":48}],65:[function(a,b,c){var d=function(a,b,c){Phaser.Sprite.call(this,level.game,a,b,"nameBoard"),this.anchor.set(.5,1),this.message=level.game.make.text(0,-this.height+10,c),this.message.font="Arial",this.message.fontSize=16,this.message.fill="#FFFFFF",this.message.anchor.set(.5,0),this.addChild(this.message)};d.prototype=Object.create(Phaser.Sprite.prototype),d.prototype.constructor=d,b.exports=d},{}]},{},[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65]);