/*! GameDevTemplateJS 0.0.1 | (c) 2015 Edwin Gamboa */ 
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=new Phaser.Game(1e3,500,Phaser.AUTO,"WOPIC"),e=a("./states/Boot"),f=a("./states/Preloader"),g=a("./states/Menu"),h=a("./states/levels/LevelOne"),i=a("./states/levels/LevelOneIntro");d.state.add("boot",e),d.state.add("preloader",f),d.state.add("menu",g),d.state.add("levelOne",h),d.state.add("levelOneIntro",i),d.state.start("boot")},{"./states/Boot":25,"./states/Menu":26,"./states/Preloader":27,"./states/levels/LevelOne":29,"./states/levels/LevelOneIntro":30}],2:[function(a,b,c){var d=150,e=250,f=100,g=100,h=.2,i=300,j=1,k=-1,l=function(a,b,c,k,l){Phaser.Sprite.call(this,a.game,b,c,k);var m=l||{};this.healthLevel=m.healthLevel||f,this.maxHealthLevel=m.maxHealthLevel||g,this.speed=m.speed||d,this.maxSpeed=m.maxSpeed||e,a.game.physics.arcade.enable(this),this.body.bounce.y=m.bounce||h,this.body.gravity.y=m.gravity||i,this.body.collideWorldBounds=!0,this.anchor.setTo(.5,.5),this.currentWeaponIndex=0,this.level=a,this.weapons=[],this.weaponsKeys=[],this.direction=j};l.prototype=Object.create(Phaser.Sprite.prototype),l.prototype.constructor=l,l.prototype.moveLeft=function(){this.direction=k,this.body.velocity.x=-this.speed,this.animations.play("left"),void 0!==this.currentWeapon&&this.currentWeapon.pointToLeft()},l.prototype.moveRight=function(){this.direction=j,this.body.velocity.x=this.speed,this.animations.play("right"),void 0!==this.currentWeapon&&this.currentWeapon.pointToRight()},l.prototype.runLeft=function(){this.direction=k,this.body.velocity.x=-this.maxSpeed,this.animations.play("left"),void 0!==this.currentWeapon&&this.currentWeapon.pointToLeft()},l.prototype.runRight=function(){this.direction=j,this.body.velocity.x=this.maxSpeed,this.animations.play("right"),void 0!==this.currentWeapon&&this.currentWeapon.pointToRight()},l.prototype.stop=function(){this.body.velocity.x=0,this.animations.stop(),this.direction>0?this.frame=this.stopRightFrameIndex:this.frame=this.stopLeftFrameIndex},l.prototype.fullHealthLevel=function(){return this.healthLevel===this.maxHealthLevel},l.prototype.increaseHealthLevel=function(a){this.healthLevel+=a,this.healthLevel>this.maxHealthLevel&&(this.healthLevel=this.maxHealthLevel)},l.prototype.decreaseHealthLevel=function(a){this.healthLevel-=a,this.healthLevel<=0&&this.killCharacter()},l.prototype.killCharacter=function(){for(var a in this.weapons)this.weapons[a].killWeapon();this.kill()},l.prototype.setHealthLevel=function(a){this.healthLevel=a},l.prototype.updateCurrentWeapon=function(a){void 0!==this.currentWeapon&&this.currentWeapon.kill(),this.currentWeapon=this.weapons[a],this.currentWeapon.alive||this.currentWeapon.revive(),this.level.game.add.existing(this.currentWeapon)},l.prototype.nextWeapon=function(){this.currentWeaponIndex++,this.currentWeaponIndex===this.weaponsKeys.length&&(this.currentWeaponIndex=0),this.updateCurrentWeapon(this.weaponsKeys[this.currentWeaponIndex])},l.prototype.addWeapon=function(a){void 0===this.weapons[a.key]&&this.weaponsKeys.push(a.key),this.weapons[a.key]=a},l.prototype.fireToXY=function(a,b){this.currentWeapon.fire(a,b)},l.prototype.relocate=function(a,b){this.x=a,this.y=b},l.prototype.useWeapon=function(a){void 0===this.weapons[a.key]?(this.addWeapon(a),this.updateCurrentWeapon(a.key),this.direction===j?this.currentWeapon.pointToRight():this.currentWeapon.pointToLeft()):this.weapons[a.key].addBullets(a.numberOfBullets)},b.exports=l},{}],3:[function(a,b,c){var d=a("../character/Character"),e=function(a,b,c,e,f,g,h,i,j){var k={healthLevel:c,maxHealthLevel:c};d.call(this,a,e,f,b,k),this.animations.add("left",[0,1],10,!0),this.animations.add("right",[2,3],10,!0),this.stopLeftFrameIndex=0,this.stopRightFrameIndex=2,this.healthLevelText=a.game.add.text(this.body.x,this.body.y-20,""+this.healthLevel,{fontSize:"12px",fill:"#000"}),this.rangeDetection=a.game.rnd.integerInRange(g,h),this.rangeAttack=a.game.rnd.integerInRange(i,j)};e.prototype=Object.create(d.prototype),e.prototype.constructor=e,e.prototype.update=function(){this.body.velocity.x>0?this.animations.play("right"):this.body.velocity.x<0&&this.animations.play("left"),this.healthLevelText.x=this.body.x,this.healthLevelText.y=this.body.y-20,this.currentWeapon.updateCoordinates(this.x,this.y)},e.prototype.updateHealhtLevelText=function(){this.healthLevel>0&&(this.healthLevelText.text=""+this.healthLevel)},e.prototype.killCharacter=function(){this.healthLevel=0,this.healthLevelText.text="",this.level.player.increaseScore(.1*this.maxHealthLevel),d.prototype.killCharacter.call(this)},e.prototype.rotateWeapon=function(a,b){this.currentWeapon.rotation=this.level.game.physics.arcade.angleToXY(this,a,b)},b.exports=e},{"../character/Character":2}],4:[function(a,b,c){var d,e=a("../character/Character");d=function(a,b,c,d,f){e.call(this,a,b,c,d),this.comicKey=f,this.animations.add("left",[0,1,2,3],10,!0),this.animations.add("right",[5,6,7,8],10,!0)},d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d},{"../character/Character":2}],5:[function(a,b,c){var d,e=250,f=300,g=300,h=a("../character/Character"),i=10;d=function(a){var b={speed:e,maxSpeed:f};h.call(this,a,32,a.game.world.height-150,"character",b),this.animations.add("left",[0,1,2,3],10,!0),this.animations.add("right",[5,6,7,8],10,!0),this.stopLeftFrameIndex=0,this.stopRightFrameIndex=5,this.score=i},d.prototype=Object.create(h.prototype),d.prototype.constructor=d,d.prototype.jump=function(){this.body.velocity.y=-350},d.prototype.crouch=function(){this.animations.stop(),this.frame=9},d.prototype.increaseScore=function(a){this.score+=a,this.level.updateScoreText()},d.prototype.decreaseScore=function(a){this.score+=a,this.level.updateScoreText()},d.prototype.updateHealhtLevelText=function(){this.level.updateHealthLevelText()},d.prototype.update=function(){void 0!==this.currentWeapon&&this.currentWeapon.updateCoordinates(this.x+25*this.direction,this.y+20)},d.prototype.killCharacter=function(){h.prototype.killCharacter.call(this)},d.prototype.changeSpeed=function(a,b){this.speed=a,this.maxSpeed=b},d.prototype.resetSpeed=function(){this.speed=e,this.maxSpeed=f},d.prototype.changeGravity=function(a){this.body.gravity.y=a},d.prototype.resetGravity=function(){this.body.gravity.y=g},d.prototype.buyItem=function(a){return this.score>=a.price?(this.score-=a.price,!0):!1},b.exports=d},{"../character/Character":2}],6:[function(a,b,c){var d=a("../character/Enemy"),e=a("../items/weapons/Revolver"),f="simple_enemy",g=5,h=200,i=700,j=50,k=300,l=function(a,b,c){d.call(this,a,f,g,b,c,h,i,j,k),this.useWeapon(new e(this,b,c,!0))};l.prototype=Object.create(d.prototype),l.prototype.constructor=l,b.exports=l},{"../character/Enemy":3,"../items/weapons/Revolver":18}],7:[function(a,b,c){var d=a("../character/Enemy"),e=a("../items/weapons/MachineGun"),f="strong_enemy",g=150,h=1e3,i=600,j=1e3,k=600,l=function(a,b,c){d.call(this,a,f,g,b,c,h,j,i,k),this.useWeapon(new e(this,b,c,!0))};l.prototype=Object.create(d.prototype),l.prototype.constructor=l,b.exports=l},{"../character/Enemy":3,"../items/weapons/MachineGun":17}],8:[function(a,b,c){var d=a("../../util/GridLayoutPopUp"),e=function(a){this.score=30;var b={numberOfColumns:3,numberOfRows:3};d.call(this,a,"inventory_background",b),this.level=a;var c=["mother","son","daughter"],e=[],f=[];this.shades=[];for(var g in c){var h=this.level.game.make.sprite(0,0,"itemGroupBackGround");h.anchor.set(.5,0);var i=this.level.game.make.sprite(0,0,c[g]);i.anchor.set(.5,0);var j=this.level.game.make.sprite(0,i.height+10,"useButtonShade");j.anchor.set(.5,0),j.code=g,this.shades.push(j),h.addChild(i),h.addChild(j);var k=this.level.game.make.text(0,0,c[g]);k.font="Arial",k.fontSize=25,k.fontWeight="bold",k.fill="#0040FF",k.inputEnabled=!0,k.input.enableDrag(!0,!0),k.events.onDragStart.add(this.bringItemToTop,this),k.events.onDragStop.add(this.fixLocation,this),k.anchor.set(.5,0),k.code=g,e.push(h),f.push(k),this.confirmButton=a.game.make.sprite(0,0,"buyButton"),this.confirmButton.anchor.set(0,1),this.confirmButton.inputEnabled=!0,this.confirmButton.input.priorityID=2,this.confirmButton.events.onInputDown.add(this.confirm,this)}for(var l in e)this.addElement(e[l]);var m,n=[];for(var o in f)n.push(o);for(var p in f)m=a.game.rnd.integerInRange(0,n.length-1),this.addElement(f[n[m]]),f[n[m]].initialX=f[n[m]].x,f[n[m]].initialY=f[n[m]].y,n.splice(m,1);this.addElement(this.confirmButton)};e.prototype=Object.create(d.prototype),e.prototype.constructor=e,e.prototype.fixLocation=function(a){for(var b in this.shades){if(a.overlap(this.shades[b])&&0===this.shades[b].children.length)return a.x=0,a.y=0,void this.shades[b].addChild(a);this.addChild(a),a.x=a.initialX,a.y=a.initialY}},e.prototype.bringItemToTop=function(a){e.prototype.isPrototypeOf(a.parent)?this.addChild(a):this.addChild(a.parent.parent)},e.prototype.confirm=function(){var a=!0;for(var b in this.shades){if(void 0===this.shades[b].children[0])return void this.level.showErrorMessage("The challenge is not complete.",this);this.shades[b].children[0].code!==b&&(a=!1)}a?(this.level.increaseScore(this.score),this.level.showSuccessMessage("Well done! You got "+this.score+" points.",this),this.close()):this.level.showErrorMessage("Sorry! Try Again.",this)},b.exports=e},{"../../util/GridLayoutPopUp":21}],9:[function(a,b,c){var d=a("../items/Item"),e=10,f=300,g=function(a,b,c,g){d.call(this,a,b,c,"healthPack"+g,g*e),this.body.gravity.y=f,this.maxIncreasing=g};g.prototype=Object.create(d.prototype),g.prototype.constructor=g,g.prototype.pickUp=function(){this.kill()},g.prototype.use=function(){this.alive||this.revive(),this.x=this.level.player.x,this.y=50,this.level.addHealthPack(this)},b.exports=g},{"../items/Item":10}],10:[function(a,b,c){var d=.7+.2*Math.random(),e=function(a,b,c,e,f){Phaser.Sprite.call(this,a.game,b,c,e),this.anchor.set(.5,.5),a.game.physics.arcade.enable(this),this.body.bounce.y=d,this.body.collideWorldBounds=!0,this.level=a,this.price=f};e.prototype=Object.create(Phaser.Sprite.prototype),e.prototype.constructor=e,b.exports=e},{}],11:[function(a,b,c){var d=function(a,b,c,d){Phaser.Sprite.call(this,a.game,0,0,"itemGroupBackGround"),this.anchor.set(.5,0),this.icon=a.game.make.sprite(0,10,b.key),this.icon.anchor.set(.5,0),this.button=a.game.make.sprite(-15,this.height-5,c),this.button.anchor.set(0,1),this.button.inputEnabled=!0,this.button.input.priorityID=2,this.button.events.onInputDown.add(this.buttonAction,this),this.message=a.game.make.text(-20,this.height-5,""+this.amountAvailable),this.message.font="Arial",this.message.fontSize=30,this.message.fontWeight="bold",this.message.fill="#0040FF",this.message.anchor.set(1,1),this.addChild(this.icon),this.addChild(this.message),this.addChild(this.button),this.parent=d,this.item=b,this.level=a};d.prototype=Object.create(Phaser.Sprite.prototype),d.prototype.constructor=d,d.prototype.buttonAction=function(){},b.exports=d},{}],12:[function(a,b,c){var d=a("../../util/GridLayoutPopUp"),e=a("../inventory/InventoryItem"),f=a("../HealthPack"),g=a("../weapons/Revolver"),h=function(a){d.call(this,a,"inventory_background"),this.level=a,this.healthPacks=[],this.items=[],this.createItemGroups()};h.prototype=Object.create(d.prototype),h.prototype.constructor=h,h.prototype.addHealthPack=function(a){5==a.maxIncreasing?(this.healthPack5Group.amountAvailable++,this.healthPack5Group.updateAmountAvailableText()):20==a.maxIncreasing?this.healthPacks[1]++:this.healthPacks[2]++},h.prototype.addItem=function(a){void 0===this.items[a.key].item&&this.items[a.key].setItem(a),this.items[a.key].amountAvailable++,this.items[a.key].updateAmountAvailableText()},h.prototype.createItemGroups=function(){var a=new f(this.level,0,0,5);this.items.healthPack5=new e(this.level,a,this),this.addElement(this.items.healthPack5);var b=new g(this.level,0,0,!1);this.items.simpleWeapon=new e(this.level,b,this),this.addElement(this.items.simpleWeapon)},h.prototype.showHealthPacks=function(){},b.exports=h},{"../../util/GridLayoutPopUp":21,"../HealthPack":9,"../inventory/InventoryItem":13,"../weapons/Revolver":18}],13:[function(a,b,c){var d=a("../../items/ItemGroupView"),e=function(a,b,c){d.call(this,a,b,"useOneButton",c),this.amountAvailable=0,this.updateAmountAvailableText()};e.prototype=Object.create(d.prototype),e.prototype.constructor=e,e.prototype.buttonAction=function(){this.amountAvailable>0&&(this.item.use(),this.amountAvailable--,this.updateAmountAvailableText(),this.parent.close())},e.prototype.updateAmountAvailableText=function(){this.message.text=""+this.amountAvailable},b.exports=e},{"../../items/ItemGroupView":11}],14:[function(a,b,c){var d=a("../../util/GridLayoutPopUp"),e=a("../store/StoreItem"),f=a("../HealthPack"),g=a("../weapons/Revolver"),h=function(a){d.call(this,a,"inventory_background"),this.level=a,this.healthPacks=[],this.items=[],this.createItemGroups()};h.prototype=Object.create(d.prototype),h.prototype.constructor=h,h.prototype.addHealthPack=function(a){5==a.maxIncreasing?(this.healthPack5Group.amountAvailable++,this.healthPack5Group.updateAmountAvailableText()):20==a.maxIncreasing?this.healthPacks[1]++:this.healthPacks[2]++},h.prototype.addItem=function(a){void 0===this.items[a.key].item&&this.items[a.key].setItem(a),this.items[a.key].amountAvailable++,this.items[a.key].updateAmountAvailableText()},h.prototype.createItemGroups=function(){var a=new f(this.level,0,0,5);this.items.healthPack5=new e(this.level,a,this),this.addElement(this.items.healthPack5);var b=new g(this.level,0,0,!1);this.items.simpleWeapon=new e(this.level,b,this),this.addElement(this.items.simpleWeapon)},h.prototype.showHealthPacks=function(){},b.exports=h},{"../../util/GridLayoutPopUp":21,"../HealthPack":9,"../store/StoreItem":15,"../weapons/Revolver":18}],15:[function(a,b,c){var d=a("../../items/ItemGroupView"),e=function(a,b,c){d.call(this,a,b,"buyButton",c),this.updatePriceText()};e.prototype=Object.create(d.prototype),e.prototype.constructor=e,e.prototype.updatePriceText=function(){this.message.text=this.item.price},e.prototype.buttonAction=function(){var a=this.level.player.buyItem(this.item);a?(this.item.use(),this.level.updateScoreText(),this.level.showSuccessMessage("Successful Purchase!",this.parent)):this.level.showErrorMessage("Not enough money.",this.parent)},b.exports=e},{"../../items/ItemGroupView":11}],16:[function(a,b,c){var d;d=function(a,b,c){Phaser.Sprite.call(this,a.game,0,0,c),this.power=b,a.game.physics.arcade.enable(this),this.anchor.setTo(0,.5),this.checkWorldBounds=!0,this.outOfBoundsKill=!0,this.exists=!1},d.prototype=Object.create(Phaser.Sprite.prototype),d.prototype.constructor=d,b.exports=d},{}],17:[function(a,b,c){var d=a("../weapons/Weapon"),e=30,f="machineGunSprite",g="bullet2",h=1,i=700,j=100,k=10,l=100,m=function(a,b,c,m){d.call(this,a,b,c,e,f,g,h,i,j,k,m,l)};m.prototype=Object.create(d.prototype),m.prototype.constructor=m,b.exports=m},{"../weapons/Weapon":19}],18:[function(a,b,c){var d=a("../weapons/Weapon"),e=20,f="revolverSprite",g="bullet1",h=0,i=400,j=250,k=1,l=20,m=function(a,b,c,m){d.call(this,a,b,c,e,f,g,h,i,j,k,m,l)};m.prototype=Object.create(d.prototype),m.prototype.constructor=m,b.exports=m},{"../weapons/Weapon":19}],19:[function(a,b,c){var d=a("../Item"),e=a("../weapons/Bullet"),f=0,g=1,h=function(a,b,c,f,g,h,i,j,k,l,m,n){d.call(this,a,b,c,g,n),this.anchor.set(.5,0),this.numberOfBullets=f,this.power=l,this.bullets=a.game.add.group();for(var o=0;o<this.numberOfBullets;o++)this.bullets.add(new e(a,l,h));this.nextFire=i,this.bulletSpeed=j,this.fireRate=k,this.level=a,this.infinite=m};h.prototype=Object.create(d.prototype),h.prototype.constructor=h,h.prototype.fire=function(a,b){var c=b||this.y;this.level.game.time.time>this.nextFire&&(this.infinite||this.numberOfBullets>0)&&(this.currentBullet=this.bullets.getFirstExists(!1),this.currentBullet&&(this.currentBullet.reset(this.x,this.y),this.currentBullet.rotation=this.level.game.physics.arcade.angleToXY(this.currentBullet,a,c),this.currentBullet.body.velocity.x=Math.cos(this.currentBullet.rotation)*this.bulletSpeed,this.currentBullet.body.velocity.y=Math.sin(this.currentBullet.rotation)*this.bulletSpeed,this.nextFire=this.level.game.time.time+this.fireRate,this.numberOfBullets--))},h.prototype.updateCoordinates=function(a,b){this.x=a,this.y=b},h.prototype.use=function(){this.alive||this.revive(),this.level.player.useWeapon(this),this.level.updateAmmoText()},h.prototype.addBullets=function(a){this.numberOfBullets+=a},h.prototype.killWeapon=function(){this.bullets.removeAll(),this.kill()},h.prototype.pointToRight=function(){this.frame=f},h.prototype.pointToLeft=function(){this.frame=g},b.exports=h},{"../Item":10,"../weapons/Bullet":16}],20:[function(a,b,c){var d=a("../util/PopUp"),e=function(a,b,c,e){d.call(this,a,"dialog",e),this.icon=a.game.make.sprite(this.xOrigin,this.yCenter,b),this.icon.anchor.set(0,.5),this.message=a.game.make.text(this.xOrigin+this.icon.width+10,this.yCenter,""),this.message.font="Arial",this.message.fontSize=20,this.message.fill="#000000",this.message.anchor.set(0,.5),this.message.text=c,this.addChild(this.message),this.addChild(this.icon)};e.prototype=Object.create(d.prototype),e.prototype.constructor=e,e.prototype.setText=function(a){this.message.text=a},b.exports=e},{"../util/PopUp":22}],21:[function(a,b,c){var d=5,e=3,f=10,g=a("../util/PopUp"),h=function(a,b,c){g.call(this,a,b),this.level=a,this.currentRow=0,this.currentColumn=0;var h=c||{};this.numberOfColumns=h.numberOfColumns||d,this.numberOfRows=h.numberOfRows||e,this.rowWidth=(this.width-f*this.numberOfColumns)/this.numberOfColumns,this.rowHeight=(this.height-f*this.numberOfRows)/this.numberOfRows};h.prototype=Object.create(g.prototype),h.prototype.constructor=h,h.prototype.addElement=function(a){this.currentColumn>=this.numberOfColumns&&(this.currentColumn=0,this.currentRow++),a.x=this.xOrigin+this.rowWidth/2+(this.rowWidth+f)*this.currentColumn;var b=this.rowHeight/2-a.height/2;a.y=this.yOrigin+(this.rowHeight+f)*this.currentRow+b,this.addChild(a),this.currentColumn++},b.exports=h},{"../util/PopUp":22}],22:[function(a,b,c){var d=10,e=function(a,b,c){Phaser.Sprite.call(this,a.game,a.game.camera.width/2,a.game.camera.height/2,b),this.anchor.set(.5,.5),this.xOrigin=-this.width/2+d,this.yOrigin=-this.height/2+d,this.xCenter=0,this.yCenter=0,this.closeButton=a.game.make.sprite(-this.xOrigin,this.yOrigin,"close"),this.closeButton.anchor.set(.5),this.closeButton.inputEnabled=!0,this.closeButton.input.priorityID=2,this.closeButton.events.onInputDown.add(this.close,this),this.addChild(this.closeButton),this.fixedToCamera=!0,this.visible=!1,void 0===c?this.withoutParent=!0:(this.withoutParent=!1,this.parent=c),this.level=a};e.prototype=Object.create(Phaser.Sprite.prototype),e.prototype.constructor=e,e.prototype.close=function(){this.visible=!1,this.withoutParent&&this.level.resume(),this.kill()},e.prototype.open=function(){this.alive||this.revive(),this.level.pause(),this.bringToTop(),this.visible=!0},b.exports=e},{}],23:[function(a,b,c){var d=(a("../util/PopUp"),400),e=500,f=3e4,g=function(a,b,c,d){Phaser.Sprite.call(this,a.game,b,c,d),this.anchor.set(0,0),this.getOnButton=a.game.make.sprite(this.width/2,-this.height,"openDoor"),this.getOnButton.anchor.set(.5),this.getOnButton.inputEnabled=!0,this.getOnButton.input.priorityID=2,this.getOnButton.events.onInputDown.add(this.getOn,this),this.addChild(this.getOnButton),a.game.physics.arcade.enable(this),this.body.collideWorldBounds=!0,this.anchor.set(.5,1),this.animations.add("left",[0],10,!0),this.animations.add("right",[1],10,!0),this.level=a,this.occupied=!1};g.prototype=Object.create(Phaser.Sprite.prototype),g.prototype.constructor=g,g.prototype.getOn=function(){this.level.player.relocate(this.x,this.y-100),this.level.player.changeSpeed(d,e),this.level.player.changeGravity(f),this.occupied=!0},g.prototype.update=function(){this.occupied&&(this.body.velocity.x=this.level.player.body.velocity.x,this.body.velocity.x<0?this.animations.play("left"):this.animations.play("right"))},g.prototype.isStopped=function(){return 0===this.body.velocity.x},b.exports=g},{"../util/PopUp":22}],24:[function(a,b,c){var d=a("../items/store/Store"),e=function(a,b,c,d){Phaser.Sprite.call(this,a.game,b,c,d),this.anchor.set(0,0),this.openDoorButton=a.game.make.sprite(this.width/2,-this.height/2,"openDoor"),this.openDoorButton.anchor.set(.5),this.openDoorButton.inputEnabled=!0,this.openDoorButton.input.priorityID=2,this.openDoorButton.events.onInputDown.add(this.openActivity,this),this.addChild(this.openDoorButton),this.level=a};e.prototype=Object.create(Phaser.Sprite.prototype),e.prototype.constructor=e,e.prototype.openActivity=function(){var a=new d(this.level);this.level.game.add.existing(a),a.open()},b.exports=e},{"../items/store/Store":14}],25:[function(a,b,c){var d;d=function(a){},d.prototype={preload:function(){this.load.image("loading","assets/images/loading.png"),this.load.image("load_progress_bar_dark","assets/images/progress_bar_bg.png"),this.load.image("load_progress_bar","assets/images/progress_bar_fg.png")},create:function(){this.game.input.maxPointers=1,this.game.state.start("preloader")}},b.exports=d},{}],26:[function(a,b,c){var d;d=function(a){},d.prototype={create:function(){var a=this.game.add.text(this.game.camera.width/2,this.game.camera.height/2,"New Game");a.font="Arial",a.fontSize=50,a.fontWeight="bold",a.fill="#0040FF",a.anchor.set(.5),a.inputEnabled=!0,a.events.onInputDown.add(this.newGame,this)},newGame:function(){this.game.state.start("levelOneIntro")}},b.exports=d},{}],27:[function(a,b,c){var d;d=function(a){this.ready=!1},d.prototype={preload:function(){this.displayLoadScreen(),this.loadAssets()},displayLoadScreen:function(){var a=this.game.camera.width/2,b=this.game.camera.height/2;this.loading=this.game.add.sprite(a,b-20,"loading"),this.loading.anchor.setTo(.5,.5),this.barBg=this.game.add.sprite(a,b+40,"load_progress_bar_dark"),this.barBg.anchor.setTo(.5,.5),this.bar=this.game.add.sprite(a-192,b+40,"load_progress_bar"),this.bar.anchor.setTo(0,.5),this.load.setPreloadSprite(this.bar),this.load.onLoadComplete.addOnce(this.onLoadComplete,this)},loadAssets:function(){this.game.load.image("ground","assets/images/platform.png"),this.game.load.image("healthPack5","assets/images/healthPack5.png"),this.game.load.image("healthPack20","assets/images/healthPack20.png"),this.game.load.image("healthPack50","assets/images/healthPack50.png"),this.game.load.image("useOneButton","assets/images/useOneButton.png"),this.game.load.image("buyButton","assets/images/buyButton.png"),this.game.load.image("inventory_button","assets/images/inventory.png"),this.game.load.image("storeButton","assets/images/store.png"),this.game.load.image("inventory_background","assets/images/inventoryBackground.png"),this.game.load.image("close","assets/images/close.png"),this.game.load.image("itemGroupBackGround","assets/images/itemGroupBackGround.png"),this.game.load.image("dialog","assets/images/dialog.png"),this.game.load.image("errorIcon","assets/images/errorIcon.png"),this.game.load.image("successIcon","assets/images/successIcon.png"),this.game.load.spritesheet("character","assets/sprites/character.png",64,96),this.game.load.spritesheet("npc","assets/sprites/npc.png",64,96),this.game.load.spritesheet("friend","assets/sprites/npc.png",64,96),this.game.load.spritesheet("simple_enemy","assets/sprites/simple_enemy.png",64,64),this.game.load.spritesheet("strong_enemy","assets/sprites/strong_enemy.png",64,64),this.game.load.spritesheet("jeep","assets/sprites/jeep.png",219.5,150),this.game.load.spritesheet("revolverSprite","assets/sprites/revolver.png",30,16),this.game.load.spritesheet("machineGunSprite","assets/sprites/machineGun.png",60,42);for(var a=1;2>=a;a++)this.game.load.image("bullet"+a,"assets/images/bullet"+a+".png");this.game.load.image("simpleWeapon","assets/images/revolver.png"),this.game.load.image("strongWeapon","assets/images/machineGun.png"),this.game.load.image("comic1","assets/images/comic1.png"),this.game.load.image("comic2","assets/images/comic2.png"),this.game.load.image("introLevelOne","assets/images/introLevelOne.png"),this.game.load.image("house","assets/images/house.png"),this.game.load.image("openDoor","assets/images/openDoor.png"),this.game.load.image("working","assets/images/working.png"),this.game.load.image("addCashButton","assets/images/addCash.png"),this.game.load.image("useButtonShade","assets/images/useButtonShade.png"),this.game.load.image("mother","assets/images/mother.png"),this.game.load.image("father","assets/images/father.png"),this.game.load.image("daughter","assets/images/daughter.png"),this.game.load.image("son","assets/images/son.png")},update:function(){this.ready&&this.game.state.start("levelOne")},onLoadComplete:function(){this.ready=!0}},b.exports=d},{}],28:[function(a,b,c){var d=a("../../prefabs/items/inventory/Inventory"),e=a("../../prefabs/items/store/Store"),f=a("../../prefabs/items/HealthPack"),g=a("../../prefabs/character/Player"),h=a("../../prefabs/items/weapons/Revolver"),i=a("../../prefabs/items/weapons/MachineGun"),j=a("../../prefabs/character/SimpleEnemy"),k=a("../../prefabs/character/StrongEnemy"),l=a("../../prefabs/character/NPC"),m=a("../../prefabs/util/PopUp"),n=a("../../prefabs/worldElements/InteractiveCar"),o=a("../../prefabs/util/Dialog"),p=a("../../prefabs/englishChallenges/levelOne/FamilyEC"),q=function(a){this.game=a};q.prototype.constructor=q,q.prototype.preload=function(){this.game.stage.backgroundColor="#82CAFA",this.WORLD_WIDTH=8e3,this.WORLD_HEIGHT=500,this.GROUND_HEIGHT=this.WORLD_HEIGHT-60},q.prototype.create=function(){this.game.world.setBounds(0,0,this.WORLD_WIDTH,this.WORLD_HEIGHT),this.game.physics.startSystem(Phaser.Physics.ARCADE),this.gameObjects=[],this.createHealthPacksGroup(),this.createEnemiesGroup(),this.createNpcsGroup(),this.createCarsGroup(),this.addPlayer(),this.createWeaponsGroup(),this.addPlatforms(),this.addTexts(),this.addControls(),this.addCamera(),this.createInventory(),this.createStore()},q.prototype.updateEnemies=function(){for(var a=0;a<this.enemies.children.length;a++){var b=this.enemies.children[a];for(var c in b.weapons)this.game.physics.arcade.overlap(this.player,b.weapons[c].bullets,this.bulletHitCharacter,null,this);var d=this.game.physics.arcade.distanceBetween(this.player,b);d<=b.rangeDetection&&d>b.rangeAttack&&(this.game.physics.arcade.moveToXY(b,this.player.x+b.rangeAttack,b.y),b.rotateWeapon(this.player.x,this.player.y)),d<=b.rangeAttack&&(b.stop(),b.fireToXY(this.player.x,this.player.y))}},q.prototype.updateNpcs=function(){for(var a=0;a<this.npcs.children.length;a++){var b=this.npcs.children[a],c=this.game.physics.arcade.distanceBetween(this.player,b);if(c<=b.width){var d=new m(this,b.comicKey);this.game.add.existing(d),d.open(),this.player.x<b.x?this.player.x+=2*b.width:this.player.x-=2*b.width}}},q.prototype.update=function(){this.updateEnemies(),this.updateNpcs(),this.game.physics.arcade.collide(this.gameObjects,this.platforms),this.game.physics.arcade.collide(this.player,this.enemies),this.game.physics.arcade.overlap(this.player,this.healthPacks,this.collectHealthPack,null,this),this.game.physics.arcade.overlap(this.player,this.weapons,this.collectWeapon,null,this),this.game.physics.arcade.overlap(this.cars,this.enemies,this.crashEnemy,null,this);for(var a in this.player.weapons)this.game.physics.arcade.overlap(this.enemies,this.player.weapons[a].bullets,this.bulletHitCharacter,null,this);this.game.physics.arcade.overlap(this.player,this.healthPacks,this.collectHealthPack,null,this),this.cursors.left.isDown?(this.xDirection=-1,this.game.input.keyboard.isDown(Phaser.Keyboard.X)?this.player.runLeft():this.player.moveLeft()):this.cursors.right.isDown?(this.xDirection=1,this.game.input.keyboard.isDown(Phaser.Keyboard.X)?this.player.runRight():this.player.moveRight()):this.player.stop(),this.cursors.up.isDown&&this.player.body.touching.down&&this.player.jump(),this.cursors.up.isDown&&this.player.body.touching.down,this.game.input.keyboard.isDown(Phaser.Keyboard.SPACEBAR)&&(this.player.fireToXY(this.player.x+100*this.player.direction),this.updateAmmoText())},q.prototype.createEnemiesGroup=function(){this.enemies=this.game.add.group(),this.gameObjects.push(this.enemies)},q.prototype.createNpcsGroup=function(){this.npcs=this.game.add.group(),this.gameObjects.push(this.npcs)},q.prototype.createCarsGroup=function(){this.cars=this.game.add.group(),this.gameObjects.push(this.cars)},q.prototype.addSimpleEnemy=function(a){this.enemies.add(new j(this,a,this.GROUND_HEIGHT-100))},q.prototype.addStrongEnemy=function(a){this.enemies.add(new k(this,a,this.GROUND_HEIGHT-100))},q.prototype.addNPC=function(a,b,c){this.npcs.add(new l(this,a,this.GROUND_HEIGHT-100,b,c))},q.prototype.addCar=function(a,b){this.cars.add(new n(this,a,this.GROUND_HEIGHT,b))},q.prototype.addPlatforms=function(){this.platforms=this.game.add.group(),this.platforms.enableBody=!0,this.ground=this.platforms.create(0,this.game.world.height-64,"ground"),this.ground.scale.setTo(40,2),this.ground.body.immovable=!0,this.ledge=this.platforms.create(400,300,"ground"),this.ledge.body.immovable=!0,this.ledge=this.platforms.create(-150,200,"ground"),this.ledge.body.immovable=!0},q.prototype.addObject=function(a){this.game.add.existing(a)},q.prototype.addPlayer=function(){this.player=new g(this),this.game.add.existing(this.player),this.gameObjects.push(this.player),this.player.useWeapon(new h(this,700,100,!1))},q.prototype.addTexts=function(){this.scoreText=this.game.add.text(this.game.camera.width-300,16,"Score: "+this.player.score,{fontSize:"32px",fill:"#000"}),this.scoreText.fixedToCamera=!0,this.ammoText=this.game.add.text(this.game.camera.width-300,this.game.camera.height-50,"Ammo: "+this.player.currentWeapon.numberOfBullets,{fontSize:"32px",fill:"#000"}),this.ammoText.fixedToCamera=!0,this.healthLevelText=this.game.add.text(16,16,"Health: "+this.player.healthLevel,{fontSize:"32px",fill:"#000"}),this.healthLevelText.fixedToCamera=!0},q.prototype.addControls=function(){this.cursors=this.game.input.keyboard.createCursorKeys(),this.changeKey=this.input.keyboard.addKey(Phaser.Keyboard.ENTER),this.changeKey.onDown.add(this.player.nextWeapon,this.player)},q.prototype.addCamera=function(){this.game.renderer.renderSession.roundPixels=!0,this.game.camera.follow(this.player)},q.prototype.createHealthPacksGroup=function(){this.healthPacks=this.game.add.group(),this.gameObjects.push(this.healthPacks),this.addHealthPack(new f(this,500,10,5,this))},q.prototype.createWeaponsGroup=function(){this.weapons=this.game.add.group(),this.gameObjects.push(this.weapons)},q.prototype.createInventory=function(){this.inventory=new d(this),this.game.add.existing(this.inventory),this.inventoryButton=this.game.add.button(50,this.game.camera.height-30,"inventory_button",this.inventory.open,this.inventory),this.inventoryButton.anchor.setTo(.5,.5),this.inventoryButton.fixedToCamera=!0,this.inventoryButton.input.priorityID=1},q.prototype.createStore=function(){this.store=new e(this),this.game.add.existing(this.store),this.storeButton=this.game.add.button(110,this.game.camera.height-30,"storeButton",this.store.open,this.store),this.storeButton.anchor.setTo(.5,.5),this.storeButton.fixedToCamera=!0,this.storeButton.input.priorityID=1,this.englishChallenge=new p(this),this.game.add.existing(this.englishChallenge),this.addCashButton=this.game.add.button(170,this.game.camera.height-30,"addCashButton",this.englishChallenge.open,this.englishChallenge),this.addCashButton.anchor.setTo(.5,.5),this.addCashButton.fixedToCamera=!0,this.addCashButton.input.priorityID=1},q.prototype.bulletHitCharacter=function(a,b){
a.decreaseHealthLevel(b.power),a.updateHealhtLevelText(),b.kill()},q.prototype.collectWeapon=function(a,b){this.weapons.remove(b),this.player.useWeapon(b),this.updateAmmoText()},q.prototype.crashEnemy=function(a,b){a.isStopped()||b.killCharacter()},q.prototype.collectHealthPack=function(a,b){this.player.fullHealthLevel()?this.inventory.addItem(b):this.increaseHealthLevel(b.maxIncreasing),b.pickUp()},q.prototype.updateAmmoText=function(){this.ammoText.text="Ammo: "+this.player.currentWeapon.numberOfBullets},q.prototype.updateScoreText=function(){this.scoreText.text="Score: "+this.player.score},q.prototype.updateHealthLevelText=function(){this.player.healthLevel<=0&&this.game.state.start("menu"),this.healthLevelText.text="Health: "+this.player.healthLevel},q.prototype.increaseHealthLevel=function(a){this.player.increaseHealthLevel(a),this.updateHealthLevelText()},q.prototype.increaseScore=function(a){this.player.increaseScore(a),this.updateScoreText()},q.prototype.render=function(){this.game.debug.cameraInfo(this.game.camera,32,32)},q.prototype.addHealthPack=function(a){this.healthPacks.add(a)},q.prototype.addRevolver=function(a,b,c){this.weapons.add(new h(this,a,b,c))},q.prototype.addMachineGun=function(a,b,c){this.weapons.add(new i(this,a,b,c))},q.prototype.pause=function(){this.game.physics.arcade.isPaused=!0},q.prototype.resume=function(){this.game.physics.arcade.isPaused=!1},q.prototype.showErrorMessage=function(a,b){var c=new o(this,"errorIcon",a,b);this.game.add.existing(c),c.open()},q.prototype.showSuccessMessage=function(a,b){var c=new o(this,"successIcon",a,b);this.game.add.existing(c),c.open()},b.exports=q},{"../../prefabs/character/NPC":4,"../../prefabs/character/Player":5,"../../prefabs/character/SimpleEnemy":6,"../../prefabs/character/StrongEnemy":7,"../../prefabs/englishChallenges/levelOne/FamilyEC":8,"../../prefabs/items/HealthPack":9,"../../prefabs/items/inventory/Inventory":12,"../../prefabs/items/store/Store":14,"../../prefabs/items/weapons/MachineGun":17,"../../prefabs/items/weapons/Revolver":18,"../../prefabs/util/Dialog":20,"../../prefabs/util/PopUp":22,"../../prefabs/worldElements/InteractiveCar":23}],29:[function(a,b,c){var d,e,f=a("../levels/Level"),g=a("../../prefabs/worldElements/InteractiveHouse"),h=function(a){f.call(this,a)};h.prototype=Object.create(f.prototype),h.prototype.constructor=h,h.prototype.create=function(){f.prototype.create.call(this),d=1.7*this.game.camera.width,e=this.game.camera.width+200,this.addNPCs(),this.addEnemies(),this.addObjects(),this.addRevolver(2e3,400,!1),this.addRevolver(2e3,400,!1)},h.prototype.addObjects=function(){var a=new g(this,d+1.5*e,this.GROUND_HEIGHT,"house");a.anchor.set(0,1),this.addObject(a);var b=new g(this,d+5*e,this.GROUND_HEIGHT,"house");b.anchor.set(0,1),this.addObject(b),this.addCar(d+3*e,"jeep")},h.prototype.addNPCs=function(){this.addNPC(this.game.camera.width/2,"npc","comic1"),this.addNPC(d+e,"friend","comic2")},h.prototype.addEnemies=function(){for(var a=d,b=350,c=0;3>c;c++){for(var f=0;5>f;f++)a+=30,this.addSimpleEnemy(a,b);a+=2*e}},b.exports=h},{"../../prefabs/worldElements/InteractiveHouse":24,"../levels/Level":28}],30:[function(a,b,c){var d=function(a){};d.prototype={create:function(){var a=this.game.camera.width/2,b=this.game.camera.height/2;this.background=this.game.add.sprite(a,b,"introLevelOne"),this.background.anchor.setTo(.5,.5);var c=this.game.add.text(this.game.camera.width-80,this.game.camera.height-30,"Continue");c.font="Arial",c.fontSize=30,c.fontWeight="bold",c.fill="#0040FF",c.anchor.set(.5),c.inputEnabled=!0,c.events.onInputDown.add(this["continue"],this)},"continue":function(){this.game.state.start("levelOne")}},b.exports=d},{}]},{},[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]);