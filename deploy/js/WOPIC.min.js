/*! GameDevTemplateJS 0.0.1 | (c) 2015 Edwin Gamboa */ 
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=new Phaser.Game(1e3,500,Phaser.AUTO,"WOPIC");WebFontConfig={google:{families:["Shojumaru"]}};var e=a("./states/Boot"),f=a("./states/Preloader"),g=a("./states/Menu"),h=a("./states/levels/LevelOne"),i=a("./states/levels/LevelOneIntro");d.state.add("boot",e),d.state.add("preloader",f),d.state.add("menu",g),d.state.add("levelOne",h),d.state.add("levelOneIntro",i),d.state.start("boot")},{"./states/Boot":27,"./states/Menu":28,"./states/Preloader":29,"./states/levels/LevelOne":31,"./states/levels/LevelOneIntro":32}],2:[function(a,b,c){var d=150,e=250,f=100,g=100,h=.2,i=300,j=function(a,b,c,j){Phaser.Sprite.call(this,level.game,a,b,c);var k=j||{};this.healthLevel=k.healthLevel||f,this.maxHealthLevel=k.maxHealthLevel||g,this.speed=k.speed||d,this.maxSpeed=k.maxSpeed||e,level.game.physics.arcade.enable(this),this.body.bounce.y=k.bounce||h,this.body.gravity.y=k.gravity||i,this.body.collideWorldBounds=!0,this.anchor.setTo(.5,.5),this.currentWeaponIndex=0,this.weapons=[],this.weaponsKeys=[],this.onVehicle=!1};j.prototype=Object.create(Phaser.Sprite.prototype),j.prototype.constructor=j,j.prototype.moveLeft=function(){this.body.velocity.x=-this.speed,this.onVehicle?this.frame=this.stopLeftFrameIndex:this.animations.play("left"),void 0!==this.currentWeapon&&this.currentWeapon.pointToLeft()},j.prototype.moveRight=function(){this.body.velocity.x=this.speed,this.onVehicle?this.frame=this.stopRightFrameIndex:this.animations.play("right"),void 0!==this.currentWeapon&&this.currentWeapon.pointToRight()},j.prototype.runLeft=function(){this.body.velocity.x=-this.maxSpeed,this.onVehicle?this.frame=this.stopLeftFrameIndex:this.animations.play("left"),void 0!==this.currentWeapon&&this.currentWeapon.pointToLeft()},j.prototype.runRight=function(){this.body.velocity.x=this.maxSpeed,this.onVehicle?this.frame=this.stopRightFrameIndex:this.animations.play("right"),void 0!==this.currentWeapon&&this.currentWeapon.pointToRight()},j.prototype.stop=function(){this.body.velocity.x=0,this.animations.stop(),level.xDirection>0?this.frame=this.stopRightFrameIndex:this.frame=this.stopLeftFrameIndex},j.prototype.fullHealthLevel=function(){return this.healthLevel===this.maxHealthLevel},j.prototype.increaseHealthLevel=function(a){this.healthLevel+=a,this.healthLevel>this.maxHealthLevel&&(this.healthLevel=this.maxHealthLevel)},j.prototype.decreaseHealthLevel=function(a){this.healthLevel-=a,this.healthLevel<=0&&this.killCharacter()},j.prototype.killCharacter=function(){for(var a in this.weapons)this.weapons[a].killWeapon();this.kill()},j.prototype.setHealthLevel=function(a){this.healthLevel=a},j.prototype.updateCurrentWeapon=function(a){void 0!==this.currentWeapon&&this.currentWeapon.kill(),this.currentWeapon=this.weapons[a],this.currentWeapon.alive||this.currentWeapon.revive(),level.game.add.existing(this.currentWeapon)},j.prototype.nextWeapon=function(){this.currentWeaponIndex++,this.currentWeaponIndex===this.weaponsKeys.length&&(this.currentWeaponIndex=0),this.updateCurrentWeapon(this.weaponsKeys[this.currentWeaponIndex])},j.prototype.addWeapon=function(a){void 0===this.weapons[a.key]&&this.weaponsKeys.push(a.key),this.weapons[a.key]=a},j.prototype.fireToXY=function(a,b){this.currentWeapon.fire(a,b)},j.prototype.relocate=function(a,b){this.x=a,this.y=b},j.prototype.useWeapon=function(a){void 0===this.weapons[a.key]?(this.addWeapon(a),this.updateCurrentWeapon(a.key),level.xDirection>0?this.currentWeapon.pointToRight():this.currentWeapon.pointToLeft()):this.weapons[a.key].addBullets(a.numberOfBullets)},j.prototype.jump=function(){this.body.velocity.y=-350},b.exports=j},{}],3:[function(a,b,c){var d=a("./Character"),e=a("./../util/ResourceBar"),f=1,g=-1,h=function(a,b,c,g,h,i,j,k){var l={healthLevel:b,maxHealthLevel:b};d.call(this,c,g,a,l),this.animations.add("left",[0,1],10,!0),this.animations.add("right",[2,3],10,!0),this.stopLeftFrameIndex=0,this.stopRightFrameIndex=2,this.rangeDetection=level.game.rnd.integerInRange(h,i),this.rangeAttack=level.game.rnd.integerInRange(j,k),this.heatlthBar=new e(-this.width/2,-this.height/2-10,{width:40,height:5}),this.addChild(this.heatlthBar),this.direction=f};h.prototype=Object.create(d.prototype),h.prototype.constructor=h,h.prototype.update=function(){this.body.velocity.x>0?(this.direction=f,this.animations.play("right"),this.currentWeapon.pointToRight()):this.body.velocity.x<0&&(this.direction=g,this.animations.play("left"),this.currentWeapon.pointToLeft()),this.currentWeapon.updateCoordinates(this.x,this.y)},h.prototype.updateHealthLevel=function(){this.heatlthBar.updateResourceBarLevel(this.healthLevel/this.maxHealthLevel)},h.prototype.killCharacter=function(){this.healthLevel=0,level.player.increaseScore(.1*this.maxHealthLevel),d.prototype.killCharacter.call(this)},h.prototype.rotateWeapon=function(a,b){this.currentWeapon.rotation=level.game.physics.arcade.angleToXY(this,a,b)},h.prototype.stop=function(){this.body.velocity.x=0,this.animations.stop(),this.direction===f?this.frame=this.stopRightFrameIndex:this.frame=this.stopLeftFrameIndex},b.exports=h},{"./../util/ResourceBar":42,"./Character":2}],4:[function(a,b,c){var d=a("./Character"),e=function(a,b,c,e){d.call(this,a,b,c),this.comicKey=e,this.animations.add("left",[0,1,2,3],10,!0),this.animations.add("right",[5,6,7,8],10,!0)};e.prototype=Object.create(d.prototype),e.prototype.constructor=e,b.exports=e},{"./Character":2}],5:[function(a,b,c){var d=250,e=300,f=300,g=a("./Character"),h=10,i=function(){var a={speed:d,maxSpeed:e};g.call(this,32,level.game.world.height-150,"character",a),this.animations.add("left",[0,1,2,3],10,!0),this.animations.add("right",[5,6,7,8],10,!0),this.stopLeftFrameIndex=0,this.stopRightFrameIndex=5,this.score=h,this.frame=this.stopRightFrameIndex};i.prototype=Object.create(g.prototype),i.prototype.constructor=i,i.prototype.crouch=function(){this.animations.stop(),this.frame=9},i.prototype.increaseScore=function(a){this.score+=a,level.updateScoreText()},i.prototype.decreaseScore=function(a){this.score+=a,level.updateScoreText()},i.prototype.updateHealthLevel=function(){level.updateHealthLevel()},i.prototype.update=function(){void 0!==this.currentWeapon&&this.currentWeapon.updateCoordinates(this.x+25*level.xDirection,this.y+20)},i.prototype.killCharacter=function(){g.prototype.killCharacter.call(this)},i.prototype.changeSpeed=function(a,b){this.speed=a,this.maxSpeed=b},i.prototype.resetSpeed=function(){this.speed=d,this.maxSpeed=e},i.prototype.changeGravity=function(a){this.body.gravity.y=a},i.prototype.resetGravity=function(){this.body.gravity.y=f},i.prototype.buyItem=function(a){return this.score>=a.price?(this.score-=a.price,!0):!1},b.exports=i},{"./Character":2}],6:[function(a,b,c){var d=a("./Enemy"),e=a("../items/weapons/Revolver"),f="simple_enemy",g=5,h=200,i=700,j=100,k=300,l=function(a,b){d.call(this,f,g,a,b,h,i,j,k),this.useWeapon(new e(this,a,b,!0))};l.prototype=Object.create(d.prototype),l.prototype.constructor=l,b.exports=l},{"../items/weapons/Revolver":25,"./Enemy":3}],7:[function(a,b,c){var d=a("./Enemy"),e=a("../items/weapons/MachineGun"),f="strong_enemy",g=150,h=1e3,i=600,j=1e3,k=600,l=function(a,b){d.call(this,f,g,a,b,h,j,i,k),this.useWeapon(new e(this,a,b,!0))};l.prototype=Object.create(d.prototype),l.prototype.constructor=l,b.exports=l},{"../items/weapons/MachineGun":24,"./Enemy":3}],8:[function(a,b,c){var d=a("./dragAndDrop/DragAndDropChallenge"),e=a("../util/GridLayoutPanel"),f=a("../util/Button"),g=2,h=function(){var a={numberOfRows:4};d.call(this,"son","Context Groups",10,a)};h.prototype=Object.create(d.prototype),h.prototype.constructor=h,h.prototype.newChallenge=function(){this.clearChallenge();var a=["Mother","Son","Father","Living room","Dining room","Kitchen"];this.contexts=[];var b={numberOfColumns:a.length/2,numberOfRows:2};this.source=new e("wordField",b),b={numberOfColumns:g};var c,d,h,i,j,k=new e("wordField",b);for(this.numberOfWords=a.length/g,b={numberOfRows:this.numberOfWords},c=0;g>c;c++)for(j=new e("itemGroupBackGround",b),this.contexts.push(j),k.addElement(j),d=c*(g+1);d<(c+1)*this.numberOfWords;d++)h=level.game.make.text(0,0,a[d]),h.font="Shojumaru",h.fontSize=20,h.fill="#0040FF",h.inputEnabled=!0,h.input.enableDrag(!0,!0),h.events.onDragStop.add(this.dragAndDropControl.fixLocation,this.dragAndDropControl),h.code=""+c,this.elements.push(h),i=new e("useButtonShade"),i.code=""+c,this.destinations.push(i),j.addElement(i);this.dragAndDropControl.addElementsToSourceRandomly(),this.confirmButton=new f("Confirm",this.confirm,this),this.addElement(k),this.addElement(this.source),this.addElement(this.confirmButton)},h.prototype.bringItemToTop=function(a){h.prototype.isPrototypeOf(a.parent)?this.addChild(a):this.addChild(a.parent.parent)},b.exports=h},{"../util/Button":33,"../util/GridLayoutPanel":36,"./dragAndDrop/DragAndDropChallenge":12}],9:[function(a,b,c){var d=function(a,b,c){this.iconKey=a,this.name=b,this.score=c};d.prototype.success=function(a){level.increaseScore(this.score),level.showSuccessMessage("Well done! You got "+this.score+" points.",a)},d.prototype.failure=function(a){level.showErrorMessage("Sorry! Try Again.",a)},d.prototype.incomplete=function(a){level.showErrorMessage("The challenge is not complete.",a)},b.exports=d},{}],10:[function(a,b,c){var d=a("./dragAndDrop/DragAndDropChallenge"),e=a("../util/Button"),f=a("../util/VerticalLayoutPanel"),g=a("../util/GridLayoutPanel"),h=function(){var a={numberOfRows:3};d.call(this,"mother","Word-Image Match",10,a)};h.prototype=Object.create(d.prototype),h.prototype.constructor=h,h.prototype.newChallenge=function(){this.clearChallenge();var a=["mother","son","daughter"],b=[];for(var c in a){var d=new f("itemGroupBackGround"),h=level.game.make.sprite(0,0,a[c]),i=level.game.make.sprite(0,0,"useButtonShade");i.code=c,this.destinations.push(i),d.addElement(h),d.addElement(i);var j=level.game.make.text(0,0,a[c]);j.font="Shojumaru",j.fontSize=20,j.fill="#0040FF",j.inputEnabled=!0,j.input.enableDrag(!0,!0),j.events.onDragStop.add(this.dragAndDropControl.fixLocation,this.dragAndDropControl),j.code=c,b.push(d),this.elements.push(j)}var k={numberOfColumns:this.elements.length};this.source=new g("wordField",k);var l,m=new g("wordField",k);for(l in b)m.addElement(b[l]);this.dragAndDropControl.addElementsToSourceRandomly(),this.confirmButton=new e("Confirm",this.confirm,this),this.addElement(m),this.addElement(this.source),this.addElement(this.confirmButton)},h.prototype.bringItemToTop=function(a){h.prototype.isPrototypeOf(a.parent)?this.addChild(a):this.addChild(a.parent.parent)},b.exports=h},{"../util/Button":33,"../util/GridLayoutPanel":36,"../util/VerticalLayoutPanel":45,"./dragAndDrop/DragAndDropChallenge":12}],11:[function(a,b,c){var d=a("../util/GridLayoutPanel"),e=a("../util/Button"),f=a("./dragAndDrop/DragAndDropChallenge"),g=function(){var a={numberOfRows:4};f.call(this,"father","Word Unscramble",10,a)};g.prototype=Object.create(f.prototype),g.prototype.constructor=g,g.prototype.newChallenge=function(){this.clearChallenge();var a="mother",b=level.game.make.sprite(0,0,"mother"),c={numberOfColumns:a.length},f=new d("wordField",c);this.source=new d("wordField",c);var g,h,i;for(g=0;g<a.length;g++)i=new d("letterShade"),i.code=""+g,this.destinations.push(i),f.addElement(i),h=level.game.make.text(0,0,a.charAt(g)),h.font="Shojumaru",h.fontSize=20,h.fill="#0040FF",h.inputEnabled=!0,h.input.enableDrag(!0,!0),h.events.onDragStop.add(this.dragAndDropControl.fixLocation,this.dragAndDropControl),h.code=""+g,this.elements.push(h);this.dragAndDropControl.addElementsToSourceRandomly(),this.confirmButton=new e("Confirm",this.confirm,this),this.addElement(b),this.addElement(f),this.addElement(this.source),this.addElement(this.confirmButton)},g.prototype.bringItemToTop=function(a){g.prototype.isPrototypeOf(a.parent)?this.addChild(a):this.addChild(a.parent.parent)},b.exports=g},{"../util/Button":33,"../util/GridLayoutPanel":36,"./dragAndDrop/DragAndDropChallenge":12}],12:[function(a,b,c){var d=a("../../util/GridLayoutPopUp"),e=a("../../englishChallenges/EnglishChallenge"),f=a("./DragAndDropController"),g=function(a,b,c,g){d.call(this,"inventory_background",g),this.englishChallenge=new e(a,b,c),this.destinations=[],this.elements=[],this.dragAndDropControl=new f(this)};g.prototype=Object.create(d.prototype),g.prototype.constructor=g,g.prototype.confirm=function(){return this.dragAndDropControl.emptyDestinations()?void this.englishChallenge.incomplete(this):this.dragAndDropControl.elementsInCorrectDestination()?(this.englishChallenge.success(),void this.close(this)):void this.englishChallenge.failure(this)},g.prototype.clearChallenge=function(){this.children.length>1&&this.removeAllElements(),this.elements.length>0&&this.elements.splice(0,this.elements.length),this.destinations.length>0&&this.destinations.splice(0,this.destinations.length)},b.exports=g},{"../../englishChallenges/EnglishChallenge":9,"../../util/GridLayoutPopUp":37,"./DragAndDropController":13}],13:[function(a,b,c){var d=a("../../util/Utilities"),e=function(a){this.container=a};e.prototype.addToADestination=function(a,b){a.x=0,a.y=0,this.container.destinations[b].addChild(a)},e.prototype.fixLocation=function(a){var b;for(b in this.container.destinations)if(a.overlap(this.container.destinations[b])&&0===this.container.destinations[b].children.length)return void this.addToADestination(a,b);this.returnElementToSource(a)},e.prototype.elementsInCorrectDestination=function(){var a;for(a in this.container.destinations)if(this.container.destinations[a].children[0].code!==this.container.destinations[a].code)return!1;return!0},e.prototype.emptyDestinations=function(){var a;for(a in this.container.destinations)if(void 0===this.container.destinations[a].children[0])return!0;return!1},e.prototype.returnElementToSource=function(a){a.x=a.sourceX,a.y=a.sourceY,this.container.source.addChild(a)},e.prototype.addElementsToSourceRandomly=function(){var a,b=new d,c=b.randomIndexesArray(this.container.elements.length);for(a in c)this.container.source.addElement(this.container.elements[c[a]]),this.container.elements[c[a]].sourceX=this.container.elements[c[a]].x,this.container.elements[c[a]].sourceY=this.container.elements[c[a]].y},b.exports=e},{"../../util/Utilities":43}],14:[function(a,b,c){var d=a("../../util/GridLayoutPopUp"),e=a("./MenuItem"),f=a("../WordUnscramble"),g=a("../ContextGroups"),h=a("../ImageWordMatch"),i=function(){var a={numberOfRows:2,numberOfColumns:2};d.call(this,"inventory_background",a),this.createGames()};i.prototype=Object.create(d.prototype),i.prototype.constructor=i,i.prototype.createGames=function(){var a=[];a.push(new f),a.push(new g),a.push(new h);var b;for(b in a)this.addElement(new e(a[b],this)),level.game.add.existing(a[b])},b.exports=i},{"../../util/GridLayoutPopUp":37,"../ContextGroups":8,"../ImageWordMatch":10,"../WordUnscramble":11,"./MenuItem":15}],15:[function(a,b,c){var d=a("../../items/ItemGroupView"),e=function(a,b){d.call(this,a.englishChallenge.iconKey,a.englishChallenge.name,b),this.challenge=a,this.updateScoreText()};e.prototype=Object.create(d.prototype),e.prototype.constructor=e,e.prototype.buttonAction=function(){this.parent.close(),this.challenge.newChallenge(),this.challenge.open()},e.prototype.updateScoreText=function(){this.message.text=""+this.challenge.englishChallenge.score},b.exports=e},{"../../items/ItemGroupView":18}],16:[function(a,b,c){var d=a("./Item"),e=10,f=300,g=function(a,b,c){d.call(this,a,b,"healthPack"+c,c*e),this.body.gravity.y=f,this.maxIncreasing=c};g.prototype=Object.create(d.prototype),g.prototype.constructor=g,g.prototype.pickUp=function(){this.kill()},g.prototype.use=function(){this.alive||this.revive(),this.x=level.player.x,this.y=50,level.addHealthPack(this)},b.exports=g},{"./Item":17}],17:[function(a,b,c){var d=.7+.2*Math.random(),e=function(a,b,c,e){Phaser.Sprite.call(this,level.game,a,b,c),this.anchor.set(.5,.5),level.game.physics.arcade.enable(this),this.body.bounce.y=d,this.body.collideWorldBounds=!0,this.level=level,this.price=e};e.prototype=Object.create(Phaser.Sprite.prototype),e.prototype.constructor=e,b.exports=e},{}],18:[function(a,b,c){var d=a("../util/GridLayoutPanel"),e=a("../util/Button"),f=function(a,b,c){Phaser.Sprite.call(this,level.game,0,0,"itemGroupBackGround"),this.icon=level.game.make.sprite(10,10,a),this.message=level.game.make.text(0,0,""),this.message.font="Arial",this.message.fontSize=30,this.message.fill="#0040FF",this.messageBackground=new d("letterShade"),this.messageBackground.addElement(this.message),this.messageBackground.x=10,this.messageBackground.y=this.icon.y+this.icon.height+10,this.button=new e(b,this.buttonAction,this),this.button.x=this.messageBackground.x+this.messageBackground.width+10,this.button.y=this.icon.y+this.icon.height+10,this.addChild(this.icon),this.addChild(this.messageBackground),this.addChild(this.button),this.parent=c};f.prototype=Object.create(Phaser.Sprite.prototype),f.prototype.constructor=f,f.prototype.buttonAction=function(){},b.exports=f},{"../util/Button":33,"../util/GridLayoutPanel":36}],19:[function(a,b,c){var d=a("../../util/GridLayoutPopUp"),e=a("./InventoryItem"),f=a("../HealthPack"),g=a("../weapons/Revolver"),h=function(){var a={numberOfColumns:5,numberOfRows:2};d.call(this,"inventory_background",a),this.healthPacks=[],this.items=[],this.createItemGroups()};h.prototype=Object.create(d.prototype),h.prototype.constructor=h,h.prototype.addHealthPack=function(a){5==a.maxIncreasing?(this.healthPack5Group.amountAvailable++,this.healthPack5Group.updateAmountAvailableText()):20==a.maxIncreasing?this.healthPacks[1]++:this.healthPacks[2]++},h.prototype.addItem=function(a){void 0===this.items[a.key].item&&this.items[a.key].setItem(a),this.items[a.key].amountAvailable++,this.items[a.key].updateAmountAvailableText()},h.prototype.createItemGroups=function(){var a=new f(0,0,5);this.items.healthPack5=new e(a,this),this.addElement(this.items.healthPack5);var b=new g(0,0,!1);this.items.simpleWeapon=new e(b,this),this.addElement(this.items.simpleWeapon)},h.prototype.showHealthPacks=function(){},b.exports=h},{"../../util/GridLayoutPopUp":37,"../HealthPack":16,"../weapons/Revolver":25,"./InventoryItem":20}],20:[function(a,b,c){var d=a("../ItemGroupView"),e=function(a,b){d.call(this,a.key,"Use",b),this.item=a,this.amountAvailable=0,this.updateAmountAvailableText()};e.prototype=Object.create(d.prototype),e.prototype.constructor=e,e.prototype.buttonAction=function(){this.amountAvailable>0&&(this.item.use(),this.amountAvailable--,this.updateAmountAvailableText(),this.parent.close())},e.prototype.updateAmountAvailableText=function(){this.message.text=""+this.amountAvailable},b.exports=e},{"../ItemGroupView":18}],21:[function(a,b,c){var d=a("../../util/GridLayoutPopUp"),e=a("./StoreItem"),f=a("../HealthPack"),g=a("../weapons/Revolver"),h=function(){var a={numberOfColumns:5,numberOfRows:2};d.call(this,"inventory_background",a),this.healthPacks=[],this.items=[],this.createItemGroups()};h.prototype=Object.create(d.prototype),h.prototype.constructor=h,h.prototype.addHealthPack=function(a){5==a.maxIncreasing?(this.healthPack5Group.amountAvailable++,this.healthPack5Group.updateAmountAvailableText()):20==a.maxIncreasing?this.healthPacks[1]++:this.healthPacks[2]++},h.prototype.addItem=function(a){void 0===this.items[a.key].item&&this.items[a.key].setItem(a),this.items[a.key].amountAvailable++,this.items[a.key].updateAmountAvailableText()},h.prototype.createItemGroups=function(){var a=new f(0,0,5);this.items.healthPack5=new e(a,this),this.addElement(this.items.healthPack5);var b=new g(0,0,!1);this.items.simpleWeapon=new e(b,this),this.addElement(this.items.simpleWeapon)},h.prototype.showHealthPacks=function(){},b.exports=h},{"../../util/GridLayoutPopUp":37,"../HealthPack":16,"../weapons/Revolver":25,"./StoreItem":22}],22:[function(a,b,c){var d=a("../ItemGroupView"),e=function(a,b){d.call(this,a.key,"Buy",b),this.item=a,this.updatePriceText()};e.prototype=Object.create(d.prototype),e.prototype.constructor=e,e.prototype.updatePriceText=function(){this.message.text=this.item.price},e.prototype.buttonAction=function(){var a=level.player.buyItem(this.item);a?(this.item.use(),level.updateScoreText(),level.showSuccessMessage("Successful Purchase!",this.parent)):level.showErrorMessage("Not enough money.",this.parent)},b.exports=e},{"../ItemGroupView":18}],23:[function(a,b,c){var d;d=function(a,b){Phaser.Sprite.call(this,level.game,0,0,b),this.power=a,level.game.physics.arcade.enable(this),this.anchor.setTo(0,.5),this.checkWorldBounds=!0,this.outOfBoundsKill=!0,this.exists=!1},d.prototype=Object.create(Phaser.Sprite.prototype),d.prototype.constructor=d,b.exports=d},{}],24:[function(a,b,c){var d=a("./Weapon"),e=30,f="machineGunSprite",g="bullet2",h=1,i=700,j=100,k=10,l=100,m=function(a,b,c){d.call(this,a,b,e,f,g,h,i,j,k,c,l)};m.prototype=Object.create(d.prototype),m.prototype.constructor=m,b.exports=m},{"./Weapon":26}],25:[function(a,b,c){var d=a("./Weapon"),e=20,f="revolverSprite",g="bullet1",h=0,i=400,j=250,k=1,l=20,m=function(a,b,c){d.call(this,a,b,e,f,g,h,i,j,k,c,l)};m.prototype=Object.create(d.prototype),m.prototype.constructor=m,b.exports=m},{"./Weapon":26}],26:[function(a,b,c){var d=a("../Item"),e=a("./Bullet"),f=0,g=1,h=function(a,b,c,f,g,h,i,j,k,l,m){d.call(this,a,b,f,m),this.anchor.set(.5,0),this.numberOfBullets=c,this.power=k,this.bullets=level.game.add.group();for(var n=0;n<this.numberOfBullets;n++)this.bullets.add(new e(k,g));this.nextFire=h,this.bulletSpeed=i,this.fireRate=j,this.infinite=l};h.prototype=Object.create(d.prototype),h.prototype.constructor=h,h.prototype.fire=function(a,b){var c=b||this.y;level.game.time.time>this.nextFire&&(this.infinite||this.numberOfBullets>0)&&(this.currentBullet=this.bullets.getFirstExists(!1),this.currentBullet&&(this.currentBullet.reset(this.x,this.y),this.currentBullet.rotation=level.game.physics.arcade.angleToXY(this.currentBullet,a,c),this.currentBullet.body.velocity.x=Math.cos(this.currentBullet.rotation)*this.bulletSpeed,this.currentBullet.body.velocity.y=Math.sin(this.currentBullet.rotation)*this.bulletSpeed,this.nextFire=level.game.time.time+this.fireRate,this.numberOfBullets--))},h.prototype.updateCoordinates=function(a,b){this.x=a,this.y=b},h.prototype.use=function(){this.alive||this.revive(),level.player.useWeapon(this),level.updateAmmoText()},h.prototype.addBullets=function(a){this.numberOfBullets+=a},h.prototype.killWeapon=function(){this.bullets.removeAll(),this.kill()},h.prototype.pointToRight=function(){this.frame=f},h.prototype.pointToLeft=function(){this.frame=g},b.exports=h},{"../Item":17,"./Bullet":23}],27:[function(a,b,c){var d=function(a){};d.prototype={preload:function(){this.load.image("loading","assets/images/loading.png"),this.load.image("load_progress_bar_dark","assets/images/progress_bar_bg.png"),this.load.image("load_progress_bar","assets/images/progress_bar_fg.png")},create:function(){this.game.input.maxPointers=1,this.game.state.start("preloader")}},b.exports=d},{}],28:[function(a,b,c){var d=function(a){};d.prototype={create:function(){var a=this.game.add.text(this.game.camera.width/2,this.game.camera.height/2,"New Game");a.font="Arial",a.fontSize=50,a.fontWeight="bold",a.fill="#0040FF",a.anchor.set(.5),a.inputEnabled=!0,a.events.onInputDown.add(this.newGame,this)},newGame:function(){this.game.state.start("levelOneIntro")}},b.exports=d},{}],29:[function(a,b,c){var d=function(a){this.ready=!1};d.prototype={preload:function(){this.displayLoadScreen(),this.loadAssets()},displayLoadScreen:function(){var a=this.game.camera.width/2,b=this.game.camera.height/2;this.loading=this.game.add.sprite(a,b-20,"loading"),this.loading.anchor.setTo(.5,.5),this.barBg=this.game.add.sprite(a,b+40,"load_progress_bar_dark"),this.barBg.anchor.setTo(.5,.5),this.bar=this.game.add.sprite(a-192,b+40,"load_progress_bar"),this.bar.anchor.setTo(0,.5),this.load.setPreloadSprite(this.bar),this.load.onLoadComplete.addOnce(this.onLoadComplete,this)},loadAssets:function(){this.game.load.image("ground","assets/images/platform.png"),this.game.load.image("healthPack5","assets/images/healthPack5.png"),this.game.load.image("healthPack20","assets/images/healthPack20.png"),this.game.load.image("healthPack50","assets/images/healthPack50.png"),this.game.load.image("useOneButton","assets/images/useOneButton.png"),this.game.load.image("buyButton","assets/images/buyButton.png"),this.game.load.image("inventory_button","assets/images/inventory.png"),this.game.load.image("storeButton","assets/images/store.png"),this.game.load.image("inventory_background","assets/images/inventoryBackground.png"),this.game.load.image("close","assets/images/close.png"),this.game.load.image("itemGroupBackGround","assets/images/itemGroupBackGround.png"),this.game.load.image("dialog","assets/images/dialog.png"),this.game.load.image("errorIcon","assets/images/errorIcon.png"),this.game.load.image("successIcon","assets/images/successIcon.png"),this.game.load.spritesheet("character","assets/sprites/character.png",64,96),this.game.load.spritesheet("npc","assets/sprites/npc.png",64,96),this.game.load.spritesheet("friend","assets/sprites/npc.png",64,96),this.game.load.spritesheet("simple_enemy","assets/sprites/simple_enemy.png",64,64),this.game.load.spritesheet("strong_enemy","assets/sprites/strong_enemy.png",64,64),this.game.load.spritesheet("jeep","assets/sprites/jeep.png",219.5,150),this.game.load.spritesheet("revolverSprite","assets/sprites/revolver.png",30,16),this.game.load.spritesheet("machineGunSprite","assets/sprites/machineGun.png",60,42);for(var a=1;2>=a;a++)this.game.load.image("bullet"+a,"assets/images/bullet"+a+".png");this.game.load.image("simpleWeapon","assets/images/revolver.png"),this.game.load.image("strongWeapon","assets/images/machineGun.png"),this.game.load.image("comic1","assets/images/comic1.png"),this.game.load.image("comic2","assets/images/comic2.png"),this.game.load.image("introLevelOne","assets/images/introLevelOne.png"),this.game.load.image("house","assets/images/house.png"),this.game.load.image("openDoor","assets/images/openDoor.png"),this.game.load.image("working","assets/images/working.png"),this.game.load.image("addCashButton","assets/images/addCash.png"),this.game.load.image("useButtonShade","assets/images/useButtonShade.png"),this.game.load.image("button","assets/images/button.png"),this.game.load.image("mother","assets/images/mother.png"),this.game.load.image("father","assets/images/father.png"),this.game.load.image("daughter","assets/images/daughter.png"),this.game.load.image("son","assets/images/son.png"),this.game.load.image("wordField","assets/images/wordField.png"),this.game.load.image("letterShade","assets/images/letterShade.png"),this.game.load.image("transparent","assets/images/transparent.png"),this.game.load.image("healthBarBackground","assets/images/healthBarBackground.png"),this.game.load.image("healthBar","assets/images/healthBar.png"),this.game.load.script("webfont","//ajax.googleapis.com/ajax/libs/webfont/1.4.7/webfont.js")},update:function(){this.ready&&(this.game.state.start("levelOne"),level=this.game.state.states.levelOne)},onLoadComplete:function(){this.ready=!0}},b.exports=d},{}],30:[function(a,b,c){var d=a("../../items/inventory/Inventory"),e=a("../../items/store/Store"),f=a("../../items/HealthPack"),g=a("../../character/Player"),h=a("../../items/weapons/Revolver"),i=a("../../items/weapons/MachineGun"),j=a("../../character/SimpleEnemy"),k=a("../../character/StrongEnemy"),l=a("../../character/NPC"),m=a("../../util/PopUp"),n=a("../../worldElements/InteractiveCar"),o=a("../../util/Dialog"),p=a("../../englishChallenges/menu/EnglishChallengesMenu"),q=a("../../util/ResourceBar"),r=function(a){this.game=a};r.prototype.constructor=r,r.prototype.preload=function(){this.game.stage.backgroundColor="#82CAFA",this.WORLD_WIDTH=8e3,this.WORLD_HEIGHT=500,this.GROUND_HEIGHT=this.WORLD_HEIGHT-60},r.prototype.create=function(){this.game.world.setBounds(0,0,this.WORLD_WIDTH,this.WORLD_HEIGHT),this.game.physics.startSystem(Phaser.Physics.ARCADE),this.gameObjects=[],this.activePopUps=0,this.xDirection=1,this.createHealthPacksGroup(),this.createEnemiesGroup(),this.createNpcsGroup(),this.createCarsGroup(),this.addPlayer(),this.createWeaponsGroup(),this.addPlatforms(),this.addTexts(),this.addHealthBar(),this.addControls(),this.addCamera(),this.createInventory(),this.createEnglishChallengesMenu(),this.createStore()},r.prototype.updateEnemies=function(){var a;for(a=0;a<this.enemies.children.length;a++){var b=this.enemies.children[a];for(var c in b.weapons)this.game.physics.arcade.overlap(this.player,b.weapons[c].bullets,this.bulletHitCharacter,null,this);var d=this.game.physics.arcade.distanceBetween(this.player,b);d<=b.rangeAttack?(b.stop(),b.fireToXY(this.player.x,this.player.y)):d<=b.rangeDetection&&(this.game.physics.arcade.moveToXY(b,this.player.x+b.rangeAttack,b.y),b.rotateWeapon(this.player.x,this.player.y))}},r.prototype.updateNpcs=function(){for(var a=0;a<this.npcs.children.length;a++){var b=this.npcs.children[a],c=this.game.physics.arcade.distanceBetween(this.player,b);if(c<=b.width){var d=new m(b.comicKey);this.game.add.existing(d),d.open(),this.player.x<b.x?this.player.x+=2*b.width:this.player.x-=2*b.width}}},r.prototype.update=function(){this.updateEnemies(),this.updateNpcs(),this.game.physics.arcade.collide(this.gameObjects,this.platforms),this.game.physics.arcade.collide(this.player,this.enemies),this.game.physics.arcade.overlap(this.player,this.healthPacks,this.collectHealthPack,null,this),this.game.physics.arcade.overlap(this.player,this.weapons,this.collectWeapon,null,this),this.game.physics.arcade.overlap(this.cars,this.enemies,this.crashEnemy,null,this);for(var a in this.player.weapons)this.game.physics.arcade.overlap(this.enemies,this.player.weapons[a].bullets,this.bulletHitCharacter,null,this);this.game.physics.arcade.overlap(this.player,this.healthPacks,this.collectHealthPack,null,this),this.cursors.left.isDown?(this.xDirection=-1,this.game.input.keyboard.isDown(Phaser.Keyboard.X)?this.player.runLeft():this.player.moveLeft()):this.cursors.right.isDown?(this.xDirection=1,this.game.input.keyboard.isDown(Phaser.Keyboard.X)?this.player.runRight():this.player.moveRight()):this.player.stop(),this.cursors.up.isDown&&this.player.body.touching.down&&this.player.jump(),this.cursors.up.isDown&&this.player.body.touching.down,this.game.input.keyboard.isDown(Phaser.Keyboard.SPACEBAR)&&(this.player.fireToXY(this.player.x+100*this.xDirection),this.updateAmmoText())},r.prototype.addHealthBar=function(){var a=this.healthLevelText.x+this.healthLevelText.width,b=this.healthLevelText.y;this.healthBar=new q(a,b),this.addObject(this.healthBar),this.healthBar.fixedToCamera=!0},r.prototype.createEnemiesGroup=function(){this.enemies=this.game.add.group(),this.gameObjects.push(this.enemies)},r.prototype.createNpcsGroup=function(){this.npcs=this.game.add.group(),this.gameObjects.push(this.npcs)},r.prototype.createCarsGroup=function(){this.cars=this.game.add.group(),this.gameObjects.push(this.cars)},r.prototype.addSimpleEnemy=function(a){this.enemies.add(new j(a,this.GROUND_HEIGHT-100))},r.prototype.addStrongEnemy=function(a){this.enemies.add(new k(a,this.GROUND_HEIGHT-100))},r.prototype.addNPC=function(a,b,c){this.npcs.add(new l(a,this.GROUND_HEIGHT-100,b,c))},r.prototype.addCar=function(a,b){this.cars.add(new n(a,this.GROUND_HEIGHT,b))},r.prototype.addPlatforms=function(){this.platforms=this.game.add.group(),this.platforms.enableBody=!0,this.ground=this.platforms.create(0,this.game.world.height-64,"ground"),this.ground.scale.setTo(40,2),
this.ground.body.immovable=!0},r.prototype.addObject=function(a){this.game.add.existing(a)},r.prototype.addPlayer=function(){this.player=new g(this),this.game.add.existing(this.player),this.gameObjects.push(this.player),this.player.useWeapon(new h(700,100,!1))},r.prototype.addTexts=function(){this.scoreText=this.game.add.text(this.game.camera.width-300,16,"Score: "+this.player.score,{fontSize:"32px",fill:"#000"}),this.scoreText.fixedToCamera=!0,this.ammoText=this.game.add.text(this.game.camera.width-300,this.game.camera.height-50,"Ammo: "+this.player.currentWeapon.numberOfBullets,{fontSize:"32px",fill:"#000"}),this.ammoText.fixedToCamera=!0,this.healthLevelText=this.game.add.text(16,16,"Health: ",{fontSize:"32px",fill:"#000"}),this.healthLevelText.fixedToCamera=!0},r.prototype.addControls=function(){this.cursors=this.game.input.keyboard.createCursorKeys(),this.changeKey=this.input.keyboard.addKey(Phaser.Keyboard.ENTER),this.changeKey.onDown.add(this.player.nextWeapon,this.player)},r.prototype.addCamera=function(){this.game.renderer.renderSession.roundPixels=!0,this.game.camera.follow(this.player)},r.prototype.createHealthPacksGroup=function(){this.healthPacks=this.game.add.group(),this.gameObjects.push(this.healthPacks),this.addHealthPack(new f(500,10,5,this))},r.prototype.createWeaponsGroup=function(){this.weapons=this.game.add.group(),this.gameObjects.push(this.weapons)},r.prototype.createInventory=function(){this.inventory=new d(this),this.game.add.existing(this.inventory),this.inventoryButton=this.game.add.button(50,this.game.camera.height-30,"inventory_button",this.inventory.open,this.inventory),this.inventoryButton.anchor.setTo(.5,.5),this.inventoryButton.fixedToCamera=!0,this.inventoryButton.input.priorityID=1},r.prototype.createEnglishChallengesMenu=function(){this.englishChallengeMenu=new p,this.game.add.existing(this.englishChallengeMenu),this.addCashButton=this.game.add.button(170,this.game.camera.height-30,"addCashButton",this.englishChallengeMenu.open,this.englishChallengeMenu),this.addCashButton.anchor.setTo(.5,.5),this.addCashButton.fixedToCamera=!0,this.addCashButton.input.priorityID=1},r.prototype.createStore=function(){this.store=new e(this),this.game.add.existing(this.store),this.storeButton=this.game.add.button(110,this.game.camera.height-30,"storeButton",this.store.open,this.store),this.storeButton.anchor.setTo(.5,.5),this.storeButton.fixedToCamera=!0,this.storeButton.input.priorityID=1},r.prototype.bulletHitCharacter=function(a,b){a.decreaseHealthLevel(b.power),a.updateHealthLevel(),b.kill()},r.prototype.collectWeapon=function(a,b){this.weapons.remove(b),this.player.useWeapon(b),this.updateAmmoText()},r.prototype.crashEnemy=function(a,b){a.isStopped()||b.killCharacter()},r.prototype.collectHealthPack=function(a,b){this.player.fullHealthLevel()?this.inventory.addItem(b):this.increaseHealthLevel(b.maxIncreasing),b.pickUp()},r.prototype.updateAmmoText=function(){this.ammoText.text="Ammo: "+this.player.currentWeapon.numberOfBullets},r.prototype.updateScoreText=function(){this.scoreText.text="Score: "+this.player.score},r.prototype.updateHealthLevel=function(){this.player.healthLevel<=0&&this.game.state.start("menu"),this.healthLevelText.text="Health: "+this.player.healthLevel,this.healthBar.updateResourceBarLevel(this.player.healthLevel/this.player.maxHealthLevel)},r.prototype.increaseHealthLevel=function(a){this.player.increaseHealthLevel(a),this.updateHealthLevel()},r.prototype.increaseScore=function(a){this.player.increaseScore(a),this.updateScoreText()},r.prototype.addHealthPack=function(a){this.healthPacks.add(a)},r.prototype.addRevolver=function(a,b,c){this.weapons.add(new h(a,b,c))},r.prototype.addMachineGun=function(a,b,c){this.weapons.add(new i(a,b,c))},r.prototype.pause=function(){this.game.physics.arcade.isPaused=!0},r.prototype.resume=function(){this.game.physics.arcade.isPaused=!1},r.prototype.showErrorMessage=function(a,b){var c=new o("errorIcon",a,b);this.game.add.existing(c),c.open()},r.prototype.showSuccessMessage=function(a,b){var c=new o("successIcon",a,b);this.game.add.existing(c),c.open()},b.exports=r},{"../../character/NPC":4,"../../character/Player":5,"../../character/SimpleEnemy":6,"../../character/StrongEnemy":7,"../../englishChallenges/menu/EnglishChallengesMenu":14,"../../items/HealthPack":16,"../../items/inventory/Inventory":19,"../../items/store/Store":21,"../../items/weapons/MachineGun":24,"../../items/weapons/Revolver":25,"../../util/Dialog":34,"../../util/PopUp":41,"../../util/ResourceBar":42,"../../worldElements/InteractiveCar":46}],31:[function(a,b,c){var d=a("../levels/Level"),e=a("../../worldElements/InteractiveHouse"),f=function(a){d.call(this,a)};f.prototype=Object.create(d.prototype),f.prototype.constructor=f,f.prototype.create=function(){d.prototype.create.call(this),this.firstCheckPointX=1.3*this.game.camera.width,this.checkPointsDistance=this.game.camera.width+140,this.addNPCs(),this.addEnemies(),this.addObjects(),this.addRevolver(2e3,400,!1),this.addRevolver(2e3,400,!1)},f.prototype.addObjects=function(){var a=new e(this.firstCheckPointX+1.5*this.checkPointsDistance,this.GROUND_HEIGHT,"house");a.anchor.set(0,1),this.addObject(a);var b=new e(this.firstCheckPointX+5*this.checkPointsDistance,this.GROUND_HEIGHT,"house");b.anchor.set(0,1),this.addObject(b),this.addCar(this.firstCheckPointX+3*this.checkPointsDistance,"jeep")},f.prototype.addNPCs=function(){this.addNPC(this.game.camera.width/2,"npc","comic1"),this.addNPC(this.firstCheckPointX+this.checkPointsDistance,"friend","comic2")},f.prototype.addEnemies=function(){for(var a=this.firstCheckPointX,b=350,c=3,d=0;4>d;d++){for(var e=0;c>e;e++)a+=30,this.addSimpleEnemy(a,b);c++,a+=2*this.checkPointsDistance}},b.exports=f},{"../../worldElements/InteractiveHouse":47,"../levels/Level":30}],32:[function(a,b,c){var d=function(a){};d.prototype.create=function(){var a=this.game.camera.width/2,b=this.game.camera.height/2;this.background=this.game.add.sprite(a,b,"introLevelOne"),this.background.anchor.setTo(.5,.5);var c=this.game.add.text(this.game.camera.width-80,this.game.camera.height-30,"Continue");c.font="Arial",c.fontSize=30,c.fontWeight="bold",c.fill="#0040FF",c.anchor.set(.5),c.inputEnabled=!0,c.events.onInputDown.add(this["continue"],this)},d.prototype["continue"]=function(){this.game.state.start("levelOne")},b.exports=d},{}],33:[function(a,b,c){var d=function(a,b,c,d){var e=d||[],f=e.x||0,g=e.y||0;Phaser.Sprite.call(this,level.game,f,g,"transparent"),this.text=level.game.make.text(10,10,a),this.text.font="Shojumaru",this.text.fontSize=20,this.text.fill="#FFFFFF",this.background=level.game.make.sprite(0,0,"button"),this.inputEnabled=!0,this.events.onInputDown.add(b,c);var h=(this.text.width+20)/this.background.width;this.background.scale.x=h,this.addChild(this.background),this.addChild(this.text)};d.prototype=Object.create(Phaser.Sprite.prototype),d.prototype.constructor=d,b.exports=d},{}],34:[function(a,b,c){var d=a("./HorizontalLayoutPopUp"),e=function(a,b,c){d.call(this,"dialog",c),this.icon=level.game.make.sprite(0,0,a),this.message=level.game.make.text(0,0,""),this.message.font="Arial",this.message.fontSize=20,this.message.fill="#000000",this.message.text=b,this.addElement(this.icon),this.addElement(this.message)};e.prototype=Object.create(d.prototype),e.prototype.constructor=e,e.prototype.setText=function(a){this.message.text=a},b.exports=e},{"./HorizontalLayoutPopUp":40}],35:[function(a,b,c){var d=10,e=function(a,b,c){this.currentRow=0,this.currentColumn=0,this.numberOfColumns=a,this.numberOfRows=b,this.rowWidth=(c.width-d*this.numberOfColumns)/this.numberOfColumns,this.rowHeight=(c.height-d*this.numberOfRows)/this.numberOfRows,1===a&&1===b?(this.xOrigin=0,this.yOrigin=0):(this.xOrigin=d,this.yOrigin=d),this.container=c};e.prototype.constructor=e,e.prototype.addElement=function(a){if(!(this.currentColumn>=this.numberOfColumns&&(this.currentColumn=0,this.currentRow++,this.currentRow===this.numberOfRows))){var b=this.rowWidth/2-a.width/2;a.x=this.xOrigin+(this.rowWidth+d)*this.currentColumn+b;var c=this.yOrigin+this.rowHeight/2-a.height/2;a.y=(this.rowHeight+d)*this.currentRow+c,this.container.addChild(a),this.currentColumn++}},e.prototype.restartsIndexes=function(){this.currentColumn=0,this.currentRow=0},b.exports=e},{}],36:[function(a,b,c){var d=a("./GridLayout"),e=1,f=1,g=function(a,b){var c=b||[],g=c.x||0,h=c.y||0;Phaser.Sprite.call(this,level.game,g,h,a),this.numberOfColumns=c.numberOfColumns||e,this.numberOfRows=c.numberOfRows||f,this.grid=new d(this.numberOfColumns,this.numberOfRows,this)};g.prototype=Object.create(Phaser.Sprite.prototype),g.prototype.constructor=g,g.prototype.addElement=function(a){this.grid.addElement(a)},g.prototype.removeAllElements=function(){this.removeChildren(),this.grid.restartsIndexes()},b.exports=g},{"./GridLayout":35}],37:[function(a,b,c){var d=a("./PopUp"),e=a("./GridLayout"),f=1,g=1,h=function(a,b,c){d.call(this,a,c),this.currentRow=0,this.currentColumn=0;var h=b||{};this.numberOfColumns=h.numberOfColumns||f,this.numberOfRows=h.numberOfRows||g,this.grid=new e(this.numberOfColumns,this.numberOfRows,this)};h.prototype=Object.create(d.prototype),h.prototype.constructor=h,h.prototype.addElement=function(a){this.grid.addElement(a)},h.prototype.removeAllElements=function(){this.removeChildren(1),this.grid.restartsIndexes()},b.exports=h},{"./GridLayout":35,"./PopUp":41}],38:[function(a,b,c){var d=10,e=function(a){this.currentY=d,this.parent=a};e.prototype.constructor=e,e.prototype.addElement=function(a){a.x=this.currentY,this.currentY+=a.width+d,a.y=this.parent.height/2-a.height/2,this.parent.addChild(a)},b.exports=e},{}],39:[function(a,b,c){var d=a("./HorizontalLayout"),e=function(a,b){var c=b||[],e=c.x||0,f=c.y||0;Phaser.Sprite.call(this,level.game,e,f,a),this.layout=new d(this)};e.prototype=Object.create(Phaser.Sprite.prototype),e.prototype.constructor=e,e.prototype.addElement=function(a){this.layout.addElement(a)},b.exports=e},{"./HorizontalLayout":38}],40:[function(a,b,c){var d=a("./PopUp"),e=a("./HorizontalLayout"),f=function(a,b){d.call(this,a,b),this.layout=new e(this)};f.prototype=Object.create(d.prototype),f.prototype.constructor=f,f.prototype.addElement=function(a){this.layout.addElement(a)},b.exports=f},{"./HorizontalLayout":38,"./PopUp":41}],41:[function(a,b,c){var d=function(a,b){Phaser.Sprite.call(this,level.game,0,0,a),this.xCenter=this.width/2,this.yCenter=this.height/2,this.x=level.game.camera.width/2-this.xCenter,this.y=level.game.camera.height/2-this.yCenter,this.closeButton=level.game.make.sprite(this.width,0,"close"),this.closeButton.anchor.set(.5,.5),this.closeButton.inputEnabled=!0,this.closeButton.input.priorityID=2,this.closeButton.events.onInputDown.add(this.close,this),this.addChild(this.closeButton),this.fixedToCamera=!0,this.visible=!1,void 0===b?this.withoutParent=!0:(this.withoutParent=!1,this.parent=b)};d.prototype=Object.create(Phaser.Sprite.prototype),d.prototype.constructor=d,d.prototype.close=function(){this.visible=!1,level.activePopUps--,0===level.activePopUps&&level.resume(),this.kill()},d.prototype.open=function(){this.alive||this.revive(),0===level.activePopUps&&level.pause(),level.activePopUps++,this.bringToTop(),this.visible=!0},b.exports=d},{}],42:[function(a,b,c){var d=function(a,b,c){Phaser.Sprite.call(this,level.game,a,b,"healthBarBackground"),this.bar=level.game.make.sprite(0,0,"healthBar");var d=c||[];void 0!==d.width&&void 0!==d.height&&(this.width=d.width,this.height=d.height),this.addChild(this.bar)};d.prototype=Object.create(Phaser.Sprite.prototype),d.prototype.constructor=d,d.prototype.updateResourceBarLevel=function(a){this.bar.scale.x=a},b.exports=d},{}],43:[function(a,b,c){var d=function(){};d.prototype.randomIndexesArray=function(a){var b,c,d=[],e=[];for(c=0;a>c;c++)e.push(c);for(c=0;a>c;c++)b=level.game.rnd.integerInRange(0,e.length-1),d.push(e[b]),e.splice(b,1);return d},b.exports=d},{}],44:[function(a,b,c){var d=10,e=function(a){this.currentY=d,this.parent=a};e.prototype.constructor=e,e.prototype.addElement=function(a){a.y=this.currentY,this.currentY+=a.height+d,a.x=this.parent.width/2-a.width/2,this.parent.addChild(a)},b.exports=e},{}],45:[function(a,b,c){var d=a("./VerticalLayout"),e=function(a,b){var c=b||[],e=c.x||0,f=c.y||0;Phaser.Sprite.call(this,level.game,e,f,a),this.layout=new d(this)};e.prototype=Object.create(Phaser.Sprite.prototype),e.prototype.constructor=e,e.prototype.addElement=function(a){this.layout.addElement(a)},b.exports=e},{"./VerticalLayout":44}],46:[function(a,b,c){var d=(a("../util/PopUp"),a("../util/ResourceBar")),e=400,f=500,g=3e4,h=400,i=function(a,b,c){Phaser.Sprite.call(this,level.game,a,b,c),this.anchor.set(0,0),this.getOnButton=level.game.make.sprite(this.width/2,-this.height,"openDoor"),this.getOnButton.anchor.set(.5),this.getOnButton.inputEnabled=!0,this.getOnButton.input.priorityID=2,this.getOnButton.events.onInputDown.add(this.getOn,this),this.addChild(this.getOnButton),level.game.physics.arcade.enable(this),this.body.collideWorldBounds=!0,this.anchor.set(.5,1),this.animations.add("left",[0],10,!0),this.animations.add("right",[1],10,!0),this.occupied=!1,this.stopLeftFrameIndex=0,this.stopRightFrameIndex=1,this.remainingGas=h,this.maxDistance=h,this.gasBar=new d(-this.width/2,-this.height-10,{width:80,height:8}),this.addChild(this.gasBar)};i.prototype=Object.create(Phaser.Sprite.prototype),i.prototype.constructor=i,i.prototype.getOn=function(){level.player.onVehicle=!0,level.player.relocate(this.x,this.y-100),level.player.changeSpeed(e,f),level.player.changeGravity(g),this.occupied=!0},i.prototype.getOff=function(){this.stop(),level.player.onVehicle=!1,level.player.relocate(this.x+100,this.y-100),level.player.resetSpeed(),level.player.resetGravity(),this.occupied=!1},i.prototype.update=function(){this.occupied&&(this.body.velocity.x=level.player.body.velocity.x,this.body.velocity.x<0?(this.animations.play("left"),this.remainingGas--):this.body.velocity.x>0?(this.animations.play("right"),this.remainingGas--):level.direction>0?this.frame=this.stopRightFrameIndex:this.frame=this.stopLeftFrameIndex,this.remainingGas<=0&&this.getOff(),this.gasBar.updateResourceBarLevel(this.remainingGas/this.maxDistance))},i.prototype.isStopped=function(){return 0===this.body.velocity.x},i.prototype.stop=function(){this.body.velocity.x=0},b.exports=i},{"../util/PopUp":41,"../util/ResourceBar":42}],47:[function(a,b,c){var d=a("../items/store/Store"),e=function(a,b,c){Phaser.Sprite.call(this,level.game,a,b,c),this.anchor.set(0,0),this.openDoorButton=level.game.make.sprite(this.width/2,-this.height/2,"openDoor"),this.openDoorButton.anchor.set(.5),this.openDoorButton.inputEnabled=!0,this.openDoorButton.input.priorityID=2,this.openDoorButton.events.onInputDown.add(this.openActivity,this),this.addChild(this.openDoorButton)};e.prototype=Object.create(Phaser.Sprite.prototype),e.prototype.constructor=e,e.prototype.openActivity=function(){var a=new d(level);level.game.add.existing(a),a.open()},b.exports=e},{"../items/store/Store":21}]},{},[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47]);